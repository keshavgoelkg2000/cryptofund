import {
  init_dist,
  ne,
  p,
  se,
  y
} from "./chunk-WWM34MKN.js";
import {
  $,
  $t,
  $t2,
  At,
  B,
  Bt,
  D,
  D2,
  Ft,
  Gt,
  Ht,
  JsonRpcProvider,
  Kt,
  Lt,
  Mn,
  Mt,
  N,
  Qt,
  Rn,
  S,
  S2,
  U,
  V,
  Vt,
  Wt,
  Xe,
  _,
  an,
  b,
  cn,
  dt,
  er,
  esm_exports,
  formatJsonRpcError,
  formatJsonRpcRequest,
  formatJsonRpcResult,
  ft,
  h,
  isHttpUrl,
  isJsonRpcError,
  isJsonRpcRequest,
  isJsonRpcResponse,
  isJsonRpcResult,
  lt,
  oe,
  ot,
  parseConnectionError,
  payloadId,
  pt,
  q,
  qt,
  require_cjs,
  require_cjs3 as require_cjs2,
  safeJsonParse,
  safeJsonStringify,
  st,
  un,
  ut,
  v,
  ve,
  w,
  xt,
  zn,
  zr,
  zt
} from "./chunk-PDDJNFOE.js";
import "./chunk-5ID2CS7O.js";
import "./chunk-5BY5OH4Z.js";
import "./chunk-6Z3PY23T.js";
import {
  require_events
} from "./chunk-UR4CD6SH.js";
import "./chunk-457LSDR5.js";
import "./chunk-NO757KM3.js";
import "./chunk-37L3W2XO.js";
import {
  _global,
  init_shim
} from "./chunk-6SWLQQ3Q.js";
import {
  __commonJS,
  __esm,
  __export,
  __toCommonJS,
  __toESM
} from "./chunk-GN3OLCG2.js";

// node_modules/cross-fetch/dist/browser-ponyfill.js
var require_browser_ponyfill = __commonJS({
  "node_modules/cross-fetch/dist/browser-ponyfill.js"(exports, module) {
    init_shim();
    var global = typeof self !== "undefined" ? self : exports;
    var __self__ = function() {
      function F2() {
        this.fetch = false;
        this.DOMException = global.DOMException;
      }
      F2.prototype = global;
      return new F2();
    }();
    (function(self2) {
      var irrelevant = function(exports2) {
        var support = {
          searchParams: "URLSearchParams" in self2,
          iterable: "Symbol" in self2 && "iterator" in Symbol,
          blob: "FileReader" in self2 && "Blob" in self2 && function() {
            try {
              new Blob();
              return true;
            } catch (e) {
              return false;
            }
          }(),
          formData: "FormData" in self2,
          arrayBuffer: "ArrayBuffer" in self2
        };
        function isDataView(obj) {
          return obj && DataView.prototype.isPrototypeOf(obj);
        }
        if (support.arrayBuffer) {
          var viewClasses = [
            "[object Int8Array]",
            "[object Uint8Array]",
            "[object Uint8ClampedArray]",
            "[object Int16Array]",
            "[object Uint16Array]",
            "[object Int32Array]",
            "[object Uint32Array]",
            "[object Float32Array]",
            "[object Float64Array]"
          ];
          var isArrayBufferView = ArrayBuffer.isView || function(obj) {
            return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1;
          };
        }
        function normalizeName(name) {
          if (typeof name !== "string") {
            name = String(name);
          }
          if (/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name)) {
            throw new TypeError("Invalid character in header field name");
          }
          return name.toLowerCase();
        }
        function normalizeValue(value) {
          if (typeof value !== "string") {
            value = String(value);
          }
          return value;
        }
        function iteratorFor(items) {
          var iterator = {
            next: function() {
              var value = items.shift();
              return { done: value === void 0, value };
            }
          };
          if (support.iterable) {
            iterator[Symbol.iterator] = function() {
              return iterator;
            };
          }
          return iterator;
        }
        function Headers(headers) {
          this.map = {};
          if (headers instanceof Headers) {
            headers.forEach(function(value, name) {
              this.append(name, value);
            }, this);
          } else if (Array.isArray(headers)) {
            headers.forEach(function(header) {
              this.append(header[0], header[1]);
            }, this);
          } else if (headers) {
            Object.getOwnPropertyNames(headers).forEach(function(name) {
              this.append(name, headers[name]);
            }, this);
          }
        }
        Headers.prototype.append = function(name, value) {
          name = normalizeName(name);
          value = normalizeValue(value);
          var oldValue = this.map[name];
          this.map[name] = oldValue ? oldValue + ", " + value : value;
        };
        Headers.prototype["delete"] = function(name) {
          delete this.map[normalizeName(name)];
        };
        Headers.prototype.get = function(name) {
          name = normalizeName(name);
          return this.has(name) ? this.map[name] : null;
        };
        Headers.prototype.has = function(name) {
          return this.map.hasOwnProperty(normalizeName(name));
        };
        Headers.prototype.set = function(name, value) {
          this.map[normalizeName(name)] = normalizeValue(value);
        };
        Headers.prototype.forEach = function(callback, thisArg) {
          for (var name in this.map) {
            if (this.map.hasOwnProperty(name)) {
              callback.call(thisArg, this.map[name], name, this);
            }
          }
        };
        Headers.prototype.keys = function() {
          var items = [];
          this.forEach(function(value, name) {
            items.push(name);
          });
          return iteratorFor(items);
        };
        Headers.prototype.values = function() {
          var items = [];
          this.forEach(function(value) {
            items.push(value);
          });
          return iteratorFor(items);
        };
        Headers.prototype.entries = function() {
          var items = [];
          this.forEach(function(value, name) {
            items.push([name, value]);
          });
          return iteratorFor(items);
        };
        if (support.iterable) {
          Headers.prototype[Symbol.iterator] = Headers.prototype.entries;
        }
        function consumed(body) {
          if (body.bodyUsed) {
            return Promise.reject(new TypeError("Already read"));
          }
          body.bodyUsed = true;
        }
        function fileReaderReady(reader) {
          return new Promise(function(resolve, reject) {
            reader.onload = function() {
              resolve(reader.result);
            };
            reader.onerror = function() {
              reject(reader.error);
            };
          });
        }
        function readBlobAsArrayBuffer(blob) {
          var reader = new FileReader();
          var promise = fileReaderReady(reader);
          reader.readAsArrayBuffer(blob);
          return promise;
        }
        function readBlobAsText(blob) {
          var reader = new FileReader();
          var promise = fileReaderReady(reader);
          reader.readAsText(blob);
          return promise;
        }
        function readArrayBufferAsText(buf) {
          var view = new Uint8Array(buf);
          var chars = new Array(view.length);
          for (var i = 0; i < view.length; i++) {
            chars[i] = String.fromCharCode(view[i]);
          }
          return chars.join("");
        }
        function bufferClone(buf) {
          if (buf.slice) {
            return buf.slice(0);
          } else {
            var view = new Uint8Array(buf.byteLength);
            view.set(new Uint8Array(buf));
            return view.buffer;
          }
        }
        function Body() {
          this.bodyUsed = false;
          this._initBody = function(body) {
            this._bodyInit = body;
            if (!body) {
              this._bodyText = "";
            } else if (typeof body === "string") {
              this._bodyText = body;
            } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
              this._bodyBlob = body;
            } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
              this._bodyFormData = body;
            } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
              this._bodyText = body.toString();
            } else if (support.arrayBuffer && support.blob && isDataView(body)) {
              this._bodyArrayBuffer = bufferClone(body.buffer);
              this._bodyInit = new Blob([this._bodyArrayBuffer]);
            } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
              this._bodyArrayBuffer = bufferClone(body);
            } else {
              this._bodyText = body = Object.prototype.toString.call(body);
            }
            if (!this.headers.get("content-type")) {
              if (typeof body === "string") {
                this.headers.set("content-type", "text/plain;charset=UTF-8");
              } else if (this._bodyBlob && this._bodyBlob.type) {
                this.headers.set("content-type", this._bodyBlob.type);
              } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
                this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8");
              }
            }
          };
          if (support.blob) {
            this.blob = function() {
              var rejected = consumed(this);
              if (rejected) {
                return rejected;
              }
              if (this._bodyBlob) {
                return Promise.resolve(this._bodyBlob);
              } else if (this._bodyArrayBuffer) {
                return Promise.resolve(new Blob([this._bodyArrayBuffer]));
              } else if (this._bodyFormData) {
                throw new Error("could not read FormData body as blob");
              } else {
                return Promise.resolve(new Blob([this._bodyText]));
              }
            };
            this.arrayBuffer = function() {
              if (this._bodyArrayBuffer) {
                return consumed(this) || Promise.resolve(this._bodyArrayBuffer);
              } else {
                return this.blob().then(readBlobAsArrayBuffer);
              }
            };
          }
          this.text = function() {
            var rejected = consumed(this);
            if (rejected) {
              return rejected;
            }
            if (this._bodyBlob) {
              return readBlobAsText(this._bodyBlob);
            } else if (this._bodyArrayBuffer) {
              return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));
            } else if (this._bodyFormData) {
              throw new Error("could not read FormData body as text");
            } else {
              return Promise.resolve(this._bodyText);
            }
          };
          if (support.formData) {
            this.formData = function() {
              return this.text().then(decode);
            };
          }
          this.json = function() {
            return this.text().then(JSON.parse);
          };
          return this;
        }
        var methods = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
        function normalizeMethod(method) {
          var upcased = method.toUpperCase();
          return methods.indexOf(upcased) > -1 ? upcased : method;
        }
        function Request(input, options) {
          options = options || {};
          var body = options.body;
          if (input instanceof Request) {
            if (input.bodyUsed) {
              throw new TypeError("Already read");
            }
            this.url = input.url;
            this.credentials = input.credentials;
            if (!options.headers) {
              this.headers = new Headers(input.headers);
            }
            this.method = input.method;
            this.mode = input.mode;
            this.signal = input.signal;
            if (!body && input._bodyInit != null) {
              body = input._bodyInit;
              input.bodyUsed = true;
            }
          } else {
            this.url = String(input);
          }
          this.credentials = options.credentials || this.credentials || "same-origin";
          if (options.headers || !this.headers) {
            this.headers = new Headers(options.headers);
          }
          this.method = normalizeMethod(options.method || this.method || "GET");
          this.mode = options.mode || this.mode || null;
          this.signal = options.signal || this.signal;
          this.referrer = null;
          if ((this.method === "GET" || this.method === "HEAD") && body) {
            throw new TypeError("Body not allowed for GET or HEAD requests");
          }
          this._initBody(body);
        }
        Request.prototype.clone = function() {
          return new Request(this, { body: this._bodyInit });
        };
        function decode(body) {
          var form = new FormData();
          body.trim().split("&").forEach(function(bytes) {
            if (bytes) {
              var split = bytes.split("=");
              var name = split.shift().replace(/\+/g, " ");
              var value = split.join("=").replace(/\+/g, " ");
              form.append(decodeURIComponent(name), decodeURIComponent(value));
            }
          });
          return form;
        }
        function parseHeaders(rawHeaders) {
          var headers = new Headers();
          var preProcessedHeaders = rawHeaders.replace(/\r?\n[\t ]+/g, " ");
          preProcessedHeaders.split(/\r?\n/).forEach(function(line) {
            var parts = line.split(":");
            var key = parts.shift().trim();
            if (key) {
              var value = parts.join(":").trim();
              headers.append(key, value);
            }
          });
          return headers;
        }
        Body.call(Request.prototype);
        function Response(bodyInit, options) {
          if (!options) {
            options = {};
          }
          this.type = "default";
          this.status = options.status === void 0 ? 200 : options.status;
          this.ok = this.status >= 200 && this.status < 300;
          this.statusText = "statusText" in options ? options.statusText : "OK";
          this.headers = new Headers(options.headers);
          this.url = options.url || "";
          this._initBody(bodyInit);
        }
        Body.call(Response.prototype);
        Response.prototype.clone = function() {
          return new Response(this._bodyInit, {
            status: this.status,
            statusText: this.statusText,
            headers: new Headers(this.headers),
            url: this.url
          });
        };
        Response.error = function() {
          var response = new Response(null, { status: 0, statusText: "" });
          response.type = "error";
          return response;
        };
        var redirectStatuses = [301, 302, 303, 307, 308];
        Response.redirect = function(url, status) {
          if (redirectStatuses.indexOf(status) === -1) {
            throw new RangeError("Invalid status code");
          }
          return new Response(null, { status, headers: { location: url } });
        };
        exports2.DOMException = self2.DOMException;
        try {
          new exports2.DOMException();
        } catch (err) {
          exports2.DOMException = function(message, name) {
            this.message = message;
            this.name = name;
            var error = Error(message);
            this.stack = error.stack;
          };
          exports2.DOMException.prototype = Object.create(Error.prototype);
          exports2.DOMException.prototype.constructor = exports2.DOMException;
        }
        function fetch2(input, init) {
          return new Promise(function(resolve, reject) {
            var request = new Request(input, init);
            if (request.signal && request.signal.aborted) {
              return reject(new exports2.DOMException("Aborted", "AbortError"));
            }
            var xhr = new XMLHttpRequest();
            function abortXhr() {
              xhr.abort();
            }
            xhr.onload = function() {
              var options = {
                status: xhr.status,
                statusText: xhr.statusText,
                headers: parseHeaders(xhr.getAllResponseHeaders() || "")
              };
              options.url = "responseURL" in xhr ? xhr.responseURL : options.headers.get("X-Request-URL");
              var body = "response" in xhr ? xhr.response : xhr.responseText;
              resolve(new Response(body, options));
            };
            xhr.onerror = function() {
              reject(new TypeError("Network request failed"));
            };
            xhr.ontimeout = function() {
              reject(new TypeError("Network request failed"));
            };
            xhr.onabort = function() {
              reject(new exports2.DOMException("Aborted", "AbortError"));
            };
            xhr.open(request.method, request.url, true);
            if (request.credentials === "include") {
              xhr.withCredentials = true;
            } else if (request.credentials === "omit") {
              xhr.withCredentials = false;
            }
            if ("responseType" in xhr && support.blob) {
              xhr.responseType = "blob";
            }
            request.headers.forEach(function(value, name) {
              xhr.setRequestHeader(name, value);
            });
            if (request.signal) {
              request.signal.addEventListener("abort", abortXhr);
              xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                  request.signal.removeEventListener("abort", abortXhr);
                }
              };
            }
            xhr.send(typeof request._bodyInit === "undefined" ? null : request._bodyInit);
          });
        }
        fetch2.polyfill = true;
        if (!self2.fetch) {
          self2.fetch = fetch2;
          self2.Headers = Headers;
          self2.Request = Request;
          self2.Response = Response;
        }
        exports2.Headers = Headers;
        exports2.Request = Request;
        exports2.Response = Response;
        exports2.fetch = fetch2;
        Object.defineProperty(exports2, "__esModule", { value: true });
        return exports2;
      }({});
    })(__self__);
    __self__.fetch.ponyfill = true;
    delete __self__.fetch.polyfill;
    var ctx = __self__;
    exports = ctx.fetch;
    exports.default = ctx.fetch;
    exports.fetch = ctx.fetch;
    exports.Headers = ctx.Headers;
    exports.Request = ctx.Request;
    exports.Response = ctx.Response;
    module.exports = exports;
  }
});

// node_modules/@walletconnect/modal/dist/index.js
var dist_exports = {};
__export(dist_exports, {
  WalletConnectModal: () => d
});
var d;
var init_dist2 = __esm({
  "node_modules/@walletconnect/modal/dist/index.js"() {
    init_shim();
    init_dist();
    d = class {
      constructor(e) {
        this.openModal = se.open, this.closeModal = se.close, this.subscribeModal = se.subscribe, this.setTheme = ne.setThemeConfig, ne.setThemeConfig(e), y.setConfig(e), this.initUi();
      }
      async initUi() {
        if (typeof window < "u") {
          await import("./dist-K5UIKTVA.js");
          const e = document.createElement("wcm-modal");
          document.body.insertAdjacentElement("beforeend", e), p.setIsUiLoaded(true);
        }
      }
    };
  }
});

// node_modules/@walletconnect/ethereum-provider/dist/index.es.js
init_shim();
var import_events4 = __toESM(require_events());

// node_modules/@walletconnect/universal-provider/dist/index.es.js
init_shim();

// node_modules/@walletconnect/sign-client/dist/index.es.js
init_shim();
var import_logger = __toESM(require_cjs2());
var import_events = __toESM(require_events());
var import_time = __toESM(require_cjs());
var X = "wc";
var F = 2;
var H = "client";
var G = `${X}@${F}:${H}:`;
var M = { name: H, logger: "error", controller: false, relayUrl: "wss://relay.walletconnect.com" };
var W = "WALLETCONNECT_DEEPLINK_CHOICE";
var ne2 = "proposal";
var oe2 = "Proposal expired";
var ae = "session";
var A = import_time.SEVEN_DAYS;
var ce = "engine";
var V2 = { wc_sessionPropose: { req: { ttl: import_time.FIVE_MINUTES, prompt: true, tag: 1100 }, res: { ttl: import_time.FIVE_MINUTES, prompt: false, tag: 1101 } }, wc_sessionSettle: { req: { ttl: import_time.FIVE_MINUTES, prompt: false, tag: 1102 }, res: { ttl: import_time.FIVE_MINUTES, prompt: false, tag: 1103 } }, wc_sessionUpdate: { req: { ttl: import_time.ONE_DAY, prompt: false, tag: 1104 }, res: { ttl: import_time.ONE_DAY, prompt: false, tag: 1105 } }, wc_sessionExtend: { req: { ttl: import_time.ONE_DAY, prompt: false, tag: 1106 }, res: { ttl: import_time.ONE_DAY, prompt: false, tag: 1107 } }, wc_sessionRequest: { req: { ttl: import_time.FIVE_MINUTES, prompt: true, tag: 1108 }, res: { ttl: import_time.FIVE_MINUTES, prompt: false, tag: 1109 } }, wc_sessionEvent: { req: { ttl: import_time.FIVE_MINUTES, prompt: true, tag: 1110 }, res: { ttl: import_time.FIVE_MINUTES, prompt: false, tag: 1111 } }, wc_sessionDelete: { req: { ttl: import_time.ONE_DAY, prompt: false, tag: 1112 }, res: { ttl: import_time.ONE_DAY, prompt: false, tag: 1113 } }, wc_sessionPing: { req: { ttl: import_time.THIRTY_SECONDS, prompt: false, tag: 1114 }, res: { ttl: import_time.THIRTY_SECONDS, prompt: false, tag: 1115 } } };
var U2 = { min: import_time.FIVE_MINUTES, max: import_time.SEVEN_DAYS };
var I = { idle: "IDLE", active: "ACTIVE" };
var le = "request";
var pe = ["wc_sessionPropose", "wc_sessionRequest", "wc_authRequest"];
var ns = Object.defineProperty;
var os = Object.defineProperties;
var as = Object.getOwnPropertyDescriptors;
var he = Object.getOwnPropertySymbols;
var cs = Object.prototype.hasOwnProperty;
var ls = Object.prototype.propertyIsEnumerable;
var de = (m2, r, e) => r in m2 ? ns(m2, r, { enumerable: true, configurable: true, writable: true, value: e }) : m2[r] = e;
var g = (m2, r) => {
  for (var e in r || (r = {}))
    cs.call(r, e) && de(m2, e, r[e]);
  if (he)
    for (var e of he(r))
      ls.call(r, e) && de(m2, e, r[e]);
  return m2;
};
var b2 = (m2, r) => os(m2, as(r));
var ps = class extends S {
  constructor(r) {
    super(r), this.name = ce, this.events = new import_events.default(), this.initialized = false, this.ignoredPayloadTypes = [_], this.requestQueue = { state: I.idle, queue: [] }, this.sessionRequestQueue = { state: I.idle, queue: [] }, this.requestQueueDelay = import_time.ONE_SECOND, this.init = async () => {
      this.initialized || (await this.cleanup(), this.registerRelayerEvents(), this.registerExpirerEvents(), this.registerPairingEvents(), this.client.core.pairing.register({ methods: Object.keys(V2) }), this.initialized = true, setTimeout(() => {
        this.sessionRequestQueue.queue = this.getPendingSessionRequests(), this.processSessionRequestQueue();
      }, (0, import_time.toMiliseconds)(this.requestQueueDelay)));
    }, this.connect = async (e) => {
      await this.isInitialized();
      const s = b2(g({}, e), { requiredNamespaces: e.requiredNamespaces || {}, optionalNamespaces: e.optionalNamespaces || {} });
      await this.isValidConnect(s);
      const { pairingTopic: t, requiredNamespaces: i, optionalNamespaces: n, sessionProperties: o, relays: a } = s;
      let c = t, p3, d2 = false;
      if (c && (d2 = this.client.core.pairing.pairings.get(c).active), !c || !d2) {
        const { topic: v3, uri: S4 } = await this.client.core.pairing.create();
        c = v3, p3 = S4;
      }
      const h2 = await this.client.core.crypto.generateKeyPair(), R = g({ requiredNamespaces: i, optionalNamespaces: n, relays: a != null ? a : [{ protocol: ot }], proposer: { publicKey: h2, metadata: this.client.metadata } }, o && { sessionProperties: o }), { reject: w2, resolve: T, done: K } = st(import_time.FIVE_MINUTES, oe2);
      if (this.events.once(ft("session_connect"), async ({ error: v3, session: S4 }) => {
        if (v3)
          w2(v3);
        else if (S4) {
          S4.self.publicKey = h2;
          const B2 = b2(g({}, S4), { requiredNamespaces: S4.requiredNamespaces, optionalNamespaces: S4.optionalNamespaces });
          await this.client.session.set(S4.topic, B2), await this.setExpiry(S4.topic, S4.expiry), c && await this.client.core.pairing.updateMetadata({ topic: c, metadata: S4.peer.metadata }), T(B2);
        }
      }), !c) {
        const { message: v3 } = N("NO_MATCHING_KEY", `connect() pairing topic: ${c}`);
        throw new Error(v3);
      }
      const L2 = await this.sendRequest({ topic: c, method: "wc_sessionPropose", params: R }), ue = lt(import_time.FIVE_MINUTES);
      return await this.setProposal(L2, g({ id: L2, expiry: ue }, R)), { uri: p3, approval: K };
    }, this.pair = async (e) => (await this.isInitialized(), await this.client.core.pairing.pair(e)), this.approve = async (e) => {
      await this.isInitialized(), await this.isValidApprove(e);
      const { id: s, relayProtocol: t, namespaces: i, sessionProperties: n } = e, o = this.client.proposal.get(s);
      let { pairingTopic: a, proposer: c, requiredNamespaces: p3, optionalNamespaces: d2 } = o;
      a = a || "", B(p3) || (p3 = At(i, "approve()"));
      const h2 = await this.client.core.crypto.generateKeyPair(), R = c.publicKey, w2 = await this.client.core.crypto.generateSharedKey(h2, R);
      a && s && (await this.client.core.pairing.updateMetadata({ topic: a, metadata: c.metadata }), await this.sendResult({ id: s, topic: a, result: { relay: { protocol: t != null ? t : "irn" }, responderPublicKey: h2 } }), await this.client.proposal.delete(s, U("USER_DISCONNECTED")), await this.client.core.pairing.activate({ topic: a }));
      const T = g({ relay: { protocol: t != null ? t : "irn" }, namespaces: i, requiredNamespaces: p3, optionalNamespaces: d2, pairingTopic: a, controller: { publicKey: h2, metadata: this.client.metadata }, expiry: lt(A) }, n && { sessionProperties: n });
      await this.client.core.relayer.subscribe(w2), await this.sendRequest({ topic: w2, method: "wc_sessionSettle", params: T, throwOnFailedPublish: true });
      const K = b2(g({}, T), { topic: w2, pairingTopic: a, acknowledged: false, self: T.controller, peer: { publicKey: c.publicKey, metadata: c.metadata }, controller: h2 });
      return await this.client.session.set(w2, K), await this.setExpiry(w2, lt(A)), { topic: w2, acknowledged: () => new Promise((L2) => setTimeout(() => L2(this.client.session.get(w2)), 500)) };
    }, this.reject = async (e) => {
      await this.isInitialized(), await this.isValidReject(e);
      const { id: s, reason: t } = e, { pairingTopic: i } = this.client.proposal.get(s);
      i && (await this.sendError(s, i, t), await this.client.proposal.delete(s, U("USER_DISCONNECTED")));
    }, this.update = async (e) => {
      await this.isInitialized(), await this.isValidUpdate(e);
      const { topic: s, namespaces: t } = e, i = await this.sendRequest({ topic: s, method: "wc_sessionUpdate", params: { namespaces: t } }), { done: n, resolve: o, reject: a } = st();
      return this.events.once(ft("session_update", i), ({ error: c }) => {
        c ? a(c) : o();
      }), await this.client.session.update(s, { namespaces: t }), { acknowledged: n };
    }, this.extend = async (e) => {
      await this.isInitialized(), await this.isValidExtend(e);
      const { topic: s } = e, t = await this.sendRequest({ topic: s, method: "wc_sessionExtend", params: {} }), { done: i, resolve: n, reject: o } = st();
      return this.events.once(ft("session_extend", t), ({ error: a }) => {
        a ? o(a) : n();
      }), await this.setExpiry(s, lt(A)), { acknowledged: i };
    }, this.request = async (e) => {
      await this.isInitialized(), await this.isValidRequest(e);
      const { chainId: s, request: t, topic: i, expiry: n } = e, o = payloadId(), { done: a, resolve: c, reject: p3 } = st(n, "Request expired. Please try again.");
      return this.events.once(ft("session_request", o), ({ error: d2, result: h2 }) => {
        d2 ? p3(d2) : c(h2);
      }), await Promise.all([new Promise(async (d2) => {
        await this.sendRequest({ clientRpcId: o, topic: i, method: "wc_sessionRequest", params: { request: t, chainId: s }, expiry: n, throwOnFailedPublish: true }).catch((h2) => p3(h2)), this.client.events.emit("session_request_sent", { topic: i, request: t, chainId: s, id: o }), d2();
      }), new Promise(async (d2) => {
        const h2 = await this.client.core.storage.getItem(W);
        pt({ id: o, topic: i, wcDeepLink: h2 }), d2();
      }), a()]).then((d2) => d2[2]);
    }, this.respond = async (e) => {
      await this.isInitialized(), await this.isValidRespond(e);
      const { topic: s, response: t } = e, { id: i } = t;
      isJsonRpcResult(t) ? await this.sendResult({ id: i, topic: s, result: t.result, throwOnFailedPublish: true }) : isJsonRpcError(t) && await this.sendError(i, s, t.error), this.cleanupAfterResponse(e);
    }, this.ping = async (e) => {
      await this.isInitialized(), await this.isValidPing(e);
      const { topic: s } = e;
      if (this.client.session.keys.includes(s)) {
        const t = await this.sendRequest({ topic: s, method: "wc_sessionPing", params: {} }), { done: i, resolve: n, reject: o } = st();
        this.events.once(ft("session_ping", t), ({ error: a }) => {
          a ? o(a) : n();
        }), await i();
      } else
        this.client.core.pairing.pairings.keys.includes(s) && await this.client.core.pairing.ping({ topic: s });
    }, this.emit = async (e) => {
      await this.isInitialized(), await this.isValidEmit(e);
      const { topic: s, event: t, chainId: i } = e;
      await this.sendRequest({ topic: s, method: "wc_sessionEvent", params: { event: t, chainId: i } });
    }, this.disconnect = async (e) => {
      await this.isInitialized(), await this.isValidDisconnect(e);
      const { topic: s } = e;
      this.client.session.keys.includes(s) ? (await this.sendRequest({ topic: s, method: "wc_sessionDelete", params: U("USER_DISCONNECTED"), throwOnFailedPublish: true }), await this.deleteSession(s)) : await this.client.core.pairing.disconnect({ topic: s });
    }, this.find = (e) => (this.isInitialized(), this.client.session.getAll().filter((s) => $t(s, e))), this.getPendingSessionRequests = () => (this.isInitialized(), this.client.pendingRequest.getAll()), this.cleanupDuplicatePairings = async (e) => {
      if (e.pairingTopic)
        try {
          const s = this.client.core.pairing.pairings.get(e.pairingTopic), t = this.client.core.pairing.pairings.getAll().filter((i) => {
            var n, o;
            return ((n = i.peerMetadata) == null ? void 0 : n.url) && ((o = i.peerMetadata) == null ? void 0 : o.url) === e.peer.metadata.url && i.topic && i.topic !== s.topic;
          });
          if (t.length === 0)
            return;
          this.client.logger.info(`Cleaning up ${t.length} duplicate pairing(s)`), await Promise.all(t.map((i) => this.client.core.pairing.disconnect({ topic: i.topic }))), this.client.logger.info("Duplicate pairings clean up finished");
        } catch (s) {
          this.client.logger.error(s);
        }
    }, this.deleteSession = async (e, s) => {
      const { self: t } = this.client.session.get(e);
      await this.client.core.relayer.unsubscribe(e), this.client.session.delete(e, U("USER_DISCONNECTED")), this.client.core.crypto.keychain.has(t.publicKey) && await this.client.core.crypto.deleteKeyPair(t.publicKey), this.client.core.crypto.keychain.has(e) && await this.client.core.crypto.deleteSymKey(e), s || this.client.core.expirer.del(e), this.client.core.storage.removeItem(W).catch((i) => this.client.logger.warn(i));
    }, this.deleteProposal = async (e, s) => {
      await Promise.all([this.client.proposal.delete(e, U("USER_DISCONNECTED")), s ? Promise.resolve() : this.client.core.expirer.del(e)]);
    }, this.deletePendingSessionRequest = async (e, s, t = false) => {
      await Promise.all([this.client.pendingRequest.delete(e, s), t ? Promise.resolve() : this.client.core.expirer.del(e)]), this.sessionRequestQueue.queue = this.sessionRequestQueue.queue.filter((i) => i.id !== e), t && (this.sessionRequestQueue.state = I.idle);
    }, this.setExpiry = async (e, s) => {
      this.client.session.keys.includes(e) && await this.client.session.update(e, { expiry: s }), this.client.core.expirer.set(e, s);
    }, this.setProposal = async (e, s) => {
      await this.client.proposal.set(e, s), this.client.core.expirer.set(e, s.expiry);
    }, this.setPendingSessionRequest = async (e) => {
      const s = V2.wc_sessionRequest.req.ttl, { id: t, topic: i, params: n, verifyContext: o } = e;
      await this.client.pendingRequest.set(t, { id: t, topic: i, params: n, verifyContext: o }), s && this.client.core.expirer.set(t, lt(s));
    }, this.sendRequest = async (e) => {
      const { topic: s, method: t, params: i, expiry: n, relayRpcId: o, clientRpcId: a, throwOnFailedPublish: c } = e, p3 = formatJsonRpcRequest(t, i, a);
      if (q() && pe.includes(t)) {
        const R = Mn(JSON.stringify(p3));
        this.client.core.verify.register({ attestationId: R });
      }
      const d2 = await this.client.core.crypto.encode(s, p3), h2 = V2[t].req;
      return n && (h2.ttl = n), o && (h2.id = o), this.client.core.history.set(s, p3), c ? (h2.internal = b2(g({}, h2.internal), { throwOnFailedPublish: true }), await this.client.core.relayer.publish(s, d2, h2)) : this.client.core.relayer.publish(s, d2, h2).catch((R) => this.client.logger.error(R)), p3.id;
    }, this.sendResult = async (e) => {
      const { id: s, topic: t, result: i, throwOnFailedPublish: n } = e, o = formatJsonRpcResult(s, i), a = await this.client.core.crypto.encode(t, o), c = await this.client.core.history.get(t, s), p3 = V2[c.request.method].res;
      n ? (p3.internal = b2(g({}, p3.internal), { throwOnFailedPublish: true }), await this.client.core.relayer.publish(t, a, p3)) : this.client.core.relayer.publish(t, a, p3).catch((d2) => this.client.logger.error(d2)), await this.client.core.history.resolve(o);
    }, this.sendError = async (e, s, t) => {
      const i = formatJsonRpcError(e, t), n = await this.client.core.crypto.encode(s, i), o = await this.client.core.history.get(s, e), a = V2[o.request.method].res;
      this.client.core.relayer.publish(s, n, a), await this.client.core.history.resolve(i);
    }, this.cleanup = async () => {
      const e = [], s = [];
      this.client.session.getAll().forEach((t) => {
        dt(t.expiry) && e.push(t.topic);
      }), this.client.proposal.getAll().forEach((t) => {
        dt(t.expiry) && s.push(t.id);
      }), await Promise.all([...e.map((t) => this.deleteSession(t)), ...s.map((t) => this.deleteProposal(t))]);
    }, this.onRelayEventRequest = async (e) => {
      this.requestQueue.queue.push(e), await this.processRequestsQueue();
    }, this.processRequestsQueue = async () => {
      if (this.requestQueue.state === I.active) {
        this.client.logger.info("Request queue already active, skipping...");
        return;
      }
      for (this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`); this.requestQueue.queue.length > 0; ) {
        this.requestQueue.state = I.active;
        const e = this.requestQueue.queue.shift();
        if (e)
          try {
            this.processRequest(e), await new Promise((s) => setTimeout(s, 300));
          } catch (s) {
            this.client.logger.warn(s);
          }
      }
      this.requestQueue.state = I.idle;
    }, this.processRequest = (e) => {
      const { topic: s, payload: t } = e, i = t.method;
      switch (i) {
        case "wc_sessionPropose":
          return this.onSessionProposeRequest(s, t);
        case "wc_sessionSettle":
          return this.onSessionSettleRequest(s, t);
        case "wc_sessionUpdate":
          return this.onSessionUpdateRequest(s, t);
        case "wc_sessionExtend":
          return this.onSessionExtendRequest(s, t);
        case "wc_sessionPing":
          return this.onSessionPingRequest(s, t);
        case "wc_sessionDelete":
          return this.onSessionDeleteRequest(s, t);
        case "wc_sessionRequest":
          return this.onSessionRequest(s, t);
        case "wc_sessionEvent":
          return this.onSessionEventRequest(s, t);
        default:
          return this.client.logger.info(`Unsupported request method ${i}`);
      }
    }, this.onRelayEventResponse = async (e) => {
      const { topic: s, payload: t } = e, i = (await this.client.core.history.get(s, t.id)).request.method;
      switch (i) {
        case "wc_sessionPropose":
          return this.onSessionProposeResponse(s, t);
        case "wc_sessionSettle":
          return this.onSessionSettleResponse(s, t);
        case "wc_sessionUpdate":
          return this.onSessionUpdateResponse(s, t);
        case "wc_sessionExtend":
          return this.onSessionExtendResponse(s, t);
        case "wc_sessionPing":
          return this.onSessionPingResponse(s, t);
        case "wc_sessionRequest":
          return this.onSessionRequestResponse(s, t);
        default:
          return this.client.logger.info(`Unsupported response method ${i}`);
      }
    }, this.onRelayEventUnknownPayload = (e) => {
      const { topic: s } = e, { message: t } = N("MISSING_OR_INVALID", `Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);
      throw new Error(t);
    }, this.onSessionProposeRequest = async (e, s) => {
      const { params: t, id: i } = s;
      try {
        this.isValidConnect(g({}, s.params));
        const n = lt(import_time.FIVE_MINUTES), o = g({ id: i, pairingTopic: e, expiry: n }, t);
        await this.setProposal(i, o);
        const a = Mn(JSON.stringify(s)), c = await this.getVerifyContext(a, o.proposer.metadata);
        this.client.events.emit("session_proposal", { id: i, params: o, verifyContext: c });
      } catch (n) {
        await this.sendError(i, e, n), this.client.logger.error(n);
      }
    }, this.onSessionProposeResponse = async (e, s) => {
      const { id: t } = s;
      if (isJsonRpcResult(s)) {
        const { result: i } = s;
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", result: i });
        const n = this.client.proposal.get(t);
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", proposal: n });
        const o = n.proposer.publicKey;
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", selfPublicKey: o });
        const a = i.responderPublicKey;
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", peerPublicKey: a });
        const c = await this.client.core.crypto.generateSharedKey(o, a);
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", sessionTopic: c });
        const p3 = await this.client.core.relayer.subscribe(c);
        this.client.logger.trace({ type: "method", method: "onSessionProposeResponse", subscriptionId: p3 }), await this.client.core.pairing.activate({ topic: e });
      } else
        isJsonRpcError(s) && (await this.client.proposal.delete(t, U("USER_DISCONNECTED")), this.events.emit(ft("session_connect"), { error: s.error }));
    }, this.onSessionSettleRequest = async (e, s) => {
      const { id: t, params: i } = s;
      try {
        this.isValidSessionSettleRequest(i);
        const { relay: n, controller: o, expiry: a, namespaces: c, requiredNamespaces: p3, optionalNamespaces: d2, sessionProperties: h2, pairingTopic: R } = s.params, w2 = g({ topic: e, relay: n, expiry: a, namespaces: c, acknowledged: true, pairingTopic: R, requiredNamespaces: p3, optionalNamespaces: d2, controller: o.publicKey, self: { publicKey: "", metadata: this.client.metadata }, peer: { publicKey: o.publicKey, metadata: o.metadata } }, h2 && { sessionProperties: h2 });
        await this.sendResult({ id: s.id, topic: e, result: true }), this.events.emit(ft("session_connect"), { session: w2 }), this.cleanupDuplicatePairings(w2);
      } catch (n) {
        await this.sendError(t, e, n), this.client.logger.error(n);
      }
    }, this.onSessionSettleResponse = async (e, s) => {
      const { id: t } = s;
      isJsonRpcResult(s) ? (await this.client.session.update(e, { acknowledged: true }), this.events.emit(ft("session_approve", t), {})) : isJsonRpcError(s) && (await this.client.session.delete(e, U("USER_DISCONNECTED")), this.events.emit(ft("session_approve", t), { error: s.error }));
    }, this.onSessionUpdateRequest = async (e, s) => {
      const { params: t, id: i } = s;
      try {
        const n = `${e}_session_update`, o = er.get(n);
        if (o && this.isRequestOutOfSync(o, i)) {
          this.client.logger.info(`Discarding out of sync request - ${i}`);
          return;
        }
        this.isValidUpdate(g({ topic: e }, t)), await this.client.session.update(e, { namespaces: t.namespaces }), await this.sendResult({ id: i, topic: e, result: true }), this.client.events.emit("session_update", { id: i, topic: e, params: t }), er.set(n, i);
      } catch (n) {
        await this.sendError(i, e, n), this.client.logger.error(n);
      }
    }, this.isRequestOutOfSync = (e, s) => parseInt(s.toString().slice(0, -3)) <= parseInt(e.toString().slice(0, -3)), this.onSessionUpdateResponse = (e, s) => {
      const { id: t } = s;
      isJsonRpcResult(s) ? this.events.emit(ft("session_update", t), {}) : isJsonRpcError(s) && this.events.emit(ft("session_update", t), { error: s.error });
    }, this.onSessionExtendRequest = async (e, s) => {
      const { id: t } = s;
      try {
        this.isValidExtend({ topic: e }), await this.setExpiry(e, lt(A)), await this.sendResult({ id: t, topic: e, result: true }), this.client.events.emit("session_extend", { id: t, topic: e });
      } catch (i) {
        await this.sendError(t, e, i), this.client.logger.error(i);
      }
    }, this.onSessionExtendResponse = (e, s) => {
      const { id: t } = s;
      isJsonRpcResult(s) ? this.events.emit(ft("session_extend", t), {}) : isJsonRpcError(s) && this.events.emit(ft("session_extend", t), { error: s.error });
    }, this.onSessionPingRequest = async (e, s) => {
      const { id: t } = s;
      try {
        this.isValidPing({ topic: e }), await this.sendResult({ id: t, topic: e, result: true }), this.client.events.emit("session_ping", { id: t, topic: e });
      } catch (i) {
        await this.sendError(t, e, i), this.client.logger.error(i);
      }
    }, this.onSessionPingResponse = (e, s) => {
      const { id: t } = s;
      setTimeout(() => {
        isJsonRpcResult(s) ? this.events.emit(ft("session_ping", t), {}) : isJsonRpcError(s) && this.events.emit(ft("session_ping", t), { error: s.error });
      }, 500);
    }, this.onSessionDeleteRequest = async (e, s) => {
      const { id: t } = s;
      try {
        this.isValidDisconnect({ topic: e, reason: s.params }), await Promise.all([new Promise((i) => {
          this.client.core.relayer.once(D2.publish, async () => {
            i(await this.deleteSession(e));
          });
        }), this.sendResult({ id: t, topic: e, result: true })]), this.client.events.emit("session_delete", { id: t, topic: e });
      } catch (i) {
        this.client.logger.error(i);
      }
    }, this.onSessionRequest = async (e, s) => {
      const { id: t, params: i } = s;
      try {
        this.isValidRequest(g({ topic: e }, i));
        const n = Mn(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest", i, t))), o = this.client.session.get(e), a = await this.getVerifyContext(n, o.peer.metadata), c = { id: t, topic: e, params: i, verifyContext: a };
        await this.setPendingSessionRequest(c), this.addSessionRequestToSessionRequestQueue(c), this.processSessionRequestQueue();
      } catch (n) {
        await this.sendError(t, e, n), this.client.logger.error(n);
      }
    }, this.onSessionRequestResponse = (e, s) => {
      const { id: t } = s;
      isJsonRpcResult(s) ? this.events.emit(ft("session_request", t), { result: s.result }) : isJsonRpcError(s) && this.events.emit(ft("session_request", t), { error: s.error });
    }, this.onSessionEventRequest = async (e, s) => {
      const { id: t, params: i } = s;
      try {
        const n = `${e}_session_event_${i.event.name}`, o = er.get(n);
        if (o && this.isRequestOutOfSync(o, t)) {
          this.client.logger.info(`Discarding out of sync request - ${t}`);
          return;
        }
        this.isValidEmit(g({ topic: e }, i)), this.client.events.emit("session_event", { id: t, topic: e, params: i }), er.set(n, t);
      } catch (n) {
        await this.sendError(t, e, n), this.client.logger.error(n);
      }
    }, this.addSessionRequestToSessionRequestQueue = (e) => {
      this.sessionRequestQueue.queue.push(e);
    }, this.cleanupAfterResponse = (e) => {
      this.deletePendingSessionRequest(e.response.id, { message: "fulfilled", code: 0 }), setTimeout(() => {
        this.sessionRequestQueue.state = I.idle, this.processSessionRequestQueue();
      }, (0, import_time.toMiliseconds)(this.requestQueueDelay));
    }, this.processSessionRequestQueue = () => {
      if (this.sessionRequestQueue.state === I.active) {
        this.client.logger.info("session request queue is already active.");
        return;
      }
      const e = this.sessionRequestQueue.queue[0];
      if (!e) {
        this.client.logger.info("session request queue is empty.");
        return;
      }
      try {
        this.sessionRequestQueue.state = I.active, this.client.events.emit("session_request", e);
      } catch (s) {
        this.client.logger.error(s);
      }
    }, this.onPairingCreated = (e) => {
      if (e.active)
        return;
      const s = this.client.proposal.getAll().find((t) => t.pairingTopic === e.topic);
      s && this.onSessionProposeRequest(e.topic, formatJsonRpcRequest("wc_sessionPropose", { requiredNamespaces: s.requiredNamespaces, optionalNamespaces: s.optionalNamespaces, relays: s.relays, proposer: s.proposer }, s.id));
    }, this.isValidConnect = async (e) => {
      if (!xt(e)) {
        const { message: a } = N("MISSING_OR_INVALID", `connect() params: ${JSON.stringify(e)}`);
        throw new Error(a);
      }
      const { pairingTopic: s, requiredNamespaces: t, optionalNamespaces: i, sessionProperties: n, relays: o } = e;
      if (w(s) || await this.isValidPairingTopic(s), !Kt(o, true)) {
        const { message: a } = N("MISSING_OR_INVALID", `connect() relays: ${o}`);
        throw new Error(a);
      }
      !w(t) && B(t) !== 0 && this.validateNamespaces(t, "requiredNamespaces"), !w(i) && B(i) !== 0 && this.validateNamespaces(i, "optionalNamespaces"), w(n) || this.validateSessionProps(n, "sessionProperties");
    }, this.validateNamespaces = (e, s) => {
      const t = Mt(e, "connect()", s);
      if (t)
        throw new Error(t.message);
    }, this.isValidApprove = async (e) => {
      if (!xt(e))
        throw new Error(N("MISSING_OR_INVALID", `approve() params: ${e}`).message);
      const { id: s, namespaces: t, relayProtocol: i, sessionProperties: n } = e;
      await this.isValidProposalId(s);
      const o = this.client.proposal.get(s), a = cn(t, "approve()");
      if (a)
        throw new Error(a.message);
      const c = un(o.requiredNamespaces, t, "approve()");
      if (c)
        throw new Error(c.message);
      if (!h(i, true)) {
        const { message: p3 } = N("MISSING_OR_INVALID", `approve() relayProtocol: ${i}`);
        throw new Error(p3);
      }
      w(n) || this.validateSessionProps(n, "sessionProperties");
    }, this.isValidReject = async (e) => {
      if (!xt(e)) {
        const { message: i } = N("MISSING_OR_INVALID", `reject() params: ${e}`);
        throw new Error(i);
      }
      const { id: s, reason: t } = e;
      if (await this.isValidProposalId(s), !Ft(t)) {
        const { message: i } = N("MISSING_OR_INVALID", `reject() reason: ${JSON.stringify(t)}`);
        throw new Error(i);
      }
    }, this.isValidSessionSettleRequest = (e) => {
      if (!xt(e)) {
        const { message: c } = N("MISSING_OR_INVALID", `onSessionSettleRequest() params: ${e}`);
        throw new Error(c);
      }
      const { relay: s, controller: t, namespaces: i, expiry: n } = e;
      if (!an(s)) {
        const { message: c } = N("MISSING_OR_INVALID", "onSessionSettleRequest() relay protocol should be a string");
        throw new Error(c);
      }
      const o = Vt(t, "onSessionSettleRequest()");
      if (o)
        throw new Error(o.message);
      const a = cn(i, "onSessionSettleRequest()");
      if (a)
        throw new Error(a.message);
      if (dt(n)) {
        const { message: c } = N("EXPIRED", "onSessionSettleRequest()");
        throw new Error(c);
      }
    }, this.isValidUpdate = async (e) => {
      if (!xt(e)) {
        const { message: a } = N("MISSING_OR_INVALID", `update() params: ${e}`);
        throw new Error(a);
      }
      const { topic: s, namespaces: t } = e;
      await this.isValidSessionTopic(s);
      const i = this.client.session.get(s), n = cn(t, "update()");
      if (n)
        throw new Error(n.message);
      const o = un(i.requiredNamespaces, t, "update()");
      if (o)
        throw new Error(o.message);
    }, this.isValidExtend = async (e) => {
      if (!xt(e)) {
        const { message: t } = N("MISSING_OR_INVALID", `extend() params: ${e}`);
        throw new Error(t);
      }
      const { topic: s } = e;
      await this.isValidSessionTopic(s);
    }, this.isValidRequest = async (e) => {
      if (!xt(e)) {
        const { message: a } = N("MISSING_OR_INVALID", `request() params: ${e}`);
        throw new Error(a);
      }
      const { topic: s, request: t, chainId: i, expiry: n } = e;
      await this.isValidSessionTopic(s);
      const { namespaces: o } = this.client.session.get(s);
      if (!Gt(o, i)) {
        const { message: a } = N("MISSING_OR_INVALID", `request() chainId: ${i}`);
        throw new Error(a);
      }
      if (!Ht(t)) {
        const { message: a } = N("MISSING_OR_INVALID", `request() ${JSON.stringify(t)}`);
        throw new Error(a);
      }
      if (!Wt(o, i, t.method)) {
        const { message: a } = N("MISSING_OR_INVALID", `request() method: ${t.method}`);
        throw new Error(a);
      }
      if (n && !Qt(n, U2)) {
        const { message: a } = N("MISSING_OR_INVALID", `request() expiry: ${n}. Expiry must be a number (in seconds) between ${U2.min} and ${U2.max}`);
        throw new Error(a);
      }
    }, this.isValidRespond = async (e) => {
      if (!xt(e)) {
        const { message: i } = N("MISSING_OR_INVALID", `respond() params: ${e}`);
        throw new Error(i);
      }
      const { topic: s, response: t } = e;
      if (await this.isValidSessionTopic(s), !qt(t)) {
        const { message: i } = N("MISSING_OR_INVALID", `respond() response: ${JSON.stringify(t)}`);
        throw new Error(i);
      }
    }, this.isValidPing = async (e) => {
      if (!xt(e)) {
        const { message: t } = N("MISSING_OR_INVALID", `ping() params: ${e}`);
        throw new Error(t);
      }
      const { topic: s } = e;
      await this.isValidSessionOrPairingTopic(s);
    }, this.isValidEmit = async (e) => {
      if (!xt(e)) {
        const { message: o } = N("MISSING_OR_INVALID", `emit() params: ${e}`);
        throw new Error(o);
      }
      const { topic: s, event: t, chainId: i } = e;
      await this.isValidSessionTopic(s);
      const { namespaces: n } = this.client.session.get(s);
      if (!Gt(n, i)) {
        const { message: o } = N("MISSING_OR_INVALID", `emit() chainId: ${i}`);
        throw new Error(o);
      }
      if (!Bt(t)) {
        const { message: o } = N("MISSING_OR_INVALID", `emit() event: ${JSON.stringify(t)}`);
        throw new Error(o);
      }
      if (!zt(n, i, t.name)) {
        const { message: o } = N("MISSING_OR_INVALID", `emit() event: ${JSON.stringify(t)}`);
        throw new Error(o);
      }
    }, this.isValidDisconnect = async (e) => {
      if (!xt(e)) {
        const { message: t } = N("MISSING_OR_INVALID", `disconnect() params: ${e}`);
        throw new Error(t);
      }
      const { topic: s } = e;
      await this.isValidSessionOrPairingTopic(s);
    }, this.getVerifyContext = async (e, s) => {
      const t = { verified: { verifyUrl: s.verifyUrl || $, validation: "UNKNOWN", origin: s.url || "" } };
      try {
        const i = await this.client.core.verify.resolve({ attestationId: e, verifyUrl: s.verifyUrl });
        i && (t.verified.origin = i.origin, t.verified.isScam = i.isScam, t.verified.validation = i.origin === new URL(s.url).origin ? "VALID" : "INVALID");
      } catch (i) {
        this.client.logger.info(i);
      }
      return this.client.logger.info(`Verify context: ${JSON.stringify(t)}`), t;
    }, this.validateSessionProps = (e, s) => {
      Object.values(e).forEach((t) => {
        if (!h(t, false)) {
          const { message: i } = N("MISSING_OR_INVALID", `${s} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);
          throw new Error(i);
        }
      });
    };
  }
  async isInitialized() {
    if (!this.initialized) {
      const { message: r } = N("NOT_INITIALIZED", this.name);
      throw new Error(r);
    }
    await this.client.core.relayer.confirmOnlineStateOrThrow();
  }
  registerRelayerEvents() {
    this.client.core.relayer.on(D2.message, async (r) => {
      const { topic: e, message: s } = r;
      if (this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))
        return;
      const t = await this.client.core.crypto.decode(e, s);
      try {
        isJsonRpcRequest(t) ? (this.client.core.history.set(e, t), this.onRelayEventRequest({ topic: e, payload: t })) : isJsonRpcResponse(t) ? (await this.client.core.history.resolve(t), await this.onRelayEventResponse({ topic: e, payload: t }), this.client.core.history.delete(e, t.id)) : this.onRelayEventUnknownPayload({ topic: e, payload: t });
      } catch (i) {
        this.client.logger.error(i);
      }
    });
  }
  registerExpirerEvents() {
    this.client.core.expirer.on(v.expired, async (r) => {
      const { topic: e, id: s } = ut(r.target);
      if (s && this.client.pendingRequest.keys.includes(s))
        return await this.deletePendingSessionRequest(s, N("EXPIRED"), true);
      e ? this.client.session.keys.includes(e) && (await this.deleteSession(e, true), this.client.events.emit("session_expire", { topic: e })) : s && (await this.deleteProposal(s, true), this.client.events.emit("proposal_expire", { id: s }));
    });
  }
  registerPairingEvents() {
    this.client.core.pairing.events.on(V.create, (r) => this.onPairingCreated(r));
  }
  isValidPairingTopic(r) {
    if (!h(r, false)) {
      const { message: e } = N("MISSING_OR_INVALID", `pairing topic should be a string: ${r}`);
      throw new Error(e);
    }
    if (!this.client.core.pairing.pairings.keys.includes(r)) {
      const { message: e } = N("NO_MATCHING_KEY", `pairing topic doesn't exist: ${r}`);
      throw new Error(e);
    }
    if (dt(this.client.core.pairing.pairings.get(r).expiry)) {
      const { message: e } = N("EXPIRED", `pairing topic: ${r}`);
      throw new Error(e);
    }
  }
  async isValidSessionTopic(r) {
    if (!h(r, false)) {
      const { message: e } = N("MISSING_OR_INVALID", `session topic should be a string: ${r}`);
      throw new Error(e);
    }
    if (!this.client.session.keys.includes(r)) {
      const { message: e } = N("NO_MATCHING_KEY", `session topic doesn't exist: ${r}`);
      throw new Error(e);
    }
    if (dt(this.client.session.get(r).expiry)) {
      await this.deleteSession(r);
      const { message: e } = N("EXPIRED", `session topic: ${r}`);
      throw new Error(e);
    }
  }
  async isValidSessionOrPairingTopic(r) {
    if (this.client.session.keys.includes(r))
      await this.isValidSessionTopic(r);
    else if (this.client.core.pairing.pairings.keys.includes(r))
      this.isValidPairingTopic(r);
    else if (h(r, false)) {
      const { message: e } = N("NO_MATCHING_KEY", `session or pairing topic doesn't exist: ${r}`);
      throw new Error(e);
    } else {
      const { message: e } = N("MISSING_OR_INVALID", `session or pairing topic should be a string: ${r}`);
      throw new Error(e);
    }
  }
  async isValidProposalId(r) {
    if (!Lt(r)) {
      const { message: e } = N("MISSING_OR_INVALID", `proposal id should be a number: ${r}`);
      throw new Error(e);
    }
    if (!this.client.proposal.keys.includes(r)) {
      const { message: e } = N("NO_MATCHING_KEY", `proposal id doesn't exist: ${r}`);
      throw new Error(e);
    }
    if (dt(this.client.proposal.get(r).expiry)) {
      await this.deleteProposal(r);
      const { message: e } = N("EXPIRED", `proposal id: ${r}`);
      throw new Error(e);
    }
  }
};
var hs = class extends $t2 {
  constructor(r, e) {
    super(r, e, ne2, G), this.core = r, this.logger = e;
  }
};
var ds = class extends $t2 {
  constructor(r, e) {
    super(r, e, ae, G), this.core = r, this.logger = e;
  }
};
var us = class extends $t2 {
  constructor(r, e) {
    super(r, e, le, G, (s) => s.id), this.core = r, this.logger = e;
  }
};
var Q = class extends b {
  constructor(r) {
    super(r), this.protocol = X, this.version = F, this.name = M.name, this.events = new import_events.EventEmitter(), this.on = (s, t) => this.events.on(s, t), this.once = (s, t) => this.events.once(s, t), this.off = (s, t) => this.events.off(s, t), this.removeListener = (s, t) => this.events.removeListener(s, t), this.removeAllListeners = (s) => this.events.removeAllListeners(s), this.connect = async (s) => {
      try {
        return await this.engine.connect(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.pair = async (s) => {
      try {
        return await this.engine.pair(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.approve = async (s) => {
      try {
        return await this.engine.approve(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.reject = async (s) => {
      try {
        return await this.engine.reject(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.update = async (s) => {
      try {
        return await this.engine.update(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.extend = async (s) => {
      try {
        return await this.engine.extend(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.request = async (s) => {
      try {
        return await this.engine.request(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.respond = async (s) => {
      try {
        return await this.engine.respond(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.ping = async (s) => {
      try {
        return await this.engine.ping(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.emit = async (s) => {
      try {
        return await this.engine.emit(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.disconnect = async (s) => {
      try {
        return await this.engine.disconnect(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.find = (s) => {
      try {
        return this.engine.find(s);
      } catch (t) {
        throw this.logger.error(t.message), t;
      }
    }, this.getPendingSessionRequests = () => {
      try {
        return this.engine.getPendingSessionRequests();
      } catch (s) {
        throw this.logger.error(s.message), s;
      }
    }, this.name = (r == null ? void 0 : r.name) || M.name, this.metadata = (r == null ? void 0 : r.metadata) || zn();
    const e = typeof (r == null ? void 0 : r.logger) < "u" && typeof (r == null ? void 0 : r.logger) != "string" ? r.logger : (0, import_logger.pino)((0, import_logger.getDefaultLoggerOptions)({ level: (r == null ? void 0 : r.logger) || M.logger }));
    this.core = (r == null ? void 0 : r.core) || new zr(r), this.logger = (0, import_logger.generateChildLogger)(e, this.name), this.session = new ds(this.core, this.logger), this.proposal = new hs(this.core, this.logger), this.pendingRequest = new us(this.core, this.logger), this.engine = new ps(this);
  }
  static async init(r) {
    const e = new Q(r);
    return await e.initialize(), e;
  }
  get context() {
    return (0, import_logger.getLoggerContext)(this.logger);
  }
  get pairing() {
    return this.core.pairing.pairings;
  }
  async initialize() {
    this.logger.trace("Initialized");
    try {
      await this.core.start(), await this.session.init(), await this.proposal.init(), await this.pendingRequest.init(), await this.engine.init(), this.core.verify.init({ verifyUrl: this.metadata.verifyUrl }), this.logger.info("SignClient Initialization Success");
    } catch (r) {
      throw this.logger.info("SignClient Initialization Failure"), this.logger.error(r.message), r;
    }
  }
};

// node_modules/@walletconnect/universal-provider/dist/index.es.js
var import_logger2 = __toESM(require_cjs2());

// node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/index.js
init_shim();

// node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/http.js
init_shim();
var import_events2 = __toESM(require_events());
var import_cross_fetch = __toESM(require_browser_ponyfill());
var DEFAULT_HTTP_HEADERS = {
  Accept: "application/json",
  "Content-Type": "application/json"
};
var DEFAULT_HTTP_METHOD = "POST";
var DEFAULT_FETCH_OPTS = {
  headers: DEFAULT_HTTP_HEADERS,
  method: DEFAULT_HTTP_METHOD
};
var EVENT_EMITTER_MAX_LISTENERS_DEFAULT = 10;
var HttpConnection = class {
  constructor(url, disableProviderPing = false) {
    this.url = url;
    this.disableProviderPing = disableProviderPing;
    this.events = new import_events2.EventEmitter();
    this.isAvailable = false;
    this.registering = false;
    if (!isHttpUrl(url)) {
      throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);
    }
    this.url = url;
    this.disableProviderPing = disableProviderPing;
  }
  get connected() {
    return this.isAvailable;
  }
  get connecting() {
    return this.registering;
  }
  on(event, listener) {
    this.events.on(event, listener);
  }
  once(event, listener) {
    this.events.once(event, listener);
  }
  off(event, listener) {
    this.events.off(event, listener);
  }
  removeListener(event, listener) {
    this.events.removeListener(event, listener);
  }
  async open(url = this.url) {
    await this.register(url);
  }
  async close() {
    if (!this.isAvailable) {
      throw new Error("Connection already closed");
    }
    this.onClose();
  }
  async send(payload, context) {
    if (!this.isAvailable) {
      await this.register();
    }
    try {
      const body = safeJsonStringify(payload);
      const res = await (0, import_cross_fetch.default)(this.url, Object.assign(Object.assign({}, DEFAULT_FETCH_OPTS), { body }));
      const data = await res.json();
      this.onPayload({ data });
    } catch (e) {
      this.onError(payload.id, e);
    }
  }
  async register(url = this.url) {
    if (!isHttpUrl(url)) {
      throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);
    }
    if (this.registering) {
      const currentMaxListeners = this.events.getMaxListeners();
      if (this.events.listenerCount("register_error") >= currentMaxListeners || this.events.listenerCount("open") >= currentMaxListeners) {
        this.events.setMaxListeners(currentMaxListeners + 1);
      }
      return new Promise((resolve, reject) => {
        this.events.once("register_error", (error) => {
          this.resetMaxListeners();
          reject(error);
        });
        this.events.once("open", () => {
          this.resetMaxListeners();
          if (typeof this.isAvailable === "undefined") {
            return reject(new Error("HTTP connection is missing or invalid"));
          }
          resolve();
        });
      });
    }
    this.url = url;
    this.registering = true;
    try {
      if (!this.disableProviderPing) {
        const body = safeJsonStringify({ id: 1, jsonrpc: "2.0", method: "test", params: [] });
        await (0, import_cross_fetch.default)(url, Object.assign(Object.assign({}, DEFAULT_FETCH_OPTS), { body }));
      }
      this.onOpen();
    } catch (e) {
      const error = this.parseError(e);
      this.events.emit("register_error", error);
      this.onClose();
      throw error;
    }
  }
  onOpen() {
    this.isAvailable = true;
    this.registering = false;
    this.events.emit("open");
  }
  onClose() {
    this.isAvailable = false;
    this.registering = false;
    this.events.emit("close");
  }
  onPayload(e) {
    if (typeof e.data === "undefined")
      return;
    const payload = typeof e.data === "string" ? safeJsonParse(e.data) : e.data;
    this.events.emit("payload", payload);
  }
  onError(id, e) {
    const error = this.parseError(e);
    const message = error.message || error.toString();
    const payload = formatJsonRpcError(id, message);
    this.events.emit("payload", payload);
  }
  parseError(e, url = this.url) {
    return parseConnectionError(e, url, "HTTP");
  }
  resetMaxListeners() {
    if (this.events.getMaxListeners() > EVENT_EMITTER_MAX_LISTENERS_DEFAULT) {
      this.events.setMaxListeners(EVENT_EMITTER_MAX_LISTENERS_DEFAULT);
    }
  }
};
var http_default = HttpConnection;

// node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/index.js
var esm_default = http_default;

// node_modules/@walletconnect/universal-provider/dist/index.es.js
var import_events3 = __toESM(require_events());
var Ia = "error";
var Ug = "wss://relay.walletconnect.com";
var Wg = "wc";
var Fg = "universal_provider";
var xa = `${Wg}@2:${Fg}:`;
var Mg = "https://rpc.walletconnect.com/v1/";
var Vn = { DEFAULT_CHAIN_CHANGED: "default_chain_changed" };
var ge = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof _global < "u" ? _global : typeof self < "u" ? self : {};
var Ui = { exports: {} };
(function(C, u2) {
  (function() {
    var i, d2 = "4.17.21", w2 = 200, T = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", $3 = "Expected a function", En = "Invalid `variable` option passed into `_.template`", zt2 = "__lodash_hash_undefined__", pr = 500, It = "__lodash_placeholder__", Ln = 1, Fn = 2, xt2 = 4, Et = 1, ve2 = 2, vn = 1, ct = 2, qi = 4, Dn = 8, yt = 16, Hn = 32, St = 64, Mn2 = 128, Kt2 = 256, dr = 512, La = 30, Da = "...", Ha = 800, Na = 16, Bi = 1, $a = 2, Ua = 3, ht = 1 / 0, kn = 9007199254740991, Wa = 17976931348623157e292, _e2 = 0 / 0, Nn = 4294967295, Fa = Nn - 1, Ma = Nn >>> 1, qa = [["ary", Mn2], ["bind", vn], ["bindKey", ct], ["curry", Dn], ["curryRight", yt], ["flip", dr], ["partial", Hn], ["partialRight", St], ["rearg", Kt2]], Ot = "[object Arguments]", me = "[object Array]", Ba = "[object AsyncFunction]", Yt = "[object Boolean]", Zt = "[object Date]", Ga = "[object DOMException]", we = "[object Error]", Pe = "[object Function]", Gi = "[object GeneratorFunction]", yn = "[object Map]", Jt = "[object Number]", za = "[object Null]", qn = "[object Object]", zi = "[object Promise]", Ka = "[object Proxy]", Xt = "[object RegExp]", Sn = "[object Set]", Qt2 = "[object String]", Ae = "[object Symbol]", Ya = "[object Undefined]", Vt2 = "[object WeakMap]", Za = "[object WeakSet]", kt = "[object ArrayBuffer]", Rt = "[object DataView]", gr = "[object Float32Array]", vr = "[object Float64Array]", _r = "[object Int8Array]", mr = "[object Int16Array]", wr = "[object Int32Array]", Pr = "[object Uint8Array]", Ar = "[object Uint8ClampedArray]", Cr = "[object Uint16Array]", Ir = "[object Uint32Array]", Ja = /\b__p \+= '';/g, Xa = /\b(__p \+=) '' \+/g, Qa = /(__e\(.*?\)|\b__t\)) \+\n'';/g, Ki = /&(?:amp|lt|gt|quot|#39);/g, Yi = /[&<>"']/g, Va = RegExp(Ki.source), ka = RegExp(Yi.source), ja = /<%-([\s\S]+?)%>/g, no = /<%([\s\S]+?)%>/g, Zi = /<%=([\s\S]+?)%>/g, to = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, eo = /^\w*$/, ro = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, xr = /[\\^$.*+?()[\]{}|]/g, io = RegExp(xr.source), Er = /^\s+/, so = /\s/, uo = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, ao = /\{\n\/\* \[wrapped with (.+)\] \*/, oo = /,? & /, fo = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, co = /[()=,{}\[\]\/\s]/, ho = /\\(\\)?/g, lo = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, Ji = /\w*$/, po = /^[-+]0x[0-9a-f]+$/i, go = /^0b[01]+$/i, vo = /^\[object .+?Constructor\]$/, _o = /^0o[0-7]+$/i, mo = /^(?:0|[1-9]\d*)$/, wo = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, Ce = /($^)/, Po = /['\n\r\u2028\u2029\\]/g, Ie2 = "\\ud800-\\udfff", Ao = "\\u0300-\\u036f", Co = "\\ufe20-\\ufe2f", Io = "\\u20d0-\\u20ff", Xi = Ao + Co + Io, Qi = "\\u2700-\\u27bf", Vi = "a-z\\xdf-\\xf6\\xf8-\\xff", xo = "\\xac\\xb1\\xd7\\xf7", Eo = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", yo = "\\u2000-\\u206f", So = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", ki = "A-Z\\xc0-\\xd6\\xd8-\\xde", ji = "\\ufe0e\\ufe0f", ns2 = xo + Eo + yo + So, yr = "['\u2019]", Oo = "[" + Ie2 + "]", ts = "[" + ns2 + "]", xe = "[" + Xi + "]", es = "\\d+", Ro = "[" + Qi + "]", rs = "[" + Vi + "]", is = "[^" + Ie2 + ns2 + es + Qi + Vi + ki + "]", Sr = "\\ud83c[\\udffb-\\udfff]", bo = "(?:" + xe + "|" + Sr + ")", ss = "[^" + Ie2 + "]", Or = "(?:\\ud83c[\\udde6-\\uddff]){2}", Rr = "[\\ud800-\\udbff][\\udc00-\\udfff]", bt = "[" + ki + "]", us2 = "\\u200d", as2 = "(?:" + rs + "|" + is + ")", To = "(?:" + bt + "|" + is + ")", os2 = "(?:" + yr + "(?:d|ll|m|re|s|t|ve))?", fs = "(?:" + yr + "(?:D|LL|M|RE|S|T|VE))?", cs2 = bo + "?", hs2 = "[" + ji + "]?", Lo = "(?:" + us2 + "(?:" + [ss, Or, Rr].join("|") + ")" + hs2 + cs2 + ")*", Do = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", Ho = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", ls2 = hs2 + cs2 + Lo, No = "(?:" + [Ro, Or, Rr].join("|") + ")" + ls2, $o = "(?:" + [ss + xe + "?", xe, Or, Rr, Oo].join("|") + ")", Uo = RegExp(yr, "g"), Wo = RegExp(xe, "g"), br = RegExp(Sr + "(?=" + Sr + ")|" + $o + ls2, "g"), Fo = RegExp([bt + "?" + rs + "+" + os2 + "(?=" + [ts, bt, "$"].join("|") + ")", To + "+" + fs + "(?=" + [ts, bt + as2, "$"].join("|") + ")", bt + "?" + as2 + "+" + os2, bt + "+" + fs, Ho, Do, es, No].join("|"), "g"), Mo = RegExp("[" + us2 + Ie2 + Xi + ji + "]"), qo = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, Bo = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"], Go = -1, B2 = {};
    B2[gr] = B2[vr] = B2[_r] = B2[mr] = B2[wr] = B2[Pr] = B2[Ar] = B2[Cr] = B2[Ir] = true, B2[Ot] = B2[me] = B2[kt] = B2[Yt] = B2[Rt] = B2[Zt] = B2[we] = B2[Pe] = B2[yn] = B2[Jt] = B2[qn] = B2[Xt] = B2[Sn] = B2[Qt2] = B2[Vt2] = false;
    var q3 = {};
    q3[Ot] = q3[me] = q3[kt] = q3[Rt] = q3[Yt] = q3[Zt] = q3[gr] = q3[vr] = q3[_r] = q3[mr] = q3[wr] = q3[yn] = q3[Jt] = q3[qn] = q3[Xt] = q3[Sn] = q3[Qt2] = q3[Ae] = q3[Pr] = q3[Ar] = q3[Cr] = q3[Ir] = true, q3[we] = q3[Pe] = q3[Vt2] = false;
    var zo = { \u00C0: "A", \u00C1: "A", \u00C2: "A", \u00C3: "A", \u00C4: "A", \u00C5: "A", \u00E0: "a", \u00E1: "a", \u00E2: "a", \u00E3: "a", \u00E4: "a", \u00E5: "a", \u00C7: "C", \u00E7: "c", \u00D0: "D", \u00F0: "d", \u00C8: "E", \u00C9: "E", \u00CA: "E", \u00CB: "E", \u00E8: "e", \u00E9: "e", \u00EA: "e", \u00EB: "e", \u00CC: "I", \u00CD: "I", \u00CE: "I", \u00CF: "I", \u00EC: "i", \u00ED: "i", \u00EE: "i", \u00EF: "i", \u00D1: "N", \u00F1: "n", \u00D2: "O", \u00D3: "O", \u00D4: "O", \u00D5: "O", \u00D6: "O", \u00D8: "O", \u00F2: "o", \u00F3: "o", \u00F4: "o", \u00F5: "o", \u00F6: "o", \u00F8: "o", \u00D9: "U", \u00DA: "U", \u00DB: "U", \u00DC: "U", \u00F9: "u", \u00FA: "u", \u00FB: "u", \u00FC: "u", \u00DD: "Y", \u00FD: "y", \u00FF: "y", \u00C6: "Ae", \u00E6: "ae", \u00DE: "Th", \u00FE: "th", \u00DF: "ss", \u0100: "A", \u0102: "A", \u0104: "A", \u0101: "a", \u0103: "a", \u0105: "a", \u0106: "C", \u0108: "C", \u010A: "C", \u010C: "C", \u0107: "c", \u0109: "c", \u010B: "c", \u010D: "c", \u010E: "D", \u0110: "D", \u010F: "d", \u0111: "d", \u0112: "E", \u0114: "E", \u0116: "E", \u0118: "E", \u011A: "E", \u0113: "e", \u0115: "e", \u0117: "e", \u0119: "e", \u011B: "e", \u011C: "G", \u011E: "G", \u0120: "G", \u0122: "G", \u011D: "g", \u011F: "g", \u0121: "g", \u0123: "g", \u0124: "H", \u0126: "H", \u0125: "h", \u0127: "h", \u0128: "I", \u012A: "I", \u012C: "I", \u012E: "I", \u0130: "I", \u0129: "i", \u012B: "i", \u012D: "i", \u012F: "i", \u0131: "i", \u0134: "J", \u0135: "j", \u0136: "K", \u0137: "k", \u0138: "k", \u0139: "L", \u013B: "L", \u013D: "L", \u013F: "L", \u0141: "L", \u013A: "l", \u013C: "l", \u013E: "l", \u0140: "l", \u0142: "l", \u0143: "N", \u0145: "N", \u0147: "N", \u014A: "N", \u0144: "n", \u0146: "n", \u0148: "n", \u014B: "n", \u014C: "O", \u014E: "O", \u0150: "O", \u014D: "o", \u014F: "o", \u0151: "o", \u0154: "R", \u0156: "R", \u0158: "R", \u0155: "r", \u0157: "r", \u0159: "r", \u015A: "S", \u015C: "S", \u015E: "S", \u0160: "S", \u015B: "s", \u015D: "s", \u015F: "s", \u0161: "s", \u0162: "T", \u0164: "T", \u0166: "T", \u0163: "t", \u0165: "t", \u0167: "t", \u0168: "U", \u016A: "U", \u016C: "U", \u016E: "U", \u0170: "U", \u0172: "U", \u0169: "u", \u016B: "u", \u016D: "u", \u016F: "u", \u0171: "u", \u0173: "u", \u0174: "W", \u0175: "w", \u0176: "Y", \u0177: "y", \u0178: "Y", \u0179: "Z", \u017B: "Z", \u017D: "Z", \u017A: "z", \u017C: "z", \u017E: "z", \u0132: "IJ", \u0133: "ij", \u0152: "Oe", \u0153: "oe", \u0149: "'n", \u017F: "s" }, Ko = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, Yo = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'" }, Zo = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" }, Jo = parseFloat, Xo = parseInt, ps2 = typeof ge == "object" && ge && ge.Object === Object && ge, Qo = typeof self == "object" && self && self.Object === Object && self, k = ps2 || Qo || Function("return this")(), Tr = u2 && !u2.nodeType && u2, lt2 = Tr && true && C && !C.nodeType && C, ds2 = lt2 && lt2.exports === Tr, Lr = ds2 && ps2.process, _n = function() {
      try {
        var h2 = lt2 && lt2.require && lt2.require("util").types;
        return h2 || Lr && Lr.binding && Lr.binding("util");
      } catch {
      }
    }(), gs = _n && _n.isArrayBuffer, vs = _n && _n.isDate, _s = _n && _n.isMap, ms = _n && _n.isRegExp, ws = _n && _n.isSet, Ps = _n && _n.isTypedArray;
    function cn2(h2, g3, p3) {
      switch (p3.length) {
        case 0:
          return h2.call(g3);
        case 1:
          return h2.call(g3, p3[0]);
        case 2:
          return h2.call(g3, p3[0], p3[1]);
        case 3:
          return h2.call(g3, p3[0], p3[1], p3[2]);
      }
      return h2.apply(g3, p3);
    }
    function Vo(h2, g3, p3, A2) {
      for (var S4 = -1, U4 = h2 == null ? 0 : h2.length; ++S4 < U4; ) {
        var X2 = h2[S4];
        g3(A2, X2, p3(X2), h2);
      }
      return A2;
    }
    function mn(h2, g3) {
      for (var p3 = -1, A2 = h2 == null ? 0 : h2.length; ++p3 < A2 && g3(h2[p3], p3, h2) !== false; )
        ;
      return h2;
    }
    function ko(h2, g3) {
      for (var p3 = h2 == null ? 0 : h2.length; p3-- && g3(h2[p3], p3, h2) !== false; )
        ;
      return h2;
    }
    function As(h2, g3) {
      for (var p3 = -1, A2 = h2 == null ? 0 : h2.length; ++p3 < A2; )
        if (!g3(h2[p3], p3, h2))
          return false;
      return true;
    }
    function jn(h2, g3) {
      for (var p3 = -1, A2 = h2 == null ? 0 : h2.length, S4 = 0, U4 = []; ++p3 < A2; ) {
        var X2 = h2[p3];
        g3(X2, p3, h2) && (U4[S4++] = X2);
      }
      return U4;
    }
    function Ee2(h2, g3) {
      var p3 = h2 == null ? 0 : h2.length;
      return !!p3 && Tt(h2, g3, 0) > -1;
    }
    function Dr(h2, g3, p3) {
      for (var A2 = -1, S4 = h2 == null ? 0 : h2.length; ++A2 < S4; )
        if (p3(g3, h2[A2]))
          return true;
      return false;
    }
    function G3(h2, g3) {
      for (var p3 = -1, A2 = h2 == null ? 0 : h2.length, S4 = Array(A2); ++p3 < A2; )
        S4[p3] = g3(h2[p3], p3, h2);
      return S4;
    }
    function nt(h2, g3) {
      for (var p3 = -1, A2 = g3.length, S4 = h2.length; ++p3 < A2; )
        h2[S4 + p3] = g3[p3];
      return h2;
    }
    function Hr(h2, g3, p3, A2) {
      var S4 = -1, U4 = h2 == null ? 0 : h2.length;
      for (A2 && U4 && (p3 = h2[++S4]); ++S4 < U4; )
        p3 = g3(p3, h2[S4], S4, h2);
      return p3;
    }
    function jo(h2, g3, p3, A2) {
      var S4 = h2 == null ? 0 : h2.length;
      for (A2 && S4 && (p3 = h2[--S4]); S4--; )
        p3 = g3(p3, h2[S4], S4, h2);
      return p3;
    }
    function Nr(h2, g3) {
      for (var p3 = -1, A2 = h2 == null ? 0 : h2.length; ++p3 < A2; )
        if (g3(h2[p3], p3, h2))
          return true;
      return false;
    }
    var nf = $r("length");
    function tf(h2) {
      return h2.split("");
    }
    function ef(h2) {
      return h2.match(fo) || [];
    }
    function Cs(h2, g3, p3) {
      var A2;
      return p3(h2, function(S4, U4, X2) {
        if (g3(S4, U4, X2))
          return A2 = U4, false;
      }), A2;
    }
    function ye(h2, g3, p3, A2) {
      for (var S4 = h2.length, U4 = p3 + (A2 ? 1 : -1); A2 ? U4-- : ++U4 < S4; )
        if (g3(h2[U4], U4, h2))
          return U4;
      return -1;
    }
    function Tt(h2, g3, p3) {
      return g3 === g3 ? gf(h2, g3, p3) : ye(h2, Is, p3);
    }
    function rf(h2, g3, p3, A2) {
      for (var S4 = p3 - 1, U4 = h2.length; ++S4 < U4; )
        if (A2(h2[S4], g3))
          return S4;
      return -1;
    }
    function Is(h2) {
      return h2 !== h2;
    }
    function xs(h2, g3) {
      var p3 = h2 == null ? 0 : h2.length;
      return p3 ? Wr(h2, g3) / p3 : _e2;
    }
    function $r(h2) {
      return function(g3) {
        return g3 == null ? i : g3[h2];
      };
    }
    function Ur(h2) {
      return function(g3) {
        return h2 == null ? i : h2[g3];
      };
    }
    function Es(h2, g3, p3, A2, S4) {
      return S4(h2, function(U4, X2, M3) {
        p3 = A2 ? (A2 = false, U4) : g3(p3, U4, X2, M3);
      }), p3;
    }
    function sf(h2, g3) {
      var p3 = h2.length;
      for (h2.sort(g3); p3--; )
        h2[p3] = h2[p3].value;
      return h2;
    }
    function Wr(h2, g3) {
      for (var p3, A2 = -1, S4 = h2.length; ++A2 < S4; ) {
        var U4 = g3(h2[A2]);
        U4 !== i && (p3 = p3 === i ? U4 : p3 + U4);
      }
      return p3;
    }
    function Fr(h2, g3) {
      for (var p3 = -1, A2 = Array(h2); ++p3 < h2; )
        A2[p3] = g3(p3);
      return A2;
    }
    function uf(h2, g3) {
      return G3(g3, function(p3) {
        return [p3, h2[p3]];
      });
    }
    function ys(h2) {
      return h2 && h2.slice(0, bs(h2) + 1).replace(Er, "");
    }
    function hn(h2) {
      return function(g3) {
        return h2(g3);
      };
    }
    function Mr(h2, g3) {
      return G3(g3, function(p3) {
        return h2[p3];
      });
    }
    function jt(h2, g3) {
      return h2.has(g3);
    }
    function Ss(h2, g3) {
      for (var p3 = -1, A2 = h2.length; ++p3 < A2 && Tt(g3, h2[p3], 0) > -1; )
        ;
      return p3;
    }
    function Os(h2, g3) {
      for (var p3 = h2.length; p3-- && Tt(g3, h2[p3], 0) > -1; )
        ;
      return p3;
    }
    function af(h2, g3) {
      for (var p3 = h2.length, A2 = 0; p3--; )
        h2[p3] === g3 && ++A2;
      return A2;
    }
    var of = Ur(zo), ff = Ur(Ko);
    function cf(h2) {
      return "\\" + Zo[h2];
    }
    function hf(h2, g3) {
      return h2 == null ? i : h2[g3];
    }
    function Lt2(h2) {
      return Mo.test(h2);
    }
    function lf(h2) {
      return qo.test(h2);
    }
    function pf(h2) {
      for (var g3, p3 = []; !(g3 = h2.next()).done; )
        p3.push(g3.value);
      return p3;
    }
    function qr(h2) {
      var g3 = -1, p3 = Array(h2.size);
      return h2.forEach(function(A2, S4) {
        p3[++g3] = [S4, A2];
      }), p3;
    }
    function Rs(h2, g3) {
      return function(p3) {
        return h2(g3(p3));
      };
    }
    function tt(h2, g3) {
      for (var p3 = -1, A2 = h2.length, S4 = 0, U4 = []; ++p3 < A2; ) {
        var X2 = h2[p3];
        (X2 === g3 || X2 === It) && (h2[p3] = It, U4[S4++] = p3);
      }
      return U4;
    }
    function Se(h2) {
      var g3 = -1, p3 = Array(h2.size);
      return h2.forEach(function(A2) {
        p3[++g3] = A2;
      }), p3;
    }
    function df(h2) {
      var g3 = -1, p3 = Array(h2.size);
      return h2.forEach(function(A2) {
        p3[++g3] = [A2, A2];
      }), p3;
    }
    function gf(h2, g3, p3) {
      for (var A2 = p3 - 1, S4 = h2.length; ++A2 < S4; )
        if (h2[A2] === g3)
          return A2;
      return -1;
    }
    function vf(h2, g3, p3) {
      for (var A2 = p3 + 1; A2--; )
        if (h2[A2] === g3)
          return A2;
      return A2;
    }
    function Dt(h2) {
      return Lt2(h2) ? mf(h2) : nf(h2);
    }
    function On(h2) {
      return Lt2(h2) ? wf(h2) : tf(h2);
    }
    function bs(h2) {
      for (var g3 = h2.length; g3-- && so.test(h2.charAt(g3)); )
        ;
      return g3;
    }
    var _f = Ur(Yo);
    function mf(h2) {
      for (var g3 = br.lastIndex = 0; br.test(h2); )
        ++g3;
      return g3;
    }
    function wf(h2) {
      return h2.match(br) || [];
    }
    function Pf(h2) {
      return h2.match(Fo) || [];
    }
    var Af = function h2(g3) {
      g3 = g3 == null ? k : Ht2.defaults(k.Object(), g3, Ht2.pick(k, Bo));
      var p3 = g3.Array, A2 = g3.Date, S4 = g3.Error, U4 = g3.Function, X2 = g3.Math, M3 = g3.Object, Br = g3.RegExp, Cf = g3.String, wn = g3.TypeError, Oe = p3.prototype, If = U4.prototype, Nt = M3.prototype, Re2 = g3["__core-js_shared__"], be = If.toString, F2 = Nt.hasOwnProperty, xf = 0, Ts = function() {
        var n = /[^.]+$/.exec(Re2 && Re2.keys && Re2.keys.IE_PROTO || "");
        return n ? "Symbol(src)_1." + n : "";
      }(), Te = Nt.toString, Ef = be.call(M3), yf = k._, Sf = Br("^" + be.call(F2).replace(xr, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), Le = ds2 ? g3.Buffer : i, et = g3.Symbol, De = g3.Uint8Array, Ls = Le ? Le.allocUnsafe : i, He = Rs(M3.getPrototypeOf, M3), Ds = M3.create, Hs = Nt.propertyIsEnumerable, Ne = Oe.splice, Ns = et ? et.isConcatSpreadable : i, ne3 = et ? et.iterator : i, pt2 = et ? et.toStringTag : i, $e = function() {
        try {
          var n = mt(M3, "defineProperty");
          return n({}, "", {}), n;
        } catch {
        }
      }(), Of = g3.clearTimeout !== k.clearTimeout && g3.clearTimeout, Rf = A2 && A2.now !== k.Date.now && A2.now, bf = g3.setTimeout !== k.setTimeout && g3.setTimeout, Ue = X2.ceil, We = X2.floor, Gr = M3.getOwnPropertySymbols, Tf = Le ? Le.isBuffer : i, $s = g3.isFinite, Lf = Oe.join, Df = Rs(M3.keys, M3), Q3 = X2.max, nn = X2.min, Hf = A2.now, Nf = g3.parseInt, Us = X2.random, $f = Oe.reverse, zr2 = mt(g3, "DataView"), te2 = mt(g3, "Map"), Kr = mt(g3, "Promise"), $t3 = mt(g3, "Set"), ee = mt(g3, "WeakMap"), re2 = mt(M3, "create"), Fe = ee && new ee(), Ut = {}, Uf = wt(zr2), Wf = wt(te2), Ff = wt(Kr), Mf = wt($t3), qf = wt(ee), Me = et ? et.prototype : i, ie2 = Me ? Me.valueOf : i, Ws = Me ? Me.toString : i;
      function a(n) {
        if (Y(n) && !O3(n) && !(n instanceof H2)) {
          if (n instanceof Pn)
            return n;
          if (F2.call(n, "__wrapped__"))
            return Fu(n);
        }
        return new Pn(n);
      }
      var Wt2 = function() {
        function n() {
        }
        return function(t) {
          if (!K(t))
            return {};
          if (Ds)
            return Ds(t);
          n.prototype = t;
          var e = new n();
          return n.prototype = i, e;
        };
      }();
      function qe() {
      }
      function Pn(n, t) {
        this.__wrapped__ = n, this.__actions__ = [], this.__chain__ = !!t, this.__index__ = 0, this.__values__ = i;
      }
      a.templateSettings = { escape: ja, evaluate: no, interpolate: Zi, variable: "", imports: { _: a } }, a.prototype = qe.prototype, a.prototype.constructor = a, Pn.prototype = Wt2(qe.prototype), Pn.prototype.constructor = Pn;
      function H2(n) {
        this.__wrapped__ = n, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = false, this.__iteratees__ = [], this.__takeCount__ = Nn, this.__views__ = [];
      }
      function Bf() {
        var n = new H2(this.__wrapped__);
        return n.__actions__ = un2(this.__actions__), n.__dir__ = this.__dir__, n.__filtered__ = this.__filtered__, n.__iteratees__ = un2(this.__iteratees__), n.__takeCount__ = this.__takeCount__, n.__views__ = un2(this.__views__), n;
      }
      function Gf() {
        if (this.__filtered__) {
          var n = new H2(this);
          n.__dir__ = -1, n.__filtered__ = true;
        } else
          n = this.clone(), n.__dir__ *= -1;
        return n;
      }
      function zf() {
        var n = this.__wrapped__.value(), t = this.__dir__, e = O3(n), r = t < 0, s = e ? n.length : 0, o = eh(0, s, this.__views__), f2 = o.start, c = o.end, l = c - f2, v3 = r ? c : f2 - 1, _3 = this.__iteratees__, m2 = _3.length, P2 = 0, I2 = nn(l, this.__takeCount__);
        if (!e || !r && s == l && I2 == l)
          return ou(n, this.__actions__);
        var E2 = [];
        n:
          for (; l-- && P2 < I2; ) {
            v3 += t;
            for (var b4 = -1, y4 = n[v3]; ++b4 < m2; ) {
              var D4 = _3[b4], N3 = D4.iteratee, dn = D4.type, sn = N3(y4);
              if (dn == $a)
                y4 = sn;
              else if (!sn) {
                if (dn == Bi)
                  continue n;
                break n;
              }
            }
            E2[P2++] = y4;
          }
        return E2;
      }
      H2.prototype = Wt2(qe.prototype), H2.prototype.constructor = H2;
      function dt2(n) {
        var t = -1, e = n == null ? 0 : n.length;
        for (this.clear(); ++t < e; ) {
          var r = n[t];
          this.set(r[0], r[1]);
        }
      }
      function Kf() {
        this.__data__ = re2 ? re2(null) : {}, this.size = 0;
      }
      function Yf(n) {
        var t = this.has(n) && delete this.__data__[n];
        return this.size -= t ? 1 : 0, t;
      }
      function Zf(n) {
        var t = this.__data__;
        if (re2) {
          var e = t[n];
          return e === zt2 ? i : e;
        }
        return F2.call(t, n) ? t[n] : i;
      }
      function Jf(n) {
        var t = this.__data__;
        return re2 ? t[n] !== i : F2.call(t, n);
      }
      function Xf(n, t) {
        var e = this.__data__;
        return this.size += this.has(n) ? 0 : 1, e[n] = re2 && t === i ? zt2 : t, this;
      }
      dt2.prototype.clear = Kf, dt2.prototype.delete = Yf, dt2.prototype.get = Zf, dt2.prototype.has = Jf, dt2.prototype.set = Xf;
      function Bn(n) {
        var t = -1, e = n == null ? 0 : n.length;
        for (this.clear(); ++t < e; ) {
          var r = n[t];
          this.set(r[0], r[1]);
        }
      }
      function Qf() {
        this.__data__ = [], this.size = 0;
      }
      function Vf(n) {
        var t = this.__data__, e = Be(t, n);
        if (e < 0)
          return false;
        var r = t.length - 1;
        return e == r ? t.pop() : Ne.call(t, e, 1), --this.size, true;
      }
      function kf(n) {
        var t = this.__data__, e = Be(t, n);
        return e < 0 ? i : t[e][1];
      }
      function jf(n) {
        return Be(this.__data__, n) > -1;
      }
      function nc(n, t) {
        var e = this.__data__, r = Be(e, n);
        return r < 0 ? (++this.size, e.push([n, t])) : e[r][1] = t, this;
      }
      Bn.prototype.clear = Qf, Bn.prototype.delete = Vf, Bn.prototype.get = kf, Bn.prototype.has = jf, Bn.prototype.set = nc;
      function Gn(n) {
        var t = -1, e = n == null ? 0 : n.length;
        for (this.clear(); ++t < e; ) {
          var r = n[t];
          this.set(r[0], r[1]);
        }
      }
      function tc() {
        this.size = 0, this.__data__ = { hash: new dt2(), map: new (te2 || Bn)(), string: new dt2() };
      }
      function ec(n) {
        var t = nr(this, n).delete(n);
        return this.size -= t ? 1 : 0, t;
      }
      function rc(n) {
        return nr(this, n).get(n);
      }
      function ic(n) {
        return nr(this, n).has(n);
      }
      function sc(n, t) {
        var e = nr(this, n), r = e.size;
        return e.set(n, t), this.size += e.size == r ? 0 : 1, this;
      }
      Gn.prototype.clear = tc, Gn.prototype.delete = ec, Gn.prototype.get = rc, Gn.prototype.has = ic, Gn.prototype.set = sc;
      function gt(n) {
        var t = -1, e = n == null ? 0 : n.length;
        for (this.__data__ = new Gn(); ++t < e; )
          this.add(n[t]);
      }
      function uc(n) {
        return this.__data__.set(n, zt2), this;
      }
      function ac(n) {
        return this.__data__.has(n);
      }
      gt.prototype.add = gt.prototype.push = uc, gt.prototype.has = ac;
      function Rn2(n) {
        var t = this.__data__ = new Bn(n);
        this.size = t.size;
      }
      function oc() {
        this.__data__ = new Bn(), this.size = 0;
      }
      function fc(n) {
        var t = this.__data__, e = t.delete(n);
        return this.size = t.size, e;
      }
      function cc(n) {
        return this.__data__.get(n);
      }
      function hc(n) {
        return this.__data__.has(n);
      }
      function lc(n, t) {
        var e = this.__data__;
        if (e instanceof Bn) {
          var r = e.__data__;
          if (!te2 || r.length < w2 - 1)
            return r.push([n, t]), this.size = ++e.size, this;
          e = this.__data__ = new Gn(r);
        }
        return e.set(n, t), this.size = e.size, this;
      }
      Rn2.prototype.clear = oc, Rn2.prototype.delete = fc, Rn2.prototype.get = cc, Rn2.prototype.has = hc, Rn2.prototype.set = lc;
      function Fs(n, t) {
        var e = O3(n), r = !e && Pt(n), s = !e && !r && at(n), o = !e && !r && !s && Bt2(n), f2 = e || r || s || o, c = f2 ? Fr(n.length, Cf) : [], l = c.length;
        for (var v3 in n)
          (t || F2.call(n, v3)) && !(f2 && (v3 == "length" || s && (v3 == "offset" || v3 == "parent") || o && (v3 == "buffer" || v3 == "byteLength" || v3 == "byteOffset") || Zn(v3, l))) && c.push(v3);
        return c;
      }
      function Ms(n) {
        var t = n.length;
        return t ? n[ei(0, t - 1)] : i;
      }
      function pc(n, t) {
        return tr(un2(n), vt(t, 0, n.length));
      }
      function dc(n) {
        return tr(un2(n));
      }
      function Yr(n, t, e) {
        (e !== i && !bn(n[t], e) || e === i && !(t in n)) && zn2(n, t, e);
      }
      function se2(n, t, e) {
        var r = n[t];
        (!(F2.call(n, t) && bn(r, e)) || e === i && !(t in n)) && zn2(n, t, e);
      }
      function Be(n, t) {
        for (var e = n.length; e--; )
          if (bn(n[e][0], t))
            return e;
        return -1;
      }
      function gc(n, t, e, r) {
        return rt(n, function(s, o, f2) {
          t(r, s, e(s), f2);
        }), r;
      }
      function qs(n, t) {
        return n && Un(t, V3(t), n);
      }
      function vc(n, t) {
        return n && Un(t, on(t), n);
      }
      function zn2(n, t, e) {
        t == "__proto__" && $e ? $e(n, t, { configurable: true, enumerable: true, value: e, writable: true }) : n[t] = e;
      }
      function Zr(n, t) {
        for (var e = -1, r = t.length, s = p3(r), o = n == null; ++e < r; )
          s[e] = o ? i : Si(n, t[e]);
        return s;
      }
      function vt(n, t, e) {
        return n === n && (e !== i && (n = n <= e ? n : e), t !== i && (n = n >= t ? n : t)), n;
      }
      function An(n, t, e, r, s, o) {
        var f2, c = t & Ln, l = t & Fn, v3 = t & xt2;
        if (e && (f2 = s ? e(n, r, s, o) : e(n)), f2 !== i)
          return f2;
        if (!K(n))
          return n;
        var _3 = O3(n);
        if (_3) {
          if (f2 = ih(n), !c)
            return un2(n, f2);
        } else {
          var m2 = tn(n), P2 = m2 == Pe || m2 == Gi;
          if (at(n))
            return hu(n, c);
          if (m2 == qn || m2 == Ot || P2 && !s) {
            if (f2 = l || P2 ? {} : bu(n), !c)
              return l ? Zc(n, vc(f2, n)) : Yc(n, qs(f2, n));
          } else {
            if (!q3[m2])
              return s ? n : {};
            f2 = sh(n, m2, c);
          }
        }
        o || (o = new Rn2());
        var I2 = o.get(n);
        if (I2)
          return I2;
        o.set(n, f2), sa(n) ? n.forEach(function(y4) {
          f2.add(An(y4, t, e, y4, n, o));
        }) : ra(n) && n.forEach(function(y4, D4) {
          f2.set(D4, An(y4, t, e, D4, n, o));
        });
        var E2 = v3 ? l ? pi : li : l ? on : V3, b4 = _3 ? i : E2(n);
        return mn(b4 || n, function(y4, D4) {
          b4 && (D4 = y4, y4 = n[D4]), se2(f2, D4, An(y4, t, e, D4, n, o));
        }), f2;
      }
      function _c(n) {
        var t = V3(n);
        return function(e) {
          return Bs(e, n, t);
        };
      }
      function Bs(n, t, e) {
        var r = e.length;
        if (n == null)
          return !r;
        for (n = M3(n); r--; ) {
          var s = e[r], o = t[s], f2 = n[s];
          if (f2 === i && !(s in n) || !o(f2))
            return false;
        }
        return true;
      }
      function Gs(n, t, e) {
        if (typeof n != "function")
          throw new wn($3);
        return le2(function() {
          n.apply(i, e);
        }, t);
      }
      function ue(n, t, e, r) {
        var s = -1, o = Ee2, f2 = true, c = n.length, l = [], v3 = t.length;
        if (!c)
          return l;
        e && (t = G3(t, hn(e))), r ? (o = Dr, f2 = false) : t.length >= w2 && (o = jt, f2 = false, t = new gt(t));
        n:
          for (; ++s < c; ) {
            var _3 = n[s], m2 = e == null ? _3 : e(_3);
            if (_3 = r || _3 !== 0 ? _3 : 0, f2 && m2 === m2) {
              for (var P2 = v3; P2--; )
                if (t[P2] === m2)
                  continue n;
              l.push(_3);
            } else
              o(t, m2, r) || l.push(_3);
          }
        return l;
      }
      var rt = vu($n), zs = vu(Xr, true);
      function mc(n, t) {
        var e = true;
        return rt(n, function(r, s, o) {
          return e = !!t(r, s, o), e;
        }), e;
      }
      function Ge(n, t, e) {
        for (var r = -1, s = n.length; ++r < s; ) {
          var o = n[r], f2 = t(o);
          if (f2 != null && (c === i ? f2 === f2 && !pn(f2) : e(f2, c)))
            var c = f2, l = o;
        }
        return l;
      }
      function wc(n, t, e, r) {
        var s = n.length;
        for (e = R(e), e < 0 && (e = -e > s ? 0 : s + e), r = r === i || r > s ? s : R(r), r < 0 && (r += s), r = e > r ? 0 : aa(r); e < r; )
          n[e++] = t;
        return n;
      }
      function Ks(n, t) {
        var e = [];
        return rt(n, function(r, s, o) {
          t(r, s, o) && e.push(r);
        }), e;
      }
      function j2(n, t, e, r, s) {
        var o = -1, f2 = n.length;
        for (e || (e = ah), s || (s = []); ++o < f2; ) {
          var c = n[o];
          t > 0 && e(c) ? t > 1 ? j2(c, t - 1, e, r, s) : nt(s, c) : r || (s[s.length] = c);
        }
        return s;
      }
      var Jr = _u(), Ys = _u(true);
      function $n(n, t) {
        return n && Jr(n, t, V3);
      }
      function Xr(n, t) {
        return n && Ys(n, t, V3);
      }
      function ze2(n, t) {
        return jn(t, function(e) {
          return Jn(n[e]);
        });
      }
      function _t(n, t) {
        t = st2(t, n);
        for (var e = 0, r = t.length; n != null && e < r; )
          n = n[Wn(t[e++])];
        return e && e == r ? n : i;
      }
      function Zs(n, t, e) {
        var r = t(n);
        return O3(n) ? r : nt(r, e(n));
      }
      function en(n) {
        return n == null ? n === i ? Ya : za : pt2 && pt2 in M3(n) ? th(n) : dh(n);
      }
      function Qr(n, t) {
        return n > t;
      }
      function Pc(n, t) {
        return n != null && F2.call(n, t);
      }
      function Ac(n, t) {
        return n != null && t in M3(n);
      }
      function Cc(n, t, e) {
        return n >= nn(t, e) && n < Q3(t, e);
      }
      function Vr(n, t, e) {
        for (var r = e ? Dr : Ee2, s = n[0].length, o = n.length, f2 = o, c = p3(o), l = 1 / 0, v3 = []; f2--; ) {
          var _3 = n[f2];
          f2 && t && (_3 = G3(_3, hn(t))), l = nn(_3.length, l), c[f2] = !e && (t || s >= 120 && _3.length >= 120) ? new gt(f2 && _3) : i;
        }
        _3 = n[0];
        var m2 = -1, P2 = c[0];
        n:
          for (; ++m2 < s && v3.length < l; ) {
            var I2 = _3[m2], E2 = t ? t(I2) : I2;
            if (I2 = e || I2 !== 0 ? I2 : 0, !(P2 ? jt(P2, E2) : r(v3, E2, e))) {
              for (f2 = o; --f2; ) {
                var b4 = c[f2];
                if (!(b4 ? jt(b4, E2) : r(n[f2], E2, e)))
                  continue n;
              }
              P2 && P2.push(E2), v3.push(I2);
            }
          }
        return v3;
      }
      function Ic(n, t, e, r) {
        return $n(n, function(s, o, f2) {
          t(r, e(s), o, f2);
        }), r;
      }
      function ae2(n, t, e) {
        t = st2(t, n), n = Hu(n, t);
        var r = n == null ? n : n[Wn(In(t))];
        return r == null ? i : cn2(r, n, e);
      }
      function Js(n) {
        return Y(n) && en(n) == Ot;
      }
      function xc(n) {
        return Y(n) && en(n) == kt;
      }
      function Ec(n) {
        return Y(n) && en(n) == Zt;
      }
      function oe3(n, t, e, r, s) {
        return n === t ? true : n == null || t == null || !Y(n) && !Y(t) ? n !== n && t !== t : yc(n, t, e, r, oe3, s);
      }
      function yc(n, t, e, r, s, o) {
        var f2 = O3(n), c = O3(t), l = f2 ? me : tn(n), v3 = c ? me : tn(t);
        l = l == Ot ? qn : l, v3 = v3 == Ot ? qn : v3;
        var _3 = l == qn, m2 = v3 == qn, P2 = l == v3;
        if (P2 && at(n)) {
          if (!at(t))
            return false;
          f2 = true, _3 = false;
        }
        if (P2 && !_3)
          return o || (o = new Rn2()), f2 || Bt2(n) ? Su(n, t, e, r, s, o) : jc(n, t, l, e, r, s, o);
        if (!(e & Et)) {
          var I2 = _3 && F2.call(n, "__wrapped__"), E2 = m2 && F2.call(t, "__wrapped__");
          if (I2 || E2) {
            var b4 = I2 ? n.value() : n, y4 = E2 ? t.value() : t;
            return o || (o = new Rn2()), s(b4, y4, e, r, o);
          }
        }
        return P2 ? (o || (o = new Rn2()), nh(n, t, e, r, s, o)) : false;
      }
      function Sc(n) {
        return Y(n) && tn(n) == yn;
      }
      function kr(n, t, e, r) {
        var s = e.length, o = s, f2 = !r;
        if (n == null)
          return !o;
        for (n = M3(n); s--; ) {
          var c = e[s];
          if (f2 && c[2] ? c[1] !== n[c[0]] : !(c[0] in n))
            return false;
        }
        for (; ++s < o; ) {
          c = e[s];
          var l = c[0], v3 = n[l], _3 = c[1];
          if (f2 && c[2]) {
            if (v3 === i && !(l in n))
              return false;
          } else {
            var m2 = new Rn2();
            if (r)
              var P2 = r(v3, _3, l, n, t, m2);
            if (!(P2 === i ? oe3(_3, v3, Et | ve2, r, m2) : P2))
              return false;
          }
        }
        return true;
      }
      function Xs(n) {
        if (!K(n) || fh(n))
          return false;
        var t = Jn(n) ? Sf : vo;
        return t.test(wt(n));
      }
      function Oc(n) {
        return Y(n) && en(n) == Xt;
      }
      function Rc(n) {
        return Y(n) && tn(n) == Sn;
      }
      function bc(n) {
        return Y(n) && ar(n.length) && !!B2[en(n)];
      }
      function Qs(n) {
        return typeof n == "function" ? n : n == null ? fn : typeof n == "object" ? O3(n) ? js(n[0], n[1]) : ks(n) : ma(n);
      }
      function jr(n) {
        if (!he2(n))
          return Df(n);
        var t = [];
        for (var e in M3(n))
          F2.call(n, e) && e != "constructor" && t.push(e);
        return t;
      }
      function Tc(n) {
        if (!K(n))
          return ph(n);
        var t = he2(n), e = [];
        for (var r in n)
          r == "constructor" && (t || !F2.call(n, r)) || e.push(r);
        return e;
      }
      function ni(n, t) {
        return n < t;
      }
      function Vs(n, t) {
        var e = -1, r = an2(n) ? p3(n.length) : [];
        return rt(n, function(s, o, f2) {
          r[++e] = t(s, o, f2);
        }), r;
      }
      function ks(n) {
        var t = gi(n);
        return t.length == 1 && t[0][2] ? Lu(t[0][0], t[0][1]) : function(e) {
          return e === n || kr(e, n, t);
        };
      }
      function js(n, t) {
        return _i(n) && Tu(t) ? Lu(Wn(n), t) : function(e) {
          var r = Si(e, n);
          return r === i && r === t ? Oi(e, n) : oe3(t, r, Et | ve2);
        };
      }
      function Ke(n, t, e, r, s) {
        n !== t && Jr(t, function(o, f2) {
          if (s || (s = new Rn2()), K(o))
            Lc(n, t, f2, e, Ke, r, s);
          else {
            var c = r ? r(wi(n, f2), o, f2 + "", n, t, s) : i;
            c === i && (c = o), Yr(n, f2, c);
          }
        }, on);
      }
      function Lc(n, t, e, r, s, o, f2) {
        var c = wi(n, e), l = wi(t, e), v3 = f2.get(l);
        if (v3) {
          Yr(n, e, v3);
          return;
        }
        var _3 = o ? o(c, l, e + "", n, t, f2) : i, m2 = _3 === i;
        if (m2) {
          var P2 = O3(l), I2 = !P2 && at(l), E2 = !P2 && !I2 && Bt2(l);
          _3 = l, P2 || I2 || E2 ? O3(c) ? _3 = c : Z(c) ? _3 = un2(c) : I2 ? (m2 = false, _3 = hu(l, true)) : E2 ? (m2 = false, _3 = lu(l, true)) : _3 = [] : pe2(l) || Pt(l) ? (_3 = c, Pt(c) ? _3 = oa(c) : (!K(c) || Jn(c)) && (_3 = bu(l))) : m2 = false;
        }
        m2 && (f2.set(l, _3), s(_3, l, r, o, f2), f2.delete(l)), Yr(n, e, _3);
      }
      function nu(n, t) {
        var e = n.length;
        if (e)
          return t += t < 0 ? e : 0, Zn(t, e) ? n[t] : i;
      }
      function tu(n, t, e) {
        t.length ? t = G3(t, function(o) {
          return O3(o) ? function(f2) {
            return _t(f2, o.length === 1 ? o[0] : o);
          } : o;
        }) : t = [fn];
        var r = -1;
        t = G3(t, hn(x()));
        var s = Vs(n, function(o, f2, c) {
          var l = G3(t, function(v3) {
            return v3(o);
          });
          return { criteria: l, index: ++r, value: o };
        });
        return sf(s, function(o, f2) {
          return Kc(o, f2, e);
        });
      }
      function Dc(n, t) {
        return eu(n, t, function(e, r) {
          return Oi(n, r);
        });
      }
      function eu(n, t, e) {
        for (var r = -1, s = t.length, o = {}; ++r < s; ) {
          var f2 = t[r], c = _t(n, f2);
          e(c, f2) && fe(o, st2(f2, n), c);
        }
        return o;
      }
      function Hc(n) {
        return function(t) {
          return _t(t, n);
        };
      }
      function ti(n, t, e, r) {
        var s = r ? rf : Tt, o = -1, f2 = t.length, c = n;
        for (n === t && (t = un2(t)), e && (c = G3(n, hn(e))); ++o < f2; )
          for (var l = 0, v3 = t[o], _3 = e ? e(v3) : v3; (l = s(c, _3, l, r)) > -1; )
            c !== n && Ne.call(c, l, 1), Ne.call(n, l, 1);
        return n;
      }
      function ru(n, t) {
        for (var e = n ? t.length : 0, r = e - 1; e--; ) {
          var s = t[e];
          if (e == r || s !== o) {
            var o = s;
            Zn(s) ? Ne.call(n, s, 1) : si(n, s);
          }
        }
        return n;
      }
      function ei(n, t) {
        return n + We(Us() * (t - n + 1));
      }
      function Nc(n, t, e, r) {
        for (var s = -1, o = Q3(Ue((t - n) / (e || 1)), 0), f2 = p3(o); o--; )
          f2[r ? o : ++s] = n, n += e;
        return f2;
      }
      function ri(n, t) {
        var e = "";
        if (!n || t < 1 || t > kn)
          return e;
        do
          t % 2 && (e += n), t = We(t / 2), t && (n += n);
        while (t);
        return e;
      }
      function L2(n, t) {
        return Pi(Du(n, t, fn), n + "");
      }
      function $c(n) {
        return Ms(Gt2(n));
      }
      function Uc(n, t) {
        var e = Gt2(n);
        return tr(e, vt(t, 0, e.length));
      }
      function fe(n, t, e, r) {
        if (!K(n))
          return n;
        t = st2(t, n);
        for (var s = -1, o = t.length, f2 = o - 1, c = n; c != null && ++s < o; ) {
          var l = Wn(t[s]), v3 = e;
          if (l === "__proto__" || l === "constructor" || l === "prototype")
            return n;
          if (s != f2) {
            var _3 = c[l];
            v3 = r ? r(_3, l, c) : i, v3 === i && (v3 = K(_3) ? _3 : Zn(t[s + 1]) ? [] : {});
          }
          se2(c, l, v3), c = c[l];
        }
        return n;
      }
      var iu = Fe ? function(n, t) {
        return Fe.set(n, t), n;
      } : fn, Wc = $e ? function(n, t) {
        return $e(n, "toString", { configurable: true, enumerable: false, value: bi(t), writable: true });
      } : fn;
      function Fc(n) {
        return tr(Gt2(n));
      }
      function Cn(n, t, e) {
        var r = -1, s = n.length;
        t < 0 && (t = -t > s ? 0 : s + t), e = e > s ? s : e, e < 0 && (e += s), s = t > e ? 0 : e - t >>> 0, t >>>= 0;
        for (var o = p3(s); ++r < s; )
          o[r] = n[r + t];
        return o;
      }
      function Mc(n, t) {
        var e;
        return rt(n, function(r, s, o) {
          return e = t(r, s, o), !e;
        }), !!e;
      }
      function Ye2(n, t, e) {
        var r = 0, s = n == null ? r : n.length;
        if (typeof t == "number" && t === t && s <= Ma) {
          for (; r < s; ) {
            var o = r + s >>> 1, f2 = n[o];
            f2 !== null && !pn(f2) && (e ? f2 <= t : f2 < t) ? r = o + 1 : s = o;
          }
          return s;
        }
        return ii(n, t, fn, e);
      }
      function ii(n, t, e, r) {
        var s = 0, o = n == null ? 0 : n.length;
        if (o === 0)
          return 0;
        t = e(t);
        for (var f2 = t !== t, c = t === null, l = pn(t), v3 = t === i; s < o; ) {
          var _3 = We((s + o) / 2), m2 = e(n[_3]), P2 = m2 !== i, I2 = m2 === null, E2 = m2 === m2, b4 = pn(m2);
          if (f2)
            var y4 = r || E2;
          else
            v3 ? y4 = E2 && (r || P2) : c ? y4 = E2 && P2 && (r || !I2) : l ? y4 = E2 && P2 && !I2 && (r || !b4) : I2 || b4 ? y4 = false : y4 = r ? m2 <= t : m2 < t;
          y4 ? s = _3 + 1 : o = _3;
        }
        return nn(o, Fa);
      }
      function su(n, t) {
        for (var e = -1, r = n.length, s = 0, o = []; ++e < r; ) {
          var f2 = n[e], c = t ? t(f2) : f2;
          if (!e || !bn(c, l)) {
            var l = c;
            o[s++] = f2 === 0 ? 0 : f2;
          }
        }
        return o;
      }
      function uu(n) {
        return typeof n == "number" ? n : pn(n) ? _e2 : +n;
      }
      function ln(n) {
        if (typeof n == "string")
          return n;
        if (O3(n))
          return G3(n, ln) + "";
        if (pn(n))
          return Ws ? Ws.call(n) : "";
        var t = n + "";
        return t == "0" && 1 / n == -ht ? "-0" : t;
      }
      function it(n, t, e) {
        var r = -1, s = Ee2, o = n.length, f2 = true, c = [], l = c;
        if (e)
          f2 = false, s = Dr;
        else if (o >= w2) {
          var v3 = t ? null : Vc(n);
          if (v3)
            return Se(v3);
          f2 = false, s = jt, l = new gt();
        } else
          l = t ? [] : c;
        n:
          for (; ++r < o; ) {
            var _3 = n[r], m2 = t ? t(_3) : _3;
            if (_3 = e || _3 !== 0 ? _3 : 0, f2 && m2 === m2) {
              for (var P2 = l.length; P2--; )
                if (l[P2] === m2)
                  continue n;
              t && l.push(m2), c.push(_3);
            } else
              s(l, m2, e) || (l !== c && l.push(m2), c.push(_3));
          }
        return c;
      }
      function si(n, t) {
        return t = st2(t, n), n = Hu(n, t), n == null || delete n[Wn(In(t))];
      }
      function au(n, t, e, r) {
        return fe(n, t, e(_t(n, t)), r);
      }
      function Ze(n, t, e, r) {
        for (var s = n.length, o = r ? s : -1; (r ? o-- : ++o < s) && t(n[o], o, n); )
          ;
        return e ? Cn(n, r ? 0 : o, r ? o + 1 : s) : Cn(n, r ? o + 1 : 0, r ? s : o);
      }
      function ou(n, t) {
        var e = n;
        return e instanceof H2 && (e = e.value()), Hr(t, function(r, s) {
          return s.func.apply(s.thisArg, nt([r], s.args));
        }, e);
      }
      function ui(n, t, e) {
        var r = n.length;
        if (r < 2)
          return r ? it(n[0]) : [];
        for (var s = -1, o = p3(r); ++s < r; )
          for (var f2 = n[s], c = -1; ++c < r; )
            c != s && (o[s] = ue(o[s] || f2, n[c], t, e));
        return it(j2(o, 1), t, e);
      }
      function fu(n, t, e) {
        for (var r = -1, s = n.length, o = t.length, f2 = {}; ++r < s; ) {
          var c = r < o ? t[r] : i;
          e(f2, n[r], c);
        }
        return f2;
      }
      function ai(n) {
        return Z(n) ? n : [];
      }
      function oi(n) {
        return typeof n == "function" ? n : fn;
      }
      function st2(n, t) {
        return O3(n) ? n : _i(n, t) ? [n] : Wu(W2(n));
      }
      var qc = L2;
      function ut2(n, t, e) {
        var r = n.length;
        return e = e === i ? r : e, !t && e >= r ? n : Cn(n, t, e);
      }
      var cu = Of || function(n) {
        return k.clearTimeout(n);
      };
      function hu(n, t) {
        if (t)
          return n.slice();
        var e = n.length, r = Ls ? Ls(e) : new n.constructor(e);
        return n.copy(r), r;
      }
      function fi(n) {
        var t = new n.constructor(n.byteLength);
        return new De(t).set(new De(n)), t;
      }
      function Bc(n, t) {
        var e = t ? fi(n.buffer) : n.buffer;
        return new n.constructor(e, n.byteOffset, n.byteLength);
      }
      function Gc(n) {
        var t = new n.constructor(n.source, Ji.exec(n));
        return t.lastIndex = n.lastIndex, t;
      }
      function zc(n) {
        return ie2 ? M3(ie2.call(n)) : {};
      }
      function lu(n, t) {
        var e = t ? fi(n.buffer) : n.buffer;
        return new n.constructor(e, n.byteOffset, n.length);
      }
      function pu(n, t) {
        if (n !== t) {
          var e = n !== i, r = n === null, s = n === n, o = pn(n), f2 = t !== i, c = t === null, l = t === t, v3 = pn(t);
          if (!c && !v3 && !o && n > t || o && f2 && l && !c && !v3 || r && f2 && l || !e && l || !s)
            return 1;
          if (!r && !o && !v3 && n < t || v3 && e && s && !r && !o || c && e && s || !f2 && s || !l)
            return -1;
        }
        return 0;
      }
      function Kc(n, t, e) {
        for (var r = -1, s = n.criteria, o = t.criteria, f2 = s.length, c = e.length; ++r < f2; ) {
          var l = pu(s[r], o[r]);
          if (l) {
            if (r >= c)
              return l;
            var v3 = e[r];
            return l * (v3 == "desc" ? -1 : 1);
          }
        }
        return n.index - t.index;
      }
      function du(n, t, e, r) {
        for (var s = -1, o = n.length, f2 = e.length, c = -1, l = t.length, v3 = Q3(o - f2, 0), _3 = p3(l + v3), m2 = !r; ++c < l; )
          _3[c] = t[c];
        for (; ++s < f2; )
          (m2 || s < o) && (_3[e[s]] = n[s]);
        for (; v3--; )
          _3[c++] = n[s++];
        return _3;
      }
      function gu(n, t, e, r) {
        for (var s = -1, o = n.length, f2 = -1, c = e.length, l = -1, v3 = t.length, _3 = Q3(o - c, 0), m2 = p3(_3 + v3), P2 = !r; ++s < _3; )
          m2[s] = n[s];
        for (var I2 = s; ++l < v3; )
          m2[I2 + l] = t[l];
        for (; ++f2 < c; )
          (P2 || s < o) && (m2[I2 + e[f2]] = n[s++]);
        return m2;
      }
      function un2(n, t) {
        var e = -1, r = n.length;
        for (t || (t = p3(r)); ++e < r; )
          t[e] = n[e];
        return t;
      }
      function Un(n, t, e, r) {
        var s = !e;
        e || (e = {});
        for (var o = -1, f2 = t.length; ++o < f2; ) {
          var c = t[o], l = r ? r(e[c], n[c], c, e, n) : i;
          l === i && (l = n[c]), s ? zn2(e, c, l) : se2(e, c, l);
        }
        return e;
      }
      function Yc(n, t) {
        return Un(n, vi(n), t);
      }
      function Zc(n, t) {
        return Un(n, Ou(n), t);
      }
      function Je2(n, t) {
        return function(e, r) {
          var s = O3(e) ? Vo : gc, o = t ? t() : {};
          return s(e, n, x(r, 2), o);
        };
      }
      function Ft2(n) {
        return L2(function(t, e) {
          var r = -1, s = e.length, o = s > 1 ? e[s - 1] : i, f2 = s > 2 ? e[2] : i;
          for (o = n.length > 3 && typeof o == "function" ? (s--, o) : i, f2 && rn(e[0], e[1], f2) && (o = s < 3 ? i : o, s = 1), t = M3(t); ++r < s; ) {
            var c = e[r];
            c && n(t, c, r, o);
          }
          return t;
        });
      }
      function vu(n, t) {
        return function(e, r) {
          if (e == null)
            return e;
          if (!an2(e))
            return n(e, r);
          for (var s = e.length, o = t ? s : -1, f2 = M3(e); (t ? o-- : ++o < s) && r(f2[o], o, f2) !== false; )
            ;
          return e;
        };
      }
      function _u(n) {
        return function(t, e, r) {
          for (var s = -1, o = M3(t), f2 = r(t), c = f2.length; c--; ) {
            var l = f2[n ? c : ++s];
            if (e(o[l], l, o) === false)
              break;
          }
          return t;
        };
      }
      function Jc(n, t, e) {
        var r = t & vn, s = ce2(n);
        function o() {
          var f2 = this && this !== k && this instanceof o ? s : n;
          return f2.apply(r ? e : this, arguments);
        }
        return o;
      }
      function mu(n) {
        return function(t) {
          t = W2(t);
          var e = Lt2(t) ? On(t) : i, r = e ? e[0] : t.charAt(0), s = e ? ut2(e, 1).join("") : t.slice(1);
          return r[n]() + s;
        };
      }
      function Mt2(n) {
        return function(t) {
          return Hr(va(ga(t).replace(Uo, "")), n, "");
        };
      }
      function ce2(n) {
        return function() {
          var t = arguments;
          switch (t.length) {
            case 0:
              return new n();
            case 1:
              return new n(t[0]);
            case 2:
              return new n(t[0], t[1]);
            case 3:
              return new n(t[0], t[1], t[2]);
            case 4:
              return new n(t[0], t[1], t[2], t[3]);
            case 5:
              return new n(t[0], t[1], t[2], t[3], t[4]);
            case 6:
              return new n(t[0], t[1], t[2], t[3], t[4], t[5]);
            case 7:
              return new n(t[0], t[1], t[2], t[3], t[4], t[5], t[6]);
          }
          var e = Wt2(n.prototype), r = n.apply(e, t);
          return K(r) ? r : e;
        };
      }
      function Xc(n, t, e) {
        var r = ce2(n);
        function s() {
          for (var o = arguments.length, f2 = p3(o), c = o, l = qt2(s); c--; )
            f2[c] = arguments[c];
          var v3 = o < 3 && f2[0] !== l && f2[o - 1] !== l ? [] : tt(f2, l);
          if (o -= v3.length, o < e)
            return Iu(n, t, Xe2, s.placeholder, i, f2, v3, i, i, e - o);
          var _3 = this && this !== k && this instanceof s ? r : n;
          return cn2(_3, this, f2);
        }
        return s;
      }
      function wu(n) {
        return function(t, e, r) {
          var s = M3(t);
          if (!an2(t)) {
            var o = x(e, 3);
            t = V3(t), e = function(c) {
              return o(s[c], c, s);
            };
          }
          var f2 = n(t, e, r);
          return f2 > -1 ? s[o ? t[f2] : f2] : i;
        };
      }
      function Pu(n) {
        return Yn(function(t) {
          var e = t.length, r = e, s = Pn.prototype.thru;
          for (n && t.reverse(); r--; ) {
            var o = t[r];
            if (typeof o != "function")
              throw new wn($3);
            if (s && !f2 && je2(o) == "wrapper")
              var f2 = new Pn([], true);
          }
          for (r = f2 ? r : e; ++r < e; ) {
            o = t[r];
            var c = je2(o), l = c == "wrapper" ? di(o) : i;
            l && mi(l[0]) && l[1] == (Mn2 | Dn | Hn | Kt2) && !l[4].length && l[9] == 1 ? f2 = f2[je2(l[0])].apply(f2, l[3]) : f2 = o.length == 1 && mi(o) ? f2[c]() : f2.thru(o);
          }
          return function() {
            var v3 = arguments, _3 = v3[0];
            if (f2 && v3.length == 1 && O3(_3))
              return f2.plant(_3).value();
            for (var m2 = 0, P2 = e ? t[m2].apply(this, v3) : _3; ++m2 < e; )
              P2 = t[m2].call(this, P2);
            return P2;
          };
        });
      }
      function Xe2(n, t, e, r, s, o, f2, c, l, v3) {
        var _3 = t & Mn2, m2 = t & vn, P2 = t & ct, I2 = t & (Dn | yt), E2 = t & dr, b4 = P2 ? i : ce2(n);
        function y4() {
          for (var D4 = arguments.length, N3 = p3(D4), dn = D4; dn--; )
            N3[dn] = arguments[dn];
          if (I2)
            var sn = qt2(y4), gn = af(N3, sn);
          if (r && (N3 = du(N3, r, s, I2)), o && (N3 = gu(N3, o, f2, I2)), D4 -= gn, I2 && D4 < v3) {
            var J = tt(N3, sn);
            return Iu(n, t, Xe2, y4.placeholder, e, N3, J, c, l, v3 - D4);
          }
          var Tn = m2 ? e : this, Qn = P2 ? Tn[n] : n;
          return D4 = N3.length, c ? N3 = gh(N3, c) : E2 && D4 > 1 && N3.reverse(), _3 && l < D4 && (N3.length = l), this && this !== k && this instanceof y4 && (Qn = b4 || ce2(Qn)), Qn.apply(Tn, N3);
        }
        return y4;
      }
      function Au(n, t) {
        return function(e, r) {
          return Ic(e, n, t(r), {});
        };
      }
      function Qe(n, t) {
        return function(e, r) {
          var s;
          if (e === i && r === i)
            return t;
          if (e !== i && (s = e), r !== i) {
            if (s === i)
              return r;
            typeof e == "string" || typeof r == "string" ? (e = ln(e), r = ln(r)) : (e = uu(e), r = uu(r)), s = n(e, r);
          }
          return s;
        };
      }
      function ci(n) {
        return Yn(function(t) {
          return t = G3(t, hn(x())), L2(function(e) {
            var r = this;
            return n(t, function(s) {
              return cn2(s, r, e);
            });
          });
        });
      }
      function Ve(n, t) {
        t = t === i ? " " : ln(t);
        var e = t.length;
        if (e < 2)
          return e ? ri(t, n) : t;
        var r = ri(t, Ue(n / Dt(t)));
        return Lt2(t) ? ut2(On(r), 0, n).join("") : r.slice(0, n);
      }
      function Qc(n, t, e, r) {
        var s = t & vn, o = ce2(n);
        function f2() {
          for (var c = -1, l = arguments.length, v3 = -1, _3 = r.length, m2 = p3(_3 + l), P2 = this && this !== k && this instanceof f2 ? o : n; ++v3 < _3; )
            m2[v3] = r[v3];
          for (; l--; )
            m2[v3++] = arguments[++c];
          return cn2(P2, s ? e : this, m2);
        }
        return f2;
      }
      function Cu(n) {
        return function(t, e, r) {
          return r && typeof r != "number" && rn(t, e, r) && (e = r = i), t = Xn(t), e === i ? (e = t, t = 0) : e = Xn(e), r = r === i ? t < e ? 1 : -1 : Xn(r), Nc(t, e, r, n);
        };
      }
      function ke(n) {
        return function(t, e) {
          return typeof t == "string" && typeof e == "string" || (t = xn(t), e = xn(e)), n(t, e);
        };
      }
      function Iu(n, t, e, r, s, o, f2, c, l, v3) {
        var _3 = t & Dn, m2 = _3 ? f2 : i, P2 = _3 ? i : f2, I2 = _3 ? o : i, E2 = _3 ? i : o;
        t |= _3 ? Hn : St, t &= ~(_3 ? St : Hn), t & qi || (t &= ~(vn | ct));
        var b4 = [n, t, s, I2, m2, E2, P2, c, l, v3], y4 = e.apply(i, b4);
        return mi(n) && Nu(y4, b4), y4.placeholder = r, $u(y4, n, t);
      }
      function hi(n) {
        var t = X2[n];
        return function(e, r) {
          if (e = xn(e), r = r == null ? 0 : nn(R(r), 292), r && $s(e)) {
            var s = (W2(e) + "e").split("e"), o = t(s[0] + "e" + (+s[1] + r));
            return s = (W2(o) + "e").split("e"), +(s[0] + "e" + (+s[1] - r));
          }
          return t(e);
        };
      }
      var Vc = $t3 && 1 / Se(new $t3([, -0]))[1] == ht ? function(n) {
        return new $t3(n);
      } : Di;
      function xu(n) {
        return function(t) {
          var e = tn(t);
          return e == yn ? qr(t) : e == Sn ? df(t) : uf(t, n(t));
        };
      }
      function Kn(n, t, e, r, s, o, f2, c) {
        var l = t & ct;
        if (!l && typeof n != "function")
          throw new wn($3);
        var v3 = r ? r.length : 0;
        if (v3 || (t &= ~(Hn | St), r = s = i), f2 = f2 === i ? f2 : Q3(R(f2), 0), c = c === i ? c : R(c), v3 -= s ? s.length : 0, t & St) {
          var _3 = r, m2 = s;
          r = s = i;
        }
        var P2 = l ? i : di(n), I2 = [n, t, e, r, s, _3, m2, o, f2, c];
        if (P2 && lh(I2, P2), n = I2[0], t = I2[1], e = I2[2], r = I2[3], s = I2[4], c = I2[9] = I2[9] === i ? l ? 0 : n.length : Q3(I2[9] - v3, 0), !c && t & (Dn | yt) && (t &= ~(Dn | yt)), !t || t == vn)
          var E2 = Jc(n, t, e);
        else
          t == Dn || t == yt ? E2 = Xc(n, t, c) : (t == Hn || t == (vn | Hn)) && !s.length ? E2 = Qc(n, t, e, r) : E2 = Xe2.apply(i, I2);
        var b4 = P2 ? iu : Nu;
        return $u(b4(E2, I2), n, t);
      }
      function Eu(n, t, e, r) {
        return n === i || bn(n, Nt[e]) && !F2.call(r, e) ? t : n;
      }
      function yu(n, t, e, r, s, o) {
        return K(n) && K(t) && (o.set(t, n), Ke(n, t, i, yu, o), o.delete(t)), n;
      }
      function kc(n) {
        return pe2(n) ? i : n;
      }
      function Su(n, t, e, r, s, o) {
        var f2 = e & Et, c = n.length, l = t.length;
        if (c != l && !(f2 && l > c))
          return false;
        var v3 = o.get(n), _3 = o.get(t);
        if (v3 && _3)
          return v3 == t && _3 == n;
        var m2 = -1, P2 = true, I2 = e & ve2 ? new gt() : i;
        for (o.set(n, t), o.set(t, n); ++m2 < c; ) {
          var E2 = n[m2], b4 = t[m2];
          if (r)
            var y4 = f2 ? r(b4, E2, m2, t, n, o) : r(E2, b4, m2, n, t, o);
          if (y4 !== i) {
            if (y4)
              continue;
            P2 = false;
            break;
          }
          if (I2) {
            if (!Nr(t, function(D4, N3) {
              if (!jt(I2, N3) && (E2 === D4 || s(E2, D4, e, r, o)))
                return I2.push(N3);
            })) {
              P2 = false;
              break;
            }
          } else if (!(E2 === b4 || s(E2, b4, e, r, o))) {
            P2 = false;
            break;
          }
        }
        return o.delete(n), o.delete(t), P2;
      }
      function jc(n, t, e, r, s, o, f2) {
        switch (e) {
          case Rt:
            if (n.byteLength != t.byteLength || n.byteOffset != t.byteOffset)
              return false;
            n = n.buffer, t = t.buffer;
          case kt:
            return !(n.byteLength != t.byteLength || !o(new De(n), new De(t)));
          case Yt:
          case Zt:
          case Jt:
            return bn(+n, +t);
          case we:
            return n.name == t.name && n.message == t.message;
          case Xt:
          case Qt2:
            return n == t + "";
          case yn:
            var c = qr;
          case Sn:
            var l = r & Et;
            if (c || (c = Se), n.size != t.size && !l)
              return false;
            var v3 = f2.get(n);
            if (v3)
              return v3 == t;
            r |= ve2, f2.set(n, t);
            var _3 = Su(c(n), c(t), r, s, o, f2);
            return f2.delete(n), _3;
          case Ae:
            if (ie2)
              return ie2.call(n) == ie2.call(t);
        }
        return false;
      }
      function nh(n, t, e, r, s, o) {
        var f2 = e & Et, c = li(n), l = c.length, v3 = li(t), _3 = v3.length;
        if (l != _3 && !f2)
          return false;
        for (var m2 = l; m2--; ) {
          var P2 = c[m2];
          if (!(f2 ? P2 in t : F2.call(t, P2)))
            return false;
        }
        var I2 = o.get(n), E2 = o.get(t);
        if (I2 && E2)
          return I2 == t && E2 == n;
        var b4 = true;
        o.set(n, t), o.set(t, n);
        for (var y4 = f2; ++m2 < l; ) {
          P2 = c[m2];
          var D4 = n[P2], N3 = t[P2];
          if (r)
            var dn = f2 ? r(N3, D4, P2, t, n, o) : r(D4, N3, P2, n, t, o);
          if (!(dn === i ? D4 === N3 || s(D4, N3, e, r, o) : dn)) {
            b4 = false;
            break;
          }
          y4 || (y4 = P2 == "constructor");
        }
        if (b4 && !y4) {
          var sn = n.constructor, gn = t.constructor;
          sn != gn && "constructor" in n && "constructor" in t && !(typeof sn == "function" && sn instanceof sn && typeof gn == "function" && gn instanceof gn) && (b4 = false);
        }
        return o.delete(n), o.delete(t), b4;
      }
      function Yn(n) {
        return Pi(Du(n, i, Bu), n + "");
      }
      function li(n) {
        return Zs(n, V3, vi);
      }
      function pi(n) {
        return Zs(n, on, Ou);
      }
      var di = Fe ? function(n) {
        return Fe.get(n);
      } : Di;
      function je2(n) {
        for (var t = n.name + "", e = Ut[t], r = F2.call(Ut, t) ? e.length : 0; r--; ) {
          var s = e[r], o = s.func;
          if (o == null || o == n)
            return s.name;
        }
        return t;
      }
      function qt2(n) {
        var t = F2.call(a, "placeholder") ? a : n;
        return t.placeholder;
      }
      function x() {
        var n = a.iteratee || Ti;
        return n = n === Ti ? Qs : n, arguments.length ? n(arguments[0], arguments[1]) : n;
      }
      function nr(n, t) {
        var e = n.__data__;
        return oh(t) ? e[typeof t == "string" ? "string" : "hash"] : e.map;
      }
      function gi(n) {
        for (var t = V3(n), e = t.length; e--; ) {
          var r = t[e], s = n[r];
          t[e] = [r, s, Tu(s)];
        }
        return t;
      }
      function mt(n, t) {
        var e = hf(n, t);
        return Xs(e) ? e : i;
      }
      function th(n) {
        var t = F2.call(n, pt2), e = n[pt2];
        try {
          n[pt2] = i;
          var r = true;
        } catch {
        }
        var s = Te.call(n);
        return r && (t ? n[pt2] = e : delete n[pt2]), s;
      }
      var vi = Gr ? function(n) {
        return n == null ? [] : (n = M3(n), jn(Gr(n), function(t) {
          return Hs.call(n, t);
        }));
      } : Hi, Ou = Gr ? function(n) {
        for (var t = []; n; )
          nt(t, vi(n)), n = He(n);
        return t;
      } : Hi, tn = en;
      (zr2 && tn(new zr2(new ArrayBuffer(1))) != Rt || te2 && tn(new te2()) != yn || Kr && tn(Kr.resolve()) != zi || $t3 && tn(new $t3()) != Sn || ee && tn(new ee()) != Vt2) && (tn = function(n) {
        var t = en(n), e = t == qn ? n.constructor : i, r = e ? wt(e) : "";
        if (r)
          switch (r) {
            case Uf:
              return Rt;
            case Wf:
              return yn;
            case Ff:
              return zi;
            case Mf:
              return Sn;
            case qf:
              return Vt2;
          }
        return t;
      });
      function eh(n, t, e) {
        for (var r = -1, s = e.length; ++r < s; ) {
          var o = e[r], f2 = o.size;
          switch (o.type) {
            case "drop":
              n += f2;
              break;
            case "dropRight":
              t -= f2;
              break;
            case "take":
              t = nn(t, n + f2);
              break;
            case "takeRight":
              n = Q3(n, t - f2);
              break;
          }
        }
        return { start: n, end: t };
      }
      function rh(n) {
        var t = n.match(ao);
        return t ? t[1].split(oo) : [];
      }
      function Ru(n, t, e) {
        t = st2(t, n);
        for (var r = -1, s = t.length, o = false; ++r < s; ) {
          var f2 = Wn(t[r]);
          if (!(o = n != null && e(n, f2)))
            break;
          n = n[f2];
        }
        return o || ++r != s ? o : (s = n == null ? 0 : n.length, !!s && ar(s) && Zn(f2, s) && (O3(n) || Pt(n)));
      }
      function ih(n) {
        var t = n.length, e = new n.constructor(t);
        return t && typeof n[0] == "string" && F2.call(n, "index") && (e.index = n.index, e.input = n.input), e;
      }
      function bu(n) {
        return typeof n.constructor == "function" && !he2(n) ? Wt2(He(n)) : {};
      }
      function sh(n, t, e) {
        var r = n.constructor;
        switch (t) {
          case kt:
            return fi(n);
          case Yt:
          case Zt:
            return new r(+n);
          case Rt:
            return Bc(n, e);
          case gr:
          case vr:
          case _r:
          case mr:
          case wr:
          case Pr:
          case Ar:
          case Cr:
          case Ir:
            return lu(n, e);
          case yn:
            return new r();
          case Jt:
          case Qt2:
            return new r(n);
          case Xt:
            return Gc(n);
          case Sn:
            return new r();
          case Ae:
            return zc(n);
        }
      }
      function uh(n, t) {
        var e = t.length;
        if (!e)
          return n;
        var r = e - 1;
        return t[r] = (e > 1 ? "& " : "") + t[r], t = t.join(e > 2 ? ", " : " "), n.replace(uo, `{
/* [wrapped with ` + t + `] */
`);
      }
      function ah(n) {
        return O3(n) || Pt(n) || !!(Ns && n && n[Ns]);
      }
      function Zn(n, t) {
        var e = typeof n;
        return t = t != null ? t : kn, !!t && (e == "number" || e != "symbol" && mo.test(n)) && n > -1 && n % 1 == 0 && n < t;
      }
      function rn(n, t, e) {
        if (!K(e))
          return false;
        var r = typeof t;
        return (r == "number" ? an2(e) && Zn(t, e.length) : r == "string" && t in e) ? bn(e[t], n) : false;
      }
      function _i(n, t) {
        if (O3(n))
          return false;
        var e = typeof n;
        return e == "number" || e == "symbol" || e == "boolean" || n == null || pn(n) ? true : eo.test(n) || !to.test(n) || t != null && n in M3(t);
      }
      function oh(n) {
        var t = typeof n;
        return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? n !== "__proto__" : n === null;
      }
      function mi(n) {
        var t = je2(n), e = a[t];
        if (typeof e != "function" || !(t in H2.prototype))
          return false;
        if (n === e)
          return true;
        var r = di(e);
        return !!r && n === r[0];
      }
      function fh(n) {
        return !!Ts && Ts in n;
      }
      var ch = Re2 ? Jn : Ni;
      function he2(n) {
        var t = n && n.constructor, e = typeof t == "function" && t.prototype || Nt;
        return n === e;
      }
      function Tu(n) {
        return n === n && !K(n);
      }
      function Lu(n, t) {
        return function(e) {
          return e == null ? false : e[n] === t && (t !== i || n in M3(e));
        };
      }
      function hh(n) {
        var t = sr(n, function(r) {
          return e.size === pr && e.clear(), r;
        }), e = t.cache;
        return t;
      }
      function lh(n, t) {
        var e = n[1], r = t[1], s = e | r, o = s < (vn | ct | Mn2), f2 = r == Mn2 && e == Dn || r == Mn2 && e == Kt2 && n[7].length <= t[8] || r == (Mn2 | Kt2) && t[7].length <= t[8] && e == Dn;
        if (!(o || f2))
          return n;
        r & vn && (n[2] = t[2], s |= e & vn ? 0 : qi);
        var c = t[3];
        if (c) {
          var l = n[3];
          n[3] = l ? du(l, c, t[4]) : c, n[4] = l ? tt(n[3], It) : t[4];
        }
        return c = t[5], c && (l = n[5], n[5] = l ? gu(l, c, t[6]) : c, n[6] = l ? tt(n[5], It) : t[6]), c = t[7], c && (n[7] = c), r & Mn2 && (n[8] = n[8] == null ? t[8] : nn(n[8], t[8])), n[9] == null && (n[9] = t[9]), n[0] = t[0], n[1] = s, n;
      }
      function ph(n) {
        var t = [];
        if (n != null)
          for (var e in M3(n))
            t.push(e);
        return t;
      }
      function dh(n) {
        return Te.call(n);
      }
      function Du(n, t, e) {
        return t = Q3(t === i ? n.length - 1 : t, 0), function() {
          for (var r = arguments, s = -1, o = Q3(r.length - t, 0), f2 = p3(o); ++s < o; )
            f2[s] = r[t + s];
          s = -1;
          for (var c = p3(t + 1); ++s < t; )
            c[s] = r[s];
          return c[t] = e(f2), cn2(n, this, c);
        };
      }
      function Hu(n, t) {
        return t.length < 2 ? n : _t(n, Cn(t, 0, -1));
      }
      function gh(n, t) {
        for (var e = n.length, r = nn(t.length, e), s = un2(n); r--; ) {
          var o = t[r];
          n[r] = Zn(o, e) ? s[o] : i;
        }
        return n;
      }
      function wi(n, t) {
        if (!(t === "constructor" && typeof n[t] == "function") && t != "__proto__")
          return n[t];
      }
      var Nu = Uu(iu), le2 = bf || function(n, t) {
        return k.setTimeout(n, t);
      }, Pi = Uu(Wc);
      function $u(n, t, e) {
        var r = t + "";
        return Pi(n, uh(r, vh(rh(r), e)));
      }
      function Uu(n) {
        var t = 0, e = 0;
        return function() {
          var r = Hf(), s = Na - (r - e);
          if (e = r, s > 0) {
            if (++t >= Ha)
              return arguments[0];
          } else
            t = 0;
          return n.apply(i, arguments);
        };
      }
      function tr(n, t) {
        var e = -1, r = n.length, s = r - 1;
        for (t = t === i ? r : t; ++e < t; ) {
          var o = ei(e, s), f2 = n[o];
          n[o] = n[e], n[e] = f2;
        }
        return n.length = t, n;
      }
      var Wu = hh(function(n) {
        var t = [];
        return n.charCodeAt(0) === 46 && t.push(""), n.replace(ro, function(e, r, s, o) {
          t.push(s ? o.replace(ho, "$1") : r || e);
        }), t;
      });
      function Wn(n) {
        if (typeof n == "string" || pn(n))
          return n;
        var t = n + "";
        return t == "0" && 1 / n == -ht ? "-0" : t;
      }
      function wt(n) {
        if (n != null) {
          try {
            return be.call(n);
          } catch {
          }
          try {
            return n + "";
          } catch {
          }
        }
        return "";
      }
      function vh(n, t) {
        return mn(qa, function(e) {
          var r = "_." + e[0];
          t & e[1] && !Ee2(n, r) && n.push(r);
        }), n.sort();
      }
      function Fu(n) {
        if (n instanceof H2)
          return n.clone();
        var t = new Pn(n.__wrapped__, n.__chain__);
        return t.__actions__ = un2(n.__actions__), t.__index__ = n.__index__, t.__values__ = n.__values__, t;
      }
      function _h(n, t, e) {
        (e ? rn(n, t, e) : t === i) ? t = 1 : t = Q3(R(t), 0);
        var r = n == null ? 0 : n.length;
        if (!r || t < 1)
          return [];
        for (var s = 0, o = 0, f2 = p3(Ue(r / t)); s < r; )
          f2[o++] = Cn(n, s, s += t);
        return f2;
      }
      function mh(n) {
        for (var t = -1, e = n == null ? 0 : n.length, r = 0, s = []; ++t < e; ) {
          var o = n[t];
          o && (s[r++] = o);
        }
        return s;
      }
      function wh() {
        var n = arguments.length;
        if (!n)
          return [];
        for (var t = p3(n - 1), e = arguments[0], r = n; r--; )
          t[r - 1] = arguments[r];
        return nt(O3(e) ? un2(e) : [e], j2(t, 1));
      }
      var Ph = L2(function(n, t) {
        return Z(n) ? ue(n, j2(t, 1, Z, true)) : [];
      }), Ah = L2(function(n, t) {
        var e = In(t);
        return Z(e) && (e = i), Z(n) ? ue(n, j2(t, 1, Z, true), x(e, 2)) : [];
      }), Ch = L2(function(n, t) {
        var e = In(t);
        return Z(e) && (e = i), Z(n) ? ue(n, j2(t, 1, Z, true), i, e) : [];
      });
      function Ih(n, t, e) {
        var r = n == null ? 0 : n.length;
        return r ? (t = e || t === i ? 1 : R(t), Cn(n, t < 0 ? 0 : t, r)) : [];
      }
      function xh(n, t, e) {
        var r = n == null ? 0 : n.length;
        return r ? (t = e || t === i ? 1 : R(t), t = r - t, Cn(n, 0, t < 0 ? 0 : t)) : [];
      }
      function Eh(n, t) {
        return n && n.length ? Ze(n, x(t, 3), true, true) : [];
      }
      function yh(n, t) {
        return n && n.length ? Ze(n, x(t, 3), true) : [];
      }
      function Sh(n, t, e, r) {
        var s = n == null ? 0 : n.length;
        return s ? (e && typeof e != "number" && rn(n, t, e) && (e = 0, r = s), wc(n, t, e, r)) : [];
      }
      function Mu(n, t, e) {
        var r = n == null ? 0 : n.length;
        if (!r)
          return -1;
        var s = e == null ? 0 : R(e);
        return s < 0 && (s = Q3(r + s, 0)), ye(n, x(t, 3), s);
      }
      function qu(n, t, e) {
        var r = n == null ? 0 : n.length;
        if (!r)
          return -1;
        var s = r - 1;
        return e !== i && (s = R(e), s = e < 0 ? Q3(r + s, 0) : nn(s, r - 1)), ye(n, x(t, 3), s, true);
      }
      function Bu(n) {
        var t = n == null ? 0 : n.length;
        return t ? j2(n, 1) : [];
      }
      function Oh(n) {
        var t = n == null ? 0 : n.length;
        return t ? j2(n, ht) : [];
      }
      function Rh(n, t) {
        var e = n == null ? 0 : n.length;
        return e ? (t = t === i ? 1 : R(t), j2(n, t)) : [];
      }
      function bh(n) {
        for (var t = -1, e = n == null ? 0 : n.length, r = {}; ++t < e; ) {
          var s = n[t];
          r[s[0]] = s[1];
        }
        return r;
      }
      function Gu(n) {
        return n && n.length ? n[0] : i;
      }
      function Th(n, t, e) {
        var r = n == null ? 0 : n.length;
        if (!r)
          return -1;
        var s = e == null ? 0 : R(e);
        return s < 0 && (s = Q3(r + s, 0)), Tt(n, t, s);
      }
      function Lh(n) {
        var t = n == null ? 0 : n.length;
        return t ? Cn(n, 0, -1) : [];
      }
      var Dh = L2(function(n) {
        var t = G3(n, ai);
        return t.length && t[0] === n[0] ? Vr(t) : [];
      }), Hh = L2(function(n) {
        var t = In(n), e = G3(n, ai);
        return t === In(e) ? t = i : e.pop(), e.length && e[0] === n[0] ? Vr(e, x(t, 2)) : [];
      }), Nh = L2(function(n) {
        var t = In(n), e = G3(n, ai);
        return t = typeof t == "function" ? t : i, t && e.pop(), e.length && e[0] === n[0] ? Vr(e, i, t) : [];
      });
      function $h(n, t) {
        return n == null ? "" : Lf.call(n, t);
      }
      function In(n) {
        var t = n == null ? 0 : n.length;
        return t ? n[t - 1] : i;
      }
      function Uh(n, t, e) {
        var r = n == null ? 0 : n.length;
        if (!r)
          return -1;
        var s = r;
        return e !== i && (s = R(e), s = s < 0 ? Q3(r + s, 0) : nn(s, r - 1)), t === t ? vf(n, t, s) : ye(n, Is, s, true);
      }
      function Wh(n, t) {
        return n && n.length ? nu(n, R(t)) : i;
      }
      var Fh = L2(zu);
      function zu(n, t) {
        return n && n.length && t && t.length ? ti(n, t) : n;
      }
      function Mh(n, t, e) {
        return n && n.length && t && t.length ? ti(n, t, x(e, 2)) : n;
      }
      function qh(n, t, e) {
        return n && n.length && t && t.length ? ti(n, t, i, e) : n;
      }
      var Bh = Yn(function(n, t) {
        var e = n == null ? 0 : n.length, r = Zr(n, t);
        return ru(n, G3(t, function(s) {
          return Zn(s, e) ? +s : s;
        }).sort(pu)), r;
      });
      function Gh(n, t) {
        var e = [];
        if (!(n && n.length))
          return e;
        var r = -1, s = [], o = n.length;
        for (t = x(t, 3); ++r < o; ) {
          var f2 = n[r];
          t(f2, r, n) && (e.push(f2), s.push(r));
        }
        return ru(n, s), e;
      }
      function Ai(n) {
        return n == null ? n : $f.call(n);
      }
      function zh(n, t, e) {
        var r = n == null ? 0 : n.length;
        return r ? (e && typeof e != "number" && rn(n, t, e) ? (t = 0, e = r) : (t = t == null ? 0 : R(t), e = e === i ? r : R(e)), Cn(n, t, e)) : [];
      }
      function Kh(n, t) {
        return Ye2(n, t);
      }
      function Yh(n, t, e) {
        return ii(n, t, x(e, 2));
      }
      function Zh(n, t) {
        var e = n == null ? 0 : n.length;
        if (e) {
          var r = Ye2(n, t);
          if (r < e && bn(n[r], t))
            return r;
        }
        return -1;
      }
      function Jh(n, t) {
        return Ye2(n, t, true);
      }
      function Xh(n, t, e) {
        return ii(n, t, x(e, 2), true);
      }
      function Qh(n, t) {
        var e = n == null ? 0 : n.length;
        if (e) {
          var r = Ye2(n, t, true) - 1;
          if (bn(n[r], t))
            return r;
        }
        return -1;
      }
      function Vh(n) {
        return n && n.length ? su(n) : [];
      }
      function kh(n, t) {
        return n && n.length ? su(n, x(t, 2)) : [];
      }
      function jh(n) {
        var t = n == null ? 0 : n.length;
        return t ? Cn(n, 1, t) : [];
      }
      function nl(n, t, e) {
        return n && n.length ? (t = e || t === i ? 1 : R(t), Cn(n, 0, t < 0 ? 0 : t)) : [];
      }
      function tl(n, t, e) {
        var r = n == null ? 0 : n.length;
        return r ? (t = e || t === i ? 1 : R(t), t = r - t, Cn(n, t < 0 ? 0 : t, r)) : [];
      }
      function el(n, t) {
        return n && n.length ? Ze(n, x(t, 3), false, true) : [];
      }
      function rl(n, t) {
        return n && n.length ? Ze(n, x(t, 3)) : [];
      }
      var il = L2(function(n) {
        return it(j2(n, 1, Z, true));
      }), sl = L2(function(n) {
        var t = In(n);
        return Z(t) && (t = i), it(j2(n, 1, Z, true), x(t, 2));
      }), ul = L2(function(n) {
        var t = In(n);
        return t = typeof t == "function" ? t : i, it(j2(n, 1, Z, true), i, t);
      });
      function al(n) {
        return n && n.length ? it(n) : [];
      }
      function ol(n, t) {
        return n && n.length ? it(n, x(t, 2)) : [];
      }
      function fl(n, t) {
        return t = typeof t == "function" ? t : i, n && n.length ? it(n, i, t) : [];
      }
      function Ci(n) {
        if (!(n && n.length))
          return [];
        var t = 0;
        return n = jn(n, function(e) {
          if (Z(e))
            return t = Q3(e.length, t), true;
        }), Fr(t, function(e) {
          return G3(n, $r(e));
        });
      }
      function Ku(n, t) {
        if (!(n && n.length))
          return [];
        var e = Ci(n);
        return t == null ? e : G3(e, function(r) {
          return cn2(t, i, r);
        });
      }
      var cl = L2(function(n, t) {
        return Z(n) ? ue(n, t) : [];
      }), hl = L2(function(n) {
        return ui(jn(n, Z));
      }), ll = L2(function(n) {
        var t = In(n);
        return Z(t) && (t = i), ui(jn(n, Z), x(t, 2));
      }), pl = L2(function(n) {
        var t = In(n);
        return t = typeof t == "function" ? t : i, ui(jn(n, Z), i, t);
      }), dl = L2(Ci);
      function gl(n, t) {
        return fu(n || [], t || [], se2);
      }
      function vl(n, t) {
        return fu(n || [], t || [], fe);
      }
      var _l = L2(function(n) {
        var t = n.length, e = t > 1 ? n[t - 1] : i;
        return e = typeof e == "function" ? (n.pop(), e) : i, Ku(n, e);
      });
      function Yu(n) {
        var t = a(n);
        return t.__chain__ = true, t;
      }
      function ml(n, t) {
        return t(n), n;
      }
      function er2(n, t) {
        return t(n);
      }
      var wl = Yn(function(n) {
        var t = n.length, e = t ? n[0] : 0, r = this.__wrapped__, s = function(o) {
          return Zr(o, n);
        };
        return t > 1 || this.__actions__.length || !(r instanceof H2) || !Zn(e) ? this.thru(s) : (r = r.slice(e, +e + (t ? 1 : 0)), r.__actions__.push({ func: er2, args: [s], thisArg: i }), new Pn(r, this.__chain__).thru(function(o) {
          return t && !o.length && o.push(i), o;
        }));
      });
      function Pl() {
        return Yu(this);
      }
      function Al() {
        return new Pn(this.value(), this.__chain__);
      }
      function Cl() {
        this.__values__ === i && (this.__values__ = ua(this.value()));
        var n = this.__index__ >= this.__values__.length, t = n ? i : this.__values__[this.__index__++];
        return { done: n, value: t };
      }
      function Il() {
        return this;
      }
      function xl(n) {
        for (var t, e = this; e instanceof qe; ) {
          var r = Fu(e);
          r.__index__ = 0, r.__values__ = i, t ? s.__wrapped__ = r : t = r;
          var s = r;
          e = e.__wrapped__;
        }
        return s.__wrapped__ = n, t;
      }
      function El() {
        var n = this.__wrapped__;
        if (n instanceof H2) {
          var t = n;
          return this.__actions__.length && (t = new H2(this)), t = t.reverse(), t.__actions__.push({ func: er2, args: [Ai], thisArg: i }), new Pn(t, this.__chain__);
        }
        return this.thru(Ai);
      }
      function yl() {
        return ou(this.__wrapped__, this.__actions__);
      }
      var Sl = Je2(function(n, t, e) {
        F2.call(n, e) ? ++n[e] : zn2(n, e, 1);
      });
      function Ol(n, t, e) {
        var r = O3(n) ? As : mc;
        return e && rn(n, t, e) && (t = i), r(n, x(t, 3));
      }
      function Rl(n, t) {
        var e = O3(n) ? jn : Ks;
        return e(n, x(t, 3));
      }
      var bl = wu(Mu), Tl = wu(qu);
      function Ll(n, t) {
        return j2(rr(n, t), 1);
      }
      function Dl(n, t) {
        return j2(rr(n, t), ht);
      }
      function Hl(n, t, e) {
        return e = e === i ? 1 : R(e), j2(rr(n, t), e);
      }
      function Zu(n, t) {
        var e = O3(n) ? mn : rt;
        return e(n, x(t, 3));
      }
      function Ju(n, t) {
        var e = O3(n) ? ko : zs;
        return e(n, x(t, 3));
      }
      var Nl = Je2(function(n, t, e) {
        F2.call(n, e) ? n[e].push(t) : zn2(n, e, [t]);
      });
      function $l(n, t, e, r) {
        n = an2(n) ? n : Gt2(n), e = e && !r ? R(e) : 0;
        var s = n.length;
        return e < 0 && (e = Q3(s + e, 0)), or(n) ? e <= s && n.indexOf(t, e) > -1 : !!s && Tt(n, t, e) > -1;
      }
      var Ul = L2(function(n, t, e) {
        var r = -1, s = typeof t == "function", o = an2(n) ? p3(n.length) : [];
        return rt(n, function(f2) {
          o[++r] = s ? cn2(t, f2, e) : ae2(f2, t, e);
        }), o;
      }), Wl = Je2(function(n, t, e) {
        zn2(n, e, t);
      });
      function rr(n, t) {
        var e = O3(n) ? G3 : Vs;
        return e(n, x(t, 3));
      }
      function Fl(n, t, e, r) {
        return n == null ? [] : (O3(t) || (t = t == null ? [] : [t]), e = r ? i : e, O3(e) || (e = e == null ? [] : [e]), tu(n, t, e));
      }
      var Ml = Je2(function(n, t, e) {
        n[e ? 0 : 1].push(t);
      }, function() {
        return [[], []];
      });
      function ql(n, t, e) {
        var r = O3(n) ? Hr : Es, s = arguments.length < 3;
        return r(n, x(t, 4), e, s, rt);
      }
      function Bl(n, t, e) {
        var r = O3(n) ? jo : Es, s = arguments.length < 3;
        return r(n, x(t, 4), e, s, zs);
      }
      function Gl(n, t) {
        var e = O3(n) ? jn : Ks;
        return e(n, ur(x(t, 3)));
      }
      function zl(n) {
        var t = O3(n) ? Ms : $c;
        return t(n);
      }
      function Kl(n, t, e) {
        (e ? rn(n, t, e) : t === i) ? t = 1 : t = R(t);
        var r = O3(n) ? pc : Uc;
        return r(n, t);
      }
      function Yl(n) {
        var t = O3(n) ? dc : Fc;
        return t(n);
      }
      function Zl(n) {
        if (n == null)
          return 0;
        if (an2(n))
          return or(n) ? Dt(n) : n.length;
        var t = tn(n);
        return t == yn || t == Sn ? n.size : jr(n).length;
      }
      function Jl(n, t, e) {
        var r = O3(n) ? Nr : Mc;
        return e && rn(n, t, e) && (t = i), r(n, x(t, 3));
      }
      var Xl = L2(function(n, t) {
        if (n == null)
          return [];
        var e = t.length;
        return e > 1 && rn(n, t[0], t[1]) ? t = [] : e > 2 && rn(t[0], t[1], t[2]) && (t = [t[0]]), tu(n, j2(t, 1), []);
      }), ir = Rf || function() {
        return k.Date.now();
      };
      function Ql(n, t) {
        if (typeof t != "function")
          throw new wn($3);
        return n = R(n), function() {
          if (--n < 1)
            return t.apply(this, arguments);
        };
      }
      function Xu(n, t, e) {
        return t = e ? i : t, t = n && t == null ? n.length : t, Kn(n, Mn2, i, i, i, i, t);
      }
      function Qu(n, t) {
        var e;
        if (typeof t != "function")
          throw new wn($3);
        return n = R(n), function() {
          return --n > 0 && (e = t.apply(this, arguments)), n <= 1 && (t = i), e;
        };
      }
      var Ii = L2(function(n, t, e) {
        var r = vn;
        if (e.length) {
          var s = tt(e, qt2(Ii));
          r |= Hn;
        }
        return Kn(n, r, t, e, s);
      }), Vu = L2(function(n, t, e) {
        var r = vn | ct;
        if (e.length) {
          var s = tt(e, qt2(Vu));
          r |= Hn;
        }
        return Kn(t, r, n, e, s);
      });
      function ku(n, t, e) {
        t = e ? i : t;
        var r = Kn(n, Dn, i, i, i, i, i, t);
        return r.placeholder = ku.placeholder, r;
      }
      function ju(n, t, e) {
        t = e ? i : t;
        var r = Kn(n, yt, i, i, i, i, i, t);
        return r.placeholder = ju.placeholder, r;
      }
      function na(n, t, e) {
        var r, s, o, f2, c, l, v3 = 0, _3 = false, m2 = false, P2 = true;
        if (typeof n != "function")
          throw new wn($3);
        t = xn(t) || 0, K(e) && (_3 = !!e.leading, m2 = "maxWait" in e, o = m2 ? Q3(xn(e.maxWait) || 0, t) : o, P2 = "trailing" in e ? !!e.trailing : P2);
        function I2(J) {
          var Tn = r, Qn = s;
          return r = s = i, v3 = J, f2 = n.apply(Qn, Tn), f2;
        }
        function E2(J) {
          return v3 = J, c = le2(D4, t), _3 ? I2(J) : f2;
        }
        function b4(J) {
          var Tn = J - l, Qn = J - v3, wa = t - Tn;
          return m2 ? nn(wa, o - Qn) : wa;
        }
        function y4(J) {
          var Tn = J - l, Qn = J - v3;
          return l === i || Tn >= t || Tn < 0 || m2 && Qn >= o;
        }
        function D4() {
          var J = ir();
          if (y4(J))
            return N3(J);
          c = le2(D4, b4(J));
        }
        function N3(J) {
          return c = i, P2 && r ? I2(J) : (r = s = i, f2);
        }
        function dn() {
          c !== i && cu(c), v3 = 0, r = l = s = c = i;
        }
        function sn() {
          return c === i ? f2 : N3(ir());
        }
        function gn() {
          var J = ir(), Tn = y4(J);
          if (r = arguments, s = this, l = J, Tn) {
            if (c === i)
              return E2(l);
            if (m2)
              return cu(c), c = le2(D4, t), I2(l);
          }
          return c === i && (c = le2(D4, t)), f2;
        }
        return gn.cancel = dn, gn.flush = sn, gn;
      }
      var Vl = L2(function(n, t) {
        return Gs(n, 1, t);
      }), kl = L2(function(n, t, e) {
        return Gs(n, xn(t) || 0, e);
      });
      function jl(n) {
        return Kn(n, dr);
      }
      function sr(n, t) {
        if (typeof n != "function" || t != null && typeof t != "function")
          throw new wn($3);
        var e = function() {
          var r = arguments, s = t ? t.apply(this, r) : r[0], o = e.cache;
          if (o.has(s))
            return o.get(s);
          var f2 = n.apply(this, r);
          return e.cache = o.set(s, f2) || o, f2;
        };
        return e.cache = new (sr.Cache || Gn)(), e;
      }
      sr.Cache = Gn;
      function ur(n) {
        if (typeof n != "function")
          throw new wn($3);
        return function() {
          var t = arguments;
          switch (t.length) {
            case 0:
              return !n.call(this);
            case 1:
              return !n.call(this, t[0]);
            case 2:
              return !n.call(this, t[0], t[1]);
            case 3:
              return !n.call(this, t[0], t[1], t[2]);
          }
          return !n.apply(this, t);
        };
      }
      function np(n) {
        return Qu(2, n);
      }
      var tp = qc(function(n, t) {
        t = t.length == 1 && O3(t[0]) ? G3(t[0], hn(x())) : G3(j2(t, 1), hn(x()));
        var e = t.length;
        return L2(function(r) {
          for (var s = -1, o = nn(r.length, e); ++s < o; )
            r[s] = t[s].call(this, r[s]);
          return cn2(n, this, r);
        });
      }), xi = L2(function(n, t) {
        var e = tt(t, qt2(xi));
        return Kn(n, Hn, i, t, e);
      }), ta = L2(function(n, t) {
        var e = tt(t, qt2(ta));
        return Kn(n, St, i, t, e);
      }), ep = Yn(function(n, t) {
        return Kn(n, Kt2, i, i, i, t);
      });
      function rp(n, t) {
        if (typeof n != "function")
          throw new wn($3);
        return t = t === i ? t : R(t), L2(n, t);
      }
      function ip(n, t) {
        if (typeof n != "function")
          throw new wn($3);
        return t = t == null ? 0 : Q3(R(t), 0), L2(function(e) {
          var r = e[t], s = ut2(e, 0, t);
          return r && nt(s, r), cn2(n, this, s);
        });
      }
      function sp(n, t, e) {
        var r = true, s = true;
        if (typeof n != "function")
          throw new wn($3);
        return K(e) && (r = "leading" in e ? !!e.leading : r, s = "trailing" in e ? !!e.trailing : s), na(n, t, { leading: r, maxWait: t, trailing: s });
      }
      function up(n) {
        return Xu(n, 1);
      }
      function ap(n, t) {
        return xi(oi(t), n);
      }
      function op() {
        if (!arguments.length)
          return [];
        var n = arguments[0];
        return O3(n) ? n : [n];
      }
      function fp(n) {
        return An(n, xt2);
      }
      function cp(n, t) {
        return t = typeof t == "function" ? t : i, An(n, xt2, t);
      }
      function hp(n) {
        return An(n, Ln | xt2);
      }
      function lp(n, t) {
        return t = typeof t == "function" ? t : i, An(n, Ln | xt2, t);
      }
      function pp(n, t) {
        return t == null || Bs(n, t, V3(t));
      }
      function bn(n, t) {
        return n === t || n !== n && t !== t;
      }
      var dp = ke(Qr), gp = ke(function(n, t) {
        return n >= t;
      }), Pt = Js(function() {
        return arguments;
      }()) ? Js : function(n) {
        return Y(n) && F2.call(n, "callee") && !Hs.call(n, "callee");
      }, O3 = p3.isArray, vp = gs ? hn(gs) : xc;
      function an2(n) {
        return n != null && ar(n.length) && !Jn(n);
      }
      function Z(n) {
        return Y(n) && an2(n);
      }
      function _p(n) {
        return n === true || n === false || Y(n) && en(n) == Yt;
      }
      var at = Tf || Ni, mp = vs ? hn(vs) : Ec;
      function wp(n) {
        return Y(n) && n.nodeType === 1 && !pe2(n);
      }
      function Pp(n) {
        if (n == null)
          return true;
        if (an2(n) && (O3(n) || typeof n == "string" || typeof n.splice == "function" || at(n) || Bt2(n) || Pt(n)))
          return !n.length;
        var t = tn(n);
        if (t == yn || t == Sn)
          return !n.size;
        if (he2(n))
          return !jr(n).length;
        for (var e in n)
          if (F2.call(n, e))
            return false;
        return true;
      }
      function Ap(n, t) {
        return oe3(n, t);
      }
      function Cp(n, t, e) {
        e = typeof e == "function" ? e : i;
        var r = e ? e(n, t) : i;
        return r === i ? oe3(n, t, i, e) : !!r;
      }
      function Ei(n) {
        if (!Y(n))
          return false;
        var t = en(n);
        return t == we || t == Ga || typeof n.message == "string" && typeof n.name == "string" && !pe2(n);
      }
      function Ip(n) {
        return typeof n == "number" && $s(n);
      }
      function Jn(n) {
        if (!K(n))
          return false;
        var t = en(n);
        return t == Pe || t == Gi || t == Ba || t == Ka;
      }
      function ea(n) {
        return typeof n == "number" && n == R(n);
      }
      function ar(n) {
        return typeof n == "number" && n > -1 && n % 1 == 0 && n <= kn;
      }
      function K(n) {
        var t = typeof n;
        return n != null && (t == "object" || t == "function");
      }
      function Y(n) {
        return n != null && typeof n == "object";
      }
      var ra = _s ? hn(_s) : Sc;
      function xp(n, t) {
        return n === t || kr(n, t, gi(t));
      }
      function Ep(n, t, e) {
        return e = typeof e == "function" ? e : i, kr(n, t, gi(t), e);
      }
      function yp(n) {
        return ia(n) && n != +n;
      }
      function Sp(n) {
        if (ch(n))
          throw new S4(T);
        return Xs(n);
      }
      function Op(n) {
        return n === null;
      }
      function Rp(n) {
        return n == null;
      }
      function ia(n) {
        return typeof n == "number" || Y(n) && en(n) == Jt;
      }
      function pe2(n) {
        if (!Y(n) || en(n) != qn)
          return false;
        var t = He(n);
        if (t === null)
          return true;
        var e = F2.call(t, "constructor") && t.constructor;
        return typeof e == "function" && e instanceof e && be.call(e) == Ef;
      }
      var yi = ms ? hn(ms) : Oc;
      function bp(n) {
        return ea(n) && n >= -kn && n <= kn;
      }
      var sa = ws ? hn(ws) : Rc;
      function or(n) {
        return typeof n == "string" || !O3(n) && Y(n) && en(n) == Qt2;
      }
      function pn(n) {
        return typeof n == "symbol" || Y(n) && en(n) == Ae;
      }
      var Bt2 = Ps ? hn(Ps) : bc;
      function Tp(n) {
        return n === i;
      }
      function Lp(n) {
        return Y(n) && tn(n) == Vt2;
      }
      function Dp(n) {
        return Y(n) && en(n) == Za;
      }
      var Hp = ke(ni), Np = ke(function(n, t) {
        return n <= t;
      });
      function ua(n) {
        if (!n)
          return [];
        if (an2(n))
          return or(n) ? On(n) : un2(n);
        if (ne3 && n[ne3])
          return pf(n[ne3]());
        var t = tn(n), e = t == yn ? qr : t == Sn ? Se : Gt2;
        return e(n);
      }
      function Xn(n) {
        if (!n)
          return n === 0 ? n : 0;
        if (n = xn(n), n === ht || n === -ht) {
          var t = n < 0 ? -1 : 1;
          return t * Wa;
        }
        return n === n ? n : 0;
      }
      function R(n) {
        var t = Xn(n), e = t % 1;
        return t === t ? e ? t - e : t : 0;
      }
      function aa(n) {
        return n ? vt(R(n), 0, Nn) : 0;
      }
      function xn(n) {
        if (typeof n == "number")
          return n;
        if (pn(n))
          return _e2;
        if (K(n)) {
          var t = typeof n.valueOf == "function" ? n.valueOf() : n;
          n = K(t) ? t + "" : t;
        }
        if (typeof n != "string")
          return n === 0 ? n : +n;
        n = ys(n);
        var e = go.test(n);
        return e || _o.test(n) ? Xo(n.slice(2), e ? 2 : 8) : po.test(n) ? _e2 : +n;
      }
      function oa(n) {
        return Un(n, on(n));
      }
      function $p(n) {
        return n ? vt(R(n), -kn, kn) : n === 0 ? n : 0;
      }
      function W2(n) {
        return n == null ? "" : ln(n);
      }
      var Up = Ft2(function(n, t) {
        if (he2(t) || an2(t)) {
          Un(t, V3(t), n);
          return;
        }
        for (var e in t)
          F2.call(t, e) && se2(n, e, t[e]);
      }), fa = Ft2(function(n, t) {
        Un(t, on(t), n);
      }), fr = Ft2(function(n, t, e, r) {
        Un(t, on(t), n, r);
      }), Wp = Ft2(function(n, t, e, r) {
        Un(t, V3(t), n, r);
      }), Fp = Yn(Zr);
      function Mp(n, t) {
        var e = Wt2(n);
        return t == null ? e : qs(e, t);
      }
      var qp = L2(function(n, t) {
        n = M3(n);
        var e = -1, r = t.length, s = r > 2 ? t[2] : i;
        for (s && rn(t[0], t[1], s) && (r = 1); ++e < r; )
          for (var o = t[e], f2 = on(o), c = -1, l = f2.length; ++c < l; ) {
            var v3 = f2[c], _3 = n[v3];
            (_3 === i || bn(_3, Nt[v3]) && !F2.call(n, v3)) && (n[v3] = o[v3]);
          }
        return n;
      }), Bp = L2(function(n) {
        return n.push(i, yu), cn2(ca, i, n);
      });
      function Gp(n, t) {
        return Cs(n, x(t, 3), $n);
      }
      function zp(n, t) {
        return Cs(n, x(t, 3), Xr);
      }
      function Kp(n, t) {
        return n == null ? n : Jr(n, x(t, 3), on);
      }
      function Yp(n, t) {
        return n == null ? n : Ys(n, x(t, 3), on);
      }
      function Zp(n, t) {
        return n && $n(n, x(t, 3));
      }
      function Jp(n, t) {
        return n && Xr(n, x(t, 3));
      }
      function Xp(n) {
        return n == null ? [] : ze2(n, V3(n));
      }
      function Qp(n) {
        return n == null ? [] : ze2(n, on(n));
      }
      function Si(n, t, e) {
        var r = n == null ? i : _t(n, t);
        return r === i ? e : r;
      }
      function Vp(n, t) {
        return n != null && Ru(n, t, Pc);
      }
      function Oi(n, t) {
        return n != null && Ru(n, t, Ac);
      }
      var kp = Au(function(n, t, e) {
        t != null && typeof t.toString != "function" && (t = Te.call(t)), n[t] = e;
      }, bi(fn)), jp = Au(function(n, t, e) {
        t != null && typeof t.toString != "function" && (t = Te.call(t)), F2.call(n, t) ? n[t].push(e) : n[t] = [e];
      }, x), nd = L2(ae2);
      function V3(n) {
        return an2(n) ? Fs(n) : jr(n);
      }
      function on(n) {
        return an2(n) ? Fs(n, true) : Tc(n);
      }
      function td(n, t) {
        var e = {};
        return t = x(t, 3), $n(n, function(r, s, o) {
          zn2(e, t(r, s, o), r);
        }), e;
      }
      function ed(n, t) {
        var e = {};
        return t = x(t, 3), $n(n, function(r, s, o) {
          zn2(e, s, t(r, s, o));
        }), e;
      }
      var rd = Ft2(function(n, t, e) {
        Ke(n, t, e);
      }), ca = Ft2(function(n, t, e, r) {
        Ke(n, t, e, r);
      }), id = Yn(function(n, t) {
        var e = {};
        if (n == null)
          return e;
        var r = false;
        t = G3(t, function(o) {
          return o = st2(o, n), r || (r = o.length > 1), o;
        }), Un(n, pi(n), e), r && (e = An(e, Ln | Fn | xt2, kc));
        for (var s = t.length; s--; )
          si(e, t[s]);
        return e;
      });
      function sd(n, t) {
        return ha(n, ur(x(t)));
      }
      var ud = Yn(function(n, t) {
        return n == null ? {} : Dc(n, t);
      });
      function ha(n, t) {
        if (n == null)
          return {};
        var e = G3(pi(n), function(r) {
          return [r];
        });
        return t = x(t), eu(n, e, function(r, s) {
          return t(r, s[0]);
        });
      }
      function ad(n, t, e) {
        t = st2(t, n);
        var r = -1, s = t.length;
        for (s || (s = 1, n = i); ++r < s; ) {
          var o = n == null ? i : n[Wn(t[r])];
          o === i && (r = s, o = e), n = Jn(o) ? o.call(n) : o;
        }
        return n;
      }
      function od(n, t, e) {
        return n == null ? n : fe(n, t, e);
      }
      function fd(n, t, e, r) {
        return r = typeof r == "function" ? r : i, n == null ? n : fe(n, t, e, r);
      }
      var la = xu(V3), pa = xu(on);
      function cd(n, t, e) {
        var r = O3(n), s = r || at(n) || Bt2(n);
        if (t = x(t, 4), e == null) {
          var o = n && n.constructor;
          s ? e = r ? new o() : [] : K(n) ? e = Jn(o) ? Wt2(He(n)) : {} : e = {};
        }
        return (s ? mn : $n)(n, function(f2, c, l) {
          return t(e, f2, c, l);
        }), e;
      }
      function hd(n, t) {
        return n == null ? true : si(n, t);
      }
      function ld(n, t, e) {
        return n == null ? n : au(n, t, oi(e));
      }
      function pd(n, t, e, r) {
        return r = typeof r == "function" ? r : i, n == null ? n : au(n, t, oi(e), r);
      }
      function Gt2(n) {
        return n == null ? [] : Mr(n, V3(n));
      }
      function dd(n) {
        return n == null ? [] : Mr(n, on(n));
      }
      function gd(n, t, e) {
        return e === i && (e = t, t = i), e !== i && (e = xn(e), e = e === e ? e : 0), t !== i && (t = xn(t), t = t === t ? t : 0), vt(xn(n), t, e);
      }
      function vd(n, t, e) {
        return t = Xn(t), e === i ? (e = t, t = 0) : e = Xn(e), n = xn(n), Cc(n, t, e);
      }
      function _d(n, t, e) {
        if (e && typeof e != "boolean" && rn(n, t, e) && (t = e = i), e === i && (typeof t == "boolean" ? (e = t, t = i) : typeof n == "boolean" && (e = n, n = i)), n === i && t === i ? (n = 0, t = 1) : (n = Xn(n), t === i ? (t = n, n = 0) : t = Xn(t)), n > t) {
          var r = n;
          n = t, t = r;
        }
        if (e || n % 1 || t % 1) {
          var s = Us();
          return nn(n + s * (t - n + Jo("1e-" + ((s + "").length - 1))), t);
        }
        return ei(n, t);
      }
      var md = Mt2(function(n, t, e) {
        return t = t.toLowerCase(), n + (e ? da(t) : t);
      });
      function da(n) {
        return Ri(W2(n).toLowerCase());
      }
      function ga(n) {
        return n = W2(n), n && n.replace(wo, of).replace(Wo, "");
      }
      function wd(n, t, e) {
        n = W2(n), t = ln(t);
        var r = n.length;
        e = e === i ? r : vt(R(e), 0, r);
        var s = e;
        return e -= t.length, e >= 0 && n.slice(e, s) == t;
      }
      function Pd(n) {
        return n = W2(n), n && ka.test(n) ? n.replace(Yi, ff) : n;
      }
      function Ad(n) {
        return n = W2(n), n && io.test(n) ? n.replace(xr, "\\$&") : n;
      }
      var Cd = Mt2(function(n, t, e) {
        return n + (e ? "-" : "") + t.toLowerCase();
      }), Id = Mt2(function(n, t, e) {
        return n + (e ? " " : "") + t.toLowerCase();
      }), xd = mu("toLowerCase");
      function Ed(n, t, e) {
        n = W2(n), t = R(t);
        var r = t ? Dt(n) : 0;
        if (!t || r >= t)
          return n;
        var s = (t - r) / 2;
        return Ve(We(s), e) + n + Ve(Ue(s), e);
      }
      function yd(n, t, e) {
        n = W2(n), t = R(t);
        var r = t ? Dt(n) : 0;
        return t && r < t ? n + Ve(t - r, e) : n;
      }
      function Sd(n, t, e) {
        n = W2(n), t = R(t);
        var r = t ? Dt(n) : 0;
        return t && r < t ? Ve(t - r, e) + n : n;
      }
      function Od(n, t, e) {
        return e || t == null ? t = 0 : t && (t = +t), Nf(W2(n).replace(Er, ""), t || 0);
      }
      function Rd(n, t, e) {
        return (e ? rn(n, t, e) : t === i) ? t = 1 : t = R(t), ri(W2(n), t);
      }
      function bd() {
        var n = arguments, t = W2(n[0]);
        return n.length < 3 ? t : t.replace(n[1], n[2]);
      }
      var Td = Mt2(function(n, t, e) {
        return n + (e ? "_" : "") + t.toLowerCase();
      });
      function Ld(n, t, e) {
        return e && typeof e != "number" && rn(n, t, e) && (t = e = i), e = e === i ? Nn : e >>> 0, e ? (n = W2(n), n && (typeof t == "string" || t != null && !yi(t)) && (t = ln(t), !t && Lt2(n)) ? ut2(On(n), 0, e) : n.split(t, e)) : [];
      }
      var Dd = Mt2(function(n, t, e) {
        return n + (e ? " " : "") + Ri(t);
      });
      function Hd(n, t, e) {
        return n = W2(n), e = e == null ? 0 : vt(R(e), 0, n.length), t = ln(t), n.slice(e, e + t.length) == t;
      }
      function Nd(n, t, e) {
        var r = a.templateSettings;
        e && rn(n, t, e) && (t = i), n = W2(n), t = fr({}, t, r, Eu);
        var s = fr({}, t.imports, r.imports, Eu), o = V3(s), f2 = Mr(s, o), c, l, v3 = 0, _3 = t.interpolate || Ce, m2 = "__p += '", P2 = Br((t.escape || Ce).source + "|" + _3.source + "|" + (_3 === Zi ? lo : Ce).source + "|" + (t.evaluate || Ce).source + "|$", "g"), I2 = "//# sourceURL=" + (F2.call(t, "sourceURL") ? (t.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++Go + "]") + `
`;
        n.replace(P2, function(y4, D4, N3, dn, sn, gn) {
          return N3 || (N3 = dn), m2 += n.slice(v3, gn).replace(Po, cf), D4 && (c = true, m2 += `' +
__e(` + D4 + `) +
'`), sn && (l = true, m2 += `';
` + sn + `;
__p += '`), N3 && (m2 += `' +
((__t = (` + N3 + `)) == null ? '' : __t) +
'`), v3 = gn + y4.length, y4;
        }), m2 += `';
`;
        var E2 = F2.call(t, "variable") && t.variable;
        if (!E2)
          m2 = `with (obj) {
` + m2 + `
}
`;
        else if (co.test(E2))
          throw new S4(En);
        m2 = (l ? m2.replace(Ja, "") : m2).replace(Xa, "$1").replace(Qa, "$1;"), m2 = "function(" + (E2 || "obj") + `) {
` + (E2 ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (c ? ", __e = _.escape" : "") + (l ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + m2 + `return __p
}`;
        var b4 = _a(function() {
          return U4(o, I2 + "return " + m2).apply(i, f2);
        });
        if (b4.source = m2, Ei(b4))
          throw b4;
        return b4;
      }
      function $d(n) {
        return W2(n).toLowerCase();
      }
      function Ud(n) {
        return W2(n).toUpperCase();
      }
      function Wd(n, t, e) {
        if (n = W2(n), n && (e || t === i))
          return ys(n);
        if (!n || !(t = ln(t)))
          return n;
        var r = On(n), s = On(t), o = Ss(r, s), f2 = Os(r, s) + 1;
        return ut2(r, o, f2).join("");
      }
      function Fd(n, t, e) {
        if (n = W2(n), n && (e || t === i))
          return n.slice(0, bs(n) + 1);
        if (!n || !(t = ln(t)))
          return n;
        var r = On(n), s = Os(r, On(t)) + 1;
        return ut2(r, 0, s).join("");
      }
      function Md(n, t, e) {
        if (n = W2(n), n && (e || t === i))
          return n.replace(Er, "");
        if (!n || !(t = ln(t)))
          return n;
        var r = On(n), s = Ss(r, On(t));
        return ut2(r, s).join("");
      }
      function qd(n, t) {
        var e = La, r = Da;
        if (K(t)) {
          var s = "separator" in t ? t.separator : s;
          e = "length" in t ? R(t.length) : e, r = "omission" in t ? ln(t.omission) : r;
        }
        n = W2(n);
        var o = n.length;
        if (Lt2(n)) {
          var f2 = On(n);
          o = f2.length;
        }
        if (e >= o)
          return n;
        var c = e - Dt(r);
        if (c < 1)
          return r;
        var l = f2 ? ut2(f2, 0, c).join("") : n.slice(0, c);
        if (s === i)
          return l + r;
        if (f2 && (c += l.length - c), yi(s)) {
          if (n.slice(c).search(s)) {
            var v3, _3 = l;
            for (s.global || (s = Br(s.source, W2(Ji.exec(s)) + "g")), s.lastIndex = 0; v3 = s.exec(_3); )
              var m2 = v3.index;
            l = l.slice(0, m2 === i ? c : m2);
          }
        } else if (n.indexOf(ln(s), c) != c) {
          var P2 = l.lastIndexOf(s);
          P2 > -1 && (l = l.slice(0, P2));
        }
        return l + r;
      }
      function Bd(n) {
        return n = W2(n), n && Va.test(n) ? n.replace(Ki, _f) : n;
      }
      var Gd = Mt2(function(n, t, e) {
        return n + (e ? " " : "") + t.toUpperCase();
      }), Ri = mu("toUpperCase");
      function va(n, t, e) {
        return n = W2(n), t = e ? i : t, t === i ? lf(n) ? Pf(n) : ef(n) : n.match(t) || [];
      }
      var _a = L2(function(n, t) {
        try {
          return cn2(n, i, t);
        } catch (e) {
          return Ei(e) ? e : new S4(e);
        }
      }), zd = Yn(function(n, t) {
        return mn(t, function(e) {
          e = Wn(e), zn2(n, e, Ii(n[e], n));
        }), n;
      });
      function Kd(n) {
        var t = n == null ? 0 : n.length, e = x();
        return n = t ? G3(n, function(r) {
          if (typeof r[1] != "function")
            throw new wn($3);
          return [e(r[0]), r[1]];
        }) : [], L2(function(r) {
          for (var s = -1; ++s < t; ) {
            var o = n[s];
            if (cn2(o[0], this, r))
              return cn2(o[1], this, r);
          }
        });
      }
      function Yd(n) {
        return _c(An(n, Ln));
      }
      function bi(n) {
        return function() {
          return n;
        };
      }
      function Zd(n, t) {
        return n == null || n !== n ? t : n;
      }
      var Jd = Pu(), Xd = Pu(true);
      function fn(n) {
        return n;
      }
      function Ti(n) {
        return Qs(typeof n == "function" ? n : An(n, Ln));
      }
      function Qd(n) {
        return ks(An(n, Ln));
      }
      function Vd(n, t) {
        return js(n, An(t, Ln));
      }
      var kd = L2(function(n, t) {
        return function(e) {
          return ae2(e, n, t);
        };
      }), jd = L2(function(n, t) {
        return function(e) {
          return ae2(n, e, t);
        };
      });
      function Li(n, t, e) {
        var r = V3(t), s = ze2(t, r);
        e == null && !(K(t) && (s.length || !r.length)) && (e = t, t = n, n = this, s = ze2(t, V3(t)));
        var o = !(K(e) && "chain" in e) || !!e.chain, f2 = Jn(n);
        return mn(s, function(c) {
          var l = t[c];
          n[c] = l, f2 && (n.prototype[c] = function() {
            var v3 = this.__chain__;
            if (o || v3) {
              var _3 = n(this.__wrapped__), m2 = _3.__actions__ = un2(this.__actions__);
              return m2.push({ func: l, args: arguments, thisArg: n }), _3.__chain__ = v3, _3;
            }
            return l.apply(n, nt([this.value()], arguments));
          });
        }), n;
      }
      function ng() {
        return k._ === this && (k._ = yf), this;
      }
      function Di() {
      }
      function tg(n) {
        return n = R(n), L2(function(t) {
          return nu(t, n);
        });
      }
      var eg = ci(G3), rg = ci(As), ig = ci(Nr);
      function ma(n) {
        return _i(n) ? $r(Wn(n)) : Hc(n);
      }
      function sg(n) {
        return function(t) {
          return n == null ? i : _t(n, t);
        };
      }
      var ug = Cu(), ag = Cu(true);
      function Hi() {
        return [];
      }
      function Ni() {
        return false;
      }
      function og() {
        return {};
      }
      function fg() {
        return "";
      }
      function cg() {
        return true;
      }
      function hg(n, t) {
        if (n = R(n), n < 1 || n > kn)
          return [];
        var e = Nn, r = nn(n, Nn);
        t = x(t), n -= Nn;
        for (var s = Fr(r, t); ++e < n; )
          t(e);
        return s;
      }
      function lg(n) {
        return O3(n) ? G3(n, Wn) : pn(n) ? [n] : un2(Wu(W2(n)));
      }
      function pg(n) {
        var t = ++xf;
        return W2(n) + t;
      }
      var dg = Qe(function(n, t) {
        return n + t;
      }, 0), gg = hi("ceil"), vg = Qe(function(n, t) {
        return n / t;
      }, 1), _g = hi("floor");
      function mg(n) {
        return n && n.length ? Ge(n, fn, Qr) : i;
      }
      function wg(n, t) {
        return n && n.length ? Ge(n, x(t, 2), Qr) : i;
      }
      function Pg(n) {
        return xs(n, fn);
      }
      function Ag(n, t) {
        return xs(n, x(t, 2));
      }
      function Cg(n) {
        return n && n.length ? Ge(n, fn, ni) : i;
      }
      function Ig(n, t) {
        return n && n.length ? Ge(n, x(t, 2), ni) : i;
      }
      var xg = Qe(function(n, t) {
        return n * t;
      }, 1), Eg = hi("round"), yg = Qe(function(n, t) {
        return n - t;
      }, 0);
      function Sg(n) {
        return n && n.length ? Wr(n, fn) : 0;
      }
      function Og(n, t) {
        return n && n.length ? Wr(n, x(t, 2)) : 0;
      }
      return a.after = Ql, a.ary = Xu, a.assign = Up, a.assignIn = fa, a.assignInWith = fr, a.assignWith = Wp, a.at = Fp, a.before = Qu, a.bind = Ii, a.bindAll = zd, a.bindKey = Vu, a.castArray = op, a.chain = Yu, a.chunk = _h, a.compact = mh, a.concat = wh, a.cond = Kd, a.conforms = Yd, a.constant = bi, a.countBy = Sl, a.create = Mp, a.curry = ku, a.curryRight = ju, a.debounce = na, a.defaults = qp, a.defaultsDeep = Bp, a.defer = Vl, a.delay = kl, a.difference = Ph, a.differenceBy = Ah, a.differenceWith = Ch, a.drop = Ih, a.dropRight = xh, a.dropRightWhile = Eh, a.dropWhile = yh, a.fill = Sh, a.filter = Rl, a.flatMap = Ll, a.flatMapDeep = Dl, a.flatMapDepth = Hl, a.flatten = Bu, a.flattenDeep = Oh, a.flattenDepth = Rh, a.flip = jl, a.flow = Jd, a.flowRight = Xd, a.fromPairs = bh, a.functions = Xp, a.functionsIn = Qp, a.groupBy = Nl, a.initial = Lh, a.intersection = Dh, a.intersectionBy = Hh, a.intersectionWith = Nh, a.invert = kp, a.invertBy = jp, a.invokeMap = Ul, a.iteratee = Ti, a.keyBy = Wl, a.keys = V3, a.keysIn = on, a.map = rr, a.mapKeys = td, a.mapValues = ed, a.matches = Qd, a.matchesProperty = Vd, a.memoize = sr, a.merge = rd, a.mergeWith = ca, a.method = kd, a.methodOf = jd, a.mixin = Li, a.negate = ur, a.nthArg = tg, a.omit = id, a.omitBy = sd, a.once = np, a.orderBy = Fl, a.over = eg, a.overArgs = tp, a.overEvery = rg, a.overSome = ig, a.partial = xi, a.partialRight = ta, a.partition = Ml, a.pick = ud, a.pickBy = ha, a.property = ma, a.propertyOf = sg, a.pull = Fh, a.pullAll = zu, a.pullAllBy = Mh, a.pullAllWith = qh, a.pullAt = Bh, a.range = ug, a.rangeRight = ag, a.rearg = ep, a.reject = Gl, a.remove = Gh, a.rest = rp, a.reverse = Ai, a.sampleSize = Kl, a.set = od, a.setWith = fd, a.shuffle = Yl, a.slice = zh, a.sortBy = Xl, a.sortedUniq = Vh, a.sortedUniqBy = kh, a.split = Ld, a.spread = ip, a.tail = jh, a.take = nl, a.takeRight = tl, a.takeRightWhile = el, a.takeWhile = rl, a.tap = ml, a.throttle = sp, a.thru = er2, a.toArray = ua, a.toPairs = la, a.toPairsIn = pa, a.toPath = lg, a.toPlainObject = oa, a.transform = cd, a.unary = up, a.union = il, a.unionBy = sl, a.unionWith = ul, a.uniq = al, a.uniqBy = ol, a.uniqWith = fl, a.unset = hd, a.unzip = Ci, a.unzipWith = Ku, a.update = ld, a.updateWith = pd, a.values = Gt2, a.valuesIn = dd, a.without = cl, a.words = va, a.wrap = ap, a.xor = hl, a.xorBy = ll, a.xorWith = pl, a.zip = dl, a.zipObject = gl, a.zipObjectDeep = vl, a.zipWith = _l, a.entries = la, a.entriesIn = pa, a.extend = fa, a.extendWith = fr, Li(a, a), a.add = dg, a.attempt = _a, a.camelCase = md, a.capitalize = da, a.ceil = gg, a.clamp = gd, a.clone = fp, a.cloneDeep = hp, a.cloneDeepWith = lp, a.cloneWith = cp, a.conformsTo = pp, a.deburr = ga, a.defaultTo = Zd, a.divide = vg, a.endsWith = wd, a.eq = bn, a.escape = Pd, a.escapeRegExp = Ad, a.every = Ol, a.find = bl, a.findIndex = Mu, a.findKey = Gp, a.findLast = Tl, a.findLastIndex = qu, a.findLastKey = zp, a.floor = _g, a.forEach = Zu, a.forEachRight = Ju, a.forIn = Kp, a.forInRight = Yp, a.forOwn = Zp, a.forOwnRight = Jp, a.get = Si, a.gt = dp, a.gte = gp, a.has = Vp, a.hasIn = Oi, a.head = Gu, a.identity = fn, a.includes = $l, a.indexOf = Th, a.inRange = vd, a.invoke = nd, a.isArguments = Pt, a.isArray = O3, a.isArrayBuffer = vp, a.isArrayLike = an2, a.isArrayLikeObject = Z, a.isBoolean = _p, a.isBuffer = at, a.isDate = mp, a.isElement = wp, a.isEmpty = Pp, a.isEqual = Ap, a.isEqualWith = Cp, a.isError = Ei, a.isFinite = Ip, a.isFunction = Jn, a.isInteger = ea, a.isLength = ar, a.isMap = ra, a.isMatch = xp, a.isMatchWith = Ep, a.isNaN = yp, a.isNative = Sp, a.isNil = Rp, a.isNull = Op, a.isNumber = ia, a.isObject = K, a.isObjectLike = Y, a.isPlainObject = pe2, a.isRegExp = yi, a.isSafeInteger = bp, a.isSet = sa, a.isString = or, a.isSymbol = pn, a.isTypedArray = Bt2, a.isUndefined = Tp, a.isWeakMap = Lp, a.isWeakSet = Dp, a.join = $h, a.kebabCase = Cd, a.last = In, a.lastIndexOf = Uh, a.lowerCase = Id, a.lowerFirst = xd, a.lt = Hp, a.lte = Np, a.max = mg, a.maxBy = wg, a.mean = Pg, a.meanBy = Ag, a.min = Cg, a.minBy = Ig, a.stubArray = Hi, a.stubFalse = Ni, a.stubObject = og, a.stubString = fg, a.stubTrue = cg, a.multiply = xg, a.nth = Wh, a.noConflict = ng, a.noop = Di, a.now = ir, a.pad = Ed, a.padEnd = yd, a.padStart = Sd, a.parseInt = Od, a.random = _d, a.reduce = ql, a.reduceRight = Bl, a.repeat = Rd, a.replace = bd, a.result = ad, a.round = Eg, a.runInContext = h2, a.sample = zl, a.size = Zl, a.snakeCase = Td, a.some = Jl, a.sortedIndex = Kh, a.sortedIndexBy = Yh, a.sortedIndexOf = Zh, a.sortedLastIndex = Jh, a.sortedLastIndexBy = Xh, a.sortedLastIndexOf = Qh, a.startCase = Dd, a.startsWith = Hd, a.subtract = yg, a.sum = Sg, a.sumBy = Og, a.template = Nd, a.times = hg, a.toFinite = Xn, a.toInteger = R, a.toLength = aa, a.toLower = $d, a.toNumber = xn, a.toSafeInteger = $p, a.toString = W2, a.toUpper = Ud, a.trim = Wd, a.trimEnd = Fd, a.trimStart = Md, a.truncate = qd, a.unescape = Bd, a.uniqueId = pg, a.upperCase = Gd, a.upperFirst = Ri, a.each = Zu, a.eachRight = Ju, a.first = Gu, Li(a, function() {
        var n = {};
        return $n(a, function(t, e) {
          F2.call(a.prototype, e) || (n[e] = t);
        }), n;
      }(), { chain: false }), a.VERSION = d2, mn(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(n) {
        a[n].placeholder = a;
      }), mn(["drop", "take"], function(n, t) {
        H2.prototype[n] = function(e) {
          e = e === i ? 1 : Q3(R(e), 0);
          var r = this.__filtered__ && !t ? new H2(this) : this.clone();
          return r.__filtered__ ? r.__takeCount__ = nn(e, r.__takeCount__) : r.__views__.push({ size: nn(e, Nn), type: n + (r.__dir__ < 0 ? "Right" : "") }), r;
        }, H2.prototype[n + "Right"] = function(e) {
          return this.reverse()[n](e).reverse();
        };
      }), mn(["filter", "map", "takeWhile"], function(n, t) {
        var e = t + 1, r = e == Bi || e == Ua;
        H2.prototype[n] = function(s) {
          var o = this.clone();
          return o.__iteratees__.push({ iteratee: x(s, 3), type: e }), o.__filtered__ = o.__filtered__ || r, o;
        };
      }), mn(["head", "last"], function(n, t) {
        var e = "take" + (t ? "Right" : "");
        H2.prototype[n] = function() {
          return this[e](1).value()[0];
        };
      }), mn(["initial", "tail"], function(n, t) {
        var e = "drop" + (t ? "" : "Right");
        H2.prototype[n] = function() {
          return this.__filtered__ ? new H2(this) : this[e](1);
        };
      }), H2.prototype.compact = function() {
        return this.filter(fn);
      }, H2.prototype.find = function(n) {
        return this.filter(n).head();
      }, H2.prototype.findLast = function(n) {
        return this.reverse().find(n);
      }, H2.prototype.invokeMap = L2(function(n, t) {
        return typeof n == "function" ? new H2(this) : this.map(function(e) {
          return ae2(e, n, t);
        });
      }), H2.prototype.reject = function(n) {
        return this.filter(ur(x(n)));
      }, H2.prototype.slice = function(n, t) {
        n = R(n);
        var e = this;
        return e.__filtered__ && (n > 0 || t < 0) ? new H2(e) : (n < 0 ? e = e.takeRight(-n) : n && (e = e.drop(n)), t !== i && (t = R(t), e = t < 0 ? e.dropRight(-t) : e.take(t - n)), e);
      }, H2.prototype.takeRightWhile = function(n) {
        return this.reverse().takeWhile(n).reverse();
      }, H2.prototype.toArray = function() {
        return this.take(Nn);
      }, $n(H2.prototype, function(n, t) {
        var e = /^(?:filter|find|map|reject)|While$/.test(t), r = /^(?:head|last)$/.test(t), s = a[r ? "take" + (t == "last" ? "Right" : "") : t], o = r || /^find/.test(t);
        s && (a.prototype[t] = function() {
          var f2 = this.__wrapped__, c = r ? [1] : arguments, l = f2 instanceof H2, v3 = c[0], _3 = l || O3(f2), m2 = function(D4) {
            var N3 = s.apply(a, nt([D4], c));
            return r && P2 ? N3[0] : N3;
          };
          _3 && e && typeof v3 == "function" && v3.length != 1 && (l = _3 = false);
          var P2 = this.__chain__, I2 = !!this.__actions__.length, E2 = o && !P2, b4 = l && !I2;
          if (!o && _3) {
            f2 = b4 ? f2 : new H2(this);
            var y4 = n.apply(f2, c);
            return y4.__actions__.push({ func: er2, args: [m2], thisArg: i }), new Pn(y4, P2);
          }
          return E2 && b4 ? n.apply(this, c) : (y4 = this.thru(m2), E2 ? r ? y4.value()[0] : y4.value() : y4);
        });
      }), mn(["pop", "push", "shift", "sort", "splice", "unshift"], function(n) {
        var t = Oe[n], e = /^(?:push|sort|unshift)$/.test(n) ? "tap" : "thru", r = /^(?:pop|shift)$/.test(n);
        a.prototype[n] = function() {
          var s = arguments;
          if (r && !this.__chain__) {
            var o = this.value();
            return t.apply(O3(o) ? o : [], s);
          }
          return this[e](function(f2) {
            return t.apply(O3(f2) ? f2 : [], s);
          });
        };
      }), $n(H2.prototype, function(n, t) {
        var e = a[t];
        if (e) {
          var r = e.name + "";
          F2.call(Ut, r) || (Ut[r] = []), Ut[r].push({ name: t, func: e });
        }
      }), Ut[Xe2(i, ct).name] = [{ name: "wrapper", func: i }], H2.prototype.clone = Bf, H2.prototype.reverse = Gf, H2.prototype.value = zf, a.prototype.at = wl, a.prototype.chain = Pl, a.prototype.commit = Al, a.prototype.next = Cl, a.prototype.plant = xl, a.prototype.reverse = El, a.prototype.toJSON = a.prototype.valueOf = a.prototype.value = yl, a.prototype.first = a.prototype.head, ne3 && (a.prototype[ne3] = Il), a;
    }, Ht2 = Af();
    lt2 ? ((lt2.exports = Ht2)._ = Ht2, Tr._ = Ht2) : k._ = Ht2;
  }).call(ge);
})(Ui, Ui.exports);
var qg = Object.defineProperty;
var Bg = Object.defineProperties;
var Gg = Object.getOwnPropertyDescriptors;
var Ea = Object.getOwnPropertySymbols;
var zg = Object.prototype.hasOwnProperty;
var Kg = Object.prototype.propertyIsEnumerable;
var ya = (C, u2, i) => u2 in C ? qg(C, u2, { enumerable: true, configurable: true, writable: true, value: i }) : C[u2] = i;
var cr = (C, u2) => {
  for (var i in u2 || (u2 = {}))
    zg.call(u2, i) && ya(C, i, u2[i]);
  if (Ea)
    for (var i of Ea(u2))
      Kg.call(u2, i) && ya(C, i, u2[i]);
  return C;
};
var Yg = (C, u2) => Bg(C, Gg(u2));
function ft2(C, u2, i) {
  var d2;
  const w2 = ve(C);
  return ((d2 = u2.rpcMap) == null ? void 0 : d2[w2.reference]) || `${Mg}?chainId=${w2.namespace}:${w2.reference}&projectId=${i}`;
}
function Ct(C) {
  return C.includes(":") ? C.split(":")[1] : C;
}
function Sa(C) {
  return C.map((u2) => `${u2.split(":")[0]}:${u2.split(":")[1]}`);
}
function Zg(C, u2) {
  const i = Object.keys(u2.namespaces).filter((w2) => w2.includes(C));
  if (!i.length)
    return [];
  const d2 = [];
  return i.forEach((w2) => {
    const T = u2.namespaces[w2].accounts;
    d2.push(...T);
  }), d2;
}
function Jg(C = {}, u2 = {}) {
  const i = Oa(C), d2 = Oa(u2);
  return Ui.exports.merge(i, d2);
}
function Oa(C) {
  var u2, i, d2, w2;
  const T = {};
  if (!B(C))
    return T;
  for (const [$3, En] of Object.entries(C)) {
    const zt2 = oe($3) ? [$3] : En.chains, pr = En.methods || [], It = En.events || [], Ln = En.rpcMap || {}, Fn = Xe($3);
    T[Fn] = Yg(cr(cr({}, T[Fn]), En), { chains: S2(zt2, (u2 = T[Fn]) == null ? void 0 : u2.chains), methods: S2(pr, (i = T[Fn]) == null ? void 0 : i.methods), events: S2(It, (d2 = T[Fn]) == null ? void 0 : d2.events), rpcMap: cr(cr({}, Ln), (w2 = T[Fn]) == null ? void 0 : w2.rpcMap) });
  }
  return T;
}
function Xg(C) {
  return C.includes(":") ? C.split(":")[2] : C;
}
function Qg(C) {
  const u2 = {};
  for (const [i, d2] of Object.entries(C)) {
    const w2 = d2.methods || [], T = d2.events || [], $3 = d2.accounts || [], En = oe(i) ? [i] : d2.chains ? d2.chains : Sa(d2.accounts);
    u2[i] = { chains: En, methods: w2, events: T, accounts: $3 };
  }
  return u2;
}
function Wi(C) {
  return typeof C == "number" ? C : C.includes("0x") ? parseInt(C, 16) : C.includes(":") ? Number(C.split(":")[1]) : Number(C);
}
var Ra = {};
var z = (C) => Ra[C];
var Fi = (C, u2) => {
  Ra[C] = u2;
};
var Vg = class {
  constructor(u2) {
    this.name = "polkadot", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(u2, i), this.chainId = u2, this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${u2}`);
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]) || [] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      const w2 = Ct(i);
      u2[w2] = this.createHttpProvider(w2, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(u2, this.namespace, this.client.core.projectId);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var kg = class {
  constructor(u2) {
    this.name = "eip155", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.httpProviders = this.createHttpProviders(), this.chainId = parseInt(this.getDefaultChain());
  }
  async request(u2) {
    switch (u2.request.method) {
      case "eth_requestAccounts":
        return this.getAccounts();
      case "eth_accounts":
        return this.getAccounts();
      case "wallet_switchEthereumChain":
        return await this.handleSwitchChain(u2);
      case "eth_chainId":
        return parseInt(this.getDefaultChain());
    }
    return this.namespace.methods.includes(u2.request.method) ? await this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(parseInt(u2), i), this.chainId = parseInt(u2), this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${u2}`);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId.toString();
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(`${this.name}:${u2}`, this.namespace, this.client.core.projectId);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new HttpConnection(d2, z("disableProviderPing")));
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      const w2 = parseInt(Ct(i));
      u2[w2] = this.createHttpProvider(w2, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? [...new Set(u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]))] : [];
  }
  getHttpProvider() {
    const u2 = this.chainId, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  async handleSwitchChain(u2) {
    var i, d2;
    let w2 = u2.request.params ? (i = u2.request.params[0]) == null ? void 0 : i.chainId : "0x0";
    w2 = w2.startsWith("0x") ? w2 : `0x${w2}`;
    const T = parseInt(w2, 16);
    if (this.isChainApproved(T))
      this.setDefaultChain(`${T}`);
    else if (this.namespace.methods.includes("wallet_switchEthereumChain"))
      await this.client.request({ topic: u2.topic, request: { method: u2.request.method, params: [{ chainId: w2 }] }, chainId: (d2 = this.namespace.chains) == null ? void 0 : d2[0] }), this.setDefaultChain(`${T}`);
    else
      throw new Error(`Failed to switch to chain 'eip155:${T}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);
    return null;
  }
  isChainApproved(u2) {
    return this.namespace.chains.includes(`${this.name}:${u2}`);
  }
};
var jg = class {
  constructor(u2) {
    this.name = "solana", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(u2, i), this.chainId = u2, this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${u2}`);
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? [...new Set(u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      const w2 = Ct(i);
      u2[w2] = this.createHttpProvider(w2, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(u2, this.namespace, this.client.core.projectId);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var nv = class {
  constructor(u2) {
    this.name = "cosmos", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(u2, i), this.chainId = u2, this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? [...new Set(u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      const w2 = Ct(i);
      u2[w2] = this.createHttpProvider(w2, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(u2, this.namespace, this.client.core.projectId);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var tv = class {
  constructor(u2) {
    this.name = "cip34", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(u2, i), this.chainId = u2, this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? [...new Set(u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      const d2 = this.getCardanoRPCUrl(i), w2 = Ct(i);
      u2[w2] = this.createHttpProvider(w2, d2);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  getCardanoRPCUrl(u2) {
    const i = this.namespace.rpcMap;
    if (i)
      return i[u2];
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || this.getCardanoRPCUrl(u2);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var ev = class {
  constructor(u2) {
    this.name = "elrond", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(u2, i), this.chainId = u2, this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${u2}`);
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? [...new Set(u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      const w2 = Ct(i);
      u2[w2] = this.createHttpProvider(w2, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(u2, this.namespace, this.client.core.projectId);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var rv = class {
  constructor(u2) {
    this.name = "multiversx", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    this.httpProviders[u2] || this.setHttpProvider(u2, i), this.chainId = u2, this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${u2}`);
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? [...new Set(u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]))] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      const w2 = Ct(i);
      u2[w2] = this.createHttpProvider(w2, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(u2, this.namespace, this.client.core.projectId);
    if (!d2)
      throw new Error(`No RPC url provided for chainId: ${u2}`);
    return new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var iv = class {
  constructor(u2) {
    this.name = "near", this.namespace = u2.namespace, this.events = z("events"), this.client = z("client"), this.chainId = this.getDefaultChain(), this.httpProviders = this.createHttpProviders();
  }
  updateNamespace(u2) {
    this.namespace = Object.assign(this.namespace, u2);
  }
  requestAccounts() {
    return this.getAccounts();
  }
  getDefaultChain() {
    if (this.chainId)
      return this.chainId;
    if (this.namespace.defaultChain)
      return this.namespace.defaultChain;
    const u2 = this.namespace.chains[0];
    if (!u2)
      throw new Error("ChainId not found");
    return u2.split(":")[1];
  }
  request(u2) {
    return this.namespace.methods.includes(u2.request.method) ? this.client.request(u2) : this.getHttpProvider().request(u2.request);
  }
  setDefaultChain(u2, i) {
    if (this.chainId = u2, !this.httpProviders[u2]) {
      const d2 = i || ft2(`${this.name}:${u2}`, this.namespace);
      if (!d2)
        throw new Error(`No RPC url provided for chainId: ${u2}`);
      this.setHttpProvider(u2, d2);
    }
    this.events.emit(Vn.DEFAULT_CHAIN_CHANGED, `${this.name}:${this.chainId}`);
  }
  getAccounts() {
    const u2 = this.namespace.accounts;
    return u2 ? u2.filter((i) => i.split(":")[1] === this.chainId.toString()).map((i) => i.split(":")[2]) || [] : [];
  }
  createHttpProviders() {
    const u2 = {};
    return this.namespace.chains.forEach((i) => {
      var d2;
      u2[i] = this.createHttpProvider(i, (d2 = this.namespace.rpcMap) == null ? void 0 : d2[i]);
    }), u2;
  }
  getHttpProvider() {
    const u2 = `${this.name}:${this.chainId}`, i = this.httpProviders[u2];
    if (typeof i > "u")
      throw new Error(`JSON-RPC provider for ${u2} not found`);
    return i;
  }
  setHttpProvider(u2, i) {
    const d2 = this.createHttpProvider(u2, i);
    d2 && (this.httpProviders[u2] = d2);
  }
  createHttpProvider(u2, i) {
    const d2 = i || ft2(u2, this.namespace);
    return typeof d2 > "u" ? void 0 : new JsonRpcProvider(new esm_default(d2, z("disableProviderPing")));
  }
};
var sv = Object.defineProperty;
var uv = Object.defineProperties;
var av = Object.getOwnPropertyDescriptors;
var ba = Object.getOwnPropertySymbols;
var ov = Object.prototype.hasOwnProperty;
var fv = Object.prototype.propertyIsEnumerable;
var Ta = (C, u2, i) => u2 in C ? sv(C, u2, { enumerable: true, configurable: true, writable: true, value: i }) : C[u2] = i;
var hr = (C, u2) => {
  for (var i in u2 || (u2 = {}))
    ov.call(u2, i) && Ta(C, i, u2[i]);
  if (ba)
    for (var i of ba(u2))
      fv.call(u2, i) && Ta(C, i, u2[i]);
  return C;
};
var Mi = (C, u2) => uv(C, av(u2));
var lr = class {
  constructor(u2) {
    this.events = new import_events3.default(), this.rpcProviders = {}, this.shouldAbortPairingAttempt = false, this.maxPairingAttempts = 10, this.disableProviderPing = false, this.providerOpts = u2, this.logger = typeof (u2 == null ? void 0 : u2.logger) < "u" && typeof (u2 == null ? void 0 : u2.logger) != "string" ? u2.logger : (0, import_logger2.pino)((0, import_logger2.getDefaultLoggerOptions)({ level: (u2 == null ? void 0 : u2.logger) || Ia })), this.disableProviderPing = (u2 == null ? void 0 : u2.disableProviderPing) || false;
  }
  static async init(u2) {
    const i = new lr(u2);
    return await i.initialize(), i;
  }
  async request(u2, i) {
    const [d2, w2] = this.validateChain(i);
    if (!this.session)
      throw new Error("Please call connect() before request()");
    return await this.getProvider(d2).request({ request: hr({}, u2), chainId: `${d2}:${w2}`, topic: this.session.topic });
  }
  sendAsync(u2, i, d2) {
    this.request(u2, d2).then((w2) => i(null, w2)).catch((w2) => i(w2, void 0));
  }
  async enable() {
    if (!this.client)
      throw new Error("Sign Client not initialized");
    return this.session || await this.connect({ namespaces: this.namespaces, optionalNamespaces: this.optionalNamespaces, sessionProperties: this.sessionProperties }), await this.requestAccounts();
  }
  async disconnect() {
    var u2;
    if (!this.session)
      throw new Error("Please call connect() before enable()");
    await this.client.disconnect({ topic: (u2 = this.session) == null ? void 0 : u2.topic, reason: U("USER_DISCONNECTED") }), await this.cleanup();
  }
  async connect(u2) {
    if (!this.client)
      throw new Error("Sign Client not initialized");
    if (this.setNamespaces(u2), await this.cleanupPendingPairings(), !u2.skipPairing)
      return await this.pair(u2.pairingTopic);
  }
  on(u2, i) {
    this.events.on(u2, i);
  }
  once(u2, i) {
    this.events.once(u2, i);
  }
  removeListener(u2, i) {
    this.events.removeListener(u2, i);
  }
  off(u2, i) {
    this.events.off(u2, i);
  }
  get isWalletConnect() {
    return true;
  }
  async pair(u2) {
    this.shouldAbortPairingAttempt = false;
    let i = 0;
    do {
      if (this.shouldAbortPairingAttempt)
        throw new Error("Pairing aborted");
      if (i >= this.maxPairingAttempts)
        throw new Error("Max auto pairing attempts reached");
      const { uri: d2, approval: w2 } = await this.client.connect({ pairingTopic: u2, requiredNamespaces: this.namespaces, optionalNamespaces: this.optionalNamespaces, sessionProperties: this.sessionProperties });
      d2 && (this.uri = d2, this.events.emit("display_uri", d2)), await w2().then((T) => {
        this.session = T, this.namespaces || (this.namespaces = Qg(T.namespaces), this.persist("namespaces", this.namespaces));
      }).catch((T) => {
        if (T.message !== oe2)
          throw T;
        i++;
      });
    } while (!this.session);
    return this.onConnect(), this.session;
  }
  setDefaultChain(u2, i) {
    try {
      if (!this.session)
        return;
      const [d2, w2] = this.validateChain(u2);
      this.getProvider(d2).setDefaultChain(w2, i);
    } catch (d2) {
      if (!/Please call connect/.test(d2.message))
        throw d2;
    }
  }
  async cleanupPendingPairings(u2 = {}) {
    this.logger.info("Cleaning up inactive pairings...");
    const i = this.client.pairing.getAll();
    if (D(i)) {
      for (const d2 of i)
        u2.deletePairings ? this.client.core.expirer.set(d2.topic, 0) : await this.client.core.relayer.subscriber.unsubscribe(d2.topic);
      this.logger.info(`Inactive pairings cleared: ${i.length}`);
    }
  }
  abortPairingAttempt() {
    this.shouldAbortPairingAttempt = true;
  }
  async checkStorage() {
    if (this.namespaces = await this.getFromStore("namespaces"), this.optionalNamespaces = await this.getFromStore("optionalNamespaces") || {}, this.client.session.length) {
      const u2 = this.client.session.keys.length - 1;
      this.session = this.client.session.get(this.client.session.keys[u2]), this.createProviders();
    }
  }
  async initialize() {
    this.logger.trace("Initialized"), await this.createClient(), await this.checkStorage(), this.registerEventListeners();
  }
  async createClient() {
    this.client = this.providerOpts.client || await Q.init({ logger: this.providerOpts.logger || Ia, relayUrl: this.providerOpts.relayUrl || Ug, projectId: this.providerOpts.projectId, metadata: this.providerOpts.metadata, storageOptions: this.providerOpts.storageOptions, storage: this.providerOpts.storage, name: this.providerOpts.name }), this.logger.trace("SignClient Initialized");
  }
  createProviders() {
    if (!this.client)
      throw new Error("Sign Client not initialized");
    if (!this.session)
      throw new Error("Session not initialized. Please call connect() before enable()");
    const u2 = [...new Set(Object.keys(this.session.namespaces).map((i) => Xe(i)))];
    Fi("client", this.client), Fi("events", this.events), Fi("disableProviderPing", this.disableProviderPing), u2.forEach((i) => {
      if (!this.session)
        return;
      const d2 = Zg(i, this.session), w2 = Sa(d2), T = Jg(this.namespaces, this.optionalNamespaces), $3 = Mi(hr({}, T[i]), { accounts: d2, chains: w2 });
      switch (i) {
        case "eip155":
          this.rpcProviders[i] = new kg({ namespace: $3 });
          break;
        case "solana":
          this.rpcProviders[i] = new jg({ namespace: $3 });
          break;
        case "cosmos":
          this.rpcProviders[i] = new nv({ namespace: $3 });
          break;
        case "polkadot":
          this.rpcProviders[i] = new Vg({ namespace: $3 });
          break;
        case "cip34":
          this.rpcProviders[i] = new tv({ namespace: $3 });
          break;
        case "elrond":
          this.rpcProviders[i] = new ev({ namespace: $3 });
          break;
        case "multiversx":
          this.rpcProviders[i] = new rv({ namespace: $3 });
          break;
        case "near":
          this.rpcProviders[i] = new iv({ namespace: $3 });
          break;
      }
    });
  }
  registerEventListeners() {
    if (typeof this.client > "u")
      throw new Error("Sign Client is not initialized");
    this.client.on("session_ping", (u2) => {
      this.events.emit("session_ping", u2);
    }), this.client.on("session_event", (u2) => {
      const { params: i } = u2, { event: d2 } = i;
      if (d2.name === "accountsChanged") {
        const w2 = d2.data;
        w2 && D(w2) && this.events.emit("accountsChanged", w2.map(Xg));
      } else if (d2.name === "chainChanged") {
        const w2 = i.chainId, T = i.event.data, $3 = Xe(w2), En = Wi(w2) !== Wi(T) ? `${$3}:${Wi(T)}` : w2;
        this.onChainChanged(En);
      } else
        this.events.emit(d2.name, d2.data);
      this.events.emit("session_event", u2);
    }), this.client.on("session_update", ({ topic: u2, params: i }) => {
      var d2;
      const { namespaces: w2 } = i, T = (d2 = this.client) == null ? void 0 : d2.session.get(u2);
      this.session = Mi(hr({}, T), { namespaces: w2 }), this.onSessionUpdate(), this.events.emit("session_update", { topic: u2, params: i });
    }), this.client.on("session_delete", async (u2) => {
      await this.cleanup(), this.events.emit("session_delete", u2), this.events.emit("disconnect", Mi(hr({}, U("USER_DISCONNECTED")), { data: u2.topic }));
    }), this.on(Vn.DEFAULT_CHAIN_CHANGED, (u2) => {
      this.onChainChanged(u2, true);
    });
  }
  getProvider(u2) {
    if (!this.rpcProviders[u2])
      throw new Error(`Provider not found: ${u2}`);
    return this.rpcProviders[u2];
  }
  onSessionUpdate() {
    Object.keys(this.rpcProviders).forEach((u2) => {
      var i;
      this.getProvider(u2).updateNamespace((i = this.session) == null ? void 0 : i.namespaces[u2]);
    });
  }
  setNamespaces(u2) {
    const { namespaces: i, optionalNamespaces: d2, sessionProperties: w2 } = u2;
    i && Object.keys(i).length && (this.namespaces = i), d2 && Object.keys(d2).length && (this.optionalNamespaces = d2), this.sessionProperties = w2, this.persist("namespaces", i), this.persist("optionalNamespaces", d2);
  }
  validateChain(u2) {
    const [i, d2] = (u2 == null ? void 0 : u2.split(":")) || ["", ""];
    if (!this.namespaces || !Object.keys(this.namespaces).length)
      return [i, d2];
    if (i && !Object.keys(this.namespaces || {}).map(($3) => Xe($3)).includes(i))
      throw new Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);
    if (i && d2)
      return [i, d2];
    const w2 = Xe(Object.keys(this.namespaces)[0]), T = this.rpcProviders[w2].getDefaultChain();
    return [w2, T];
  }
  async requestAccounts() {
    const [u2] = this.validateChain();
    return await this.getProvider(u2).requestAccounts();
  }
  onChainChanged(u2, i = false) {
    var d2;
    if (!this.namespaces)
      return;
    const [w2, T] = this.validateChain(u2);
    i || this.getProvider(w2).setDefaultChain(T), ((d2 = this.namespaces[w2]) != null ? d2 : this.namespaces[`${w2}:${T}`]).defaultChain = T, this.persist("namespaces", this.namespaces), this.events.emit("chainChanged", T);
  }
  onConnect() {
    this.createProviders(), this.events.emit("connect", { session: this.session });
  }
  async cleanup() {
    this.session = void 0, this.namespaces = void 0, this.optionalNamespaces = void 0, this.sessionProperties = void 0, this.persist("namespaces", void 0), this.persist("optionalNamespaces", void 0), this.persist("sessionProperties", void 0), await this.cleanupPendingPairings({ deletePairings: true });
  }
  persist(u2, i) {
    this.client.core.storage.setItem(`${xa}/${u2}`, i);
  }
  async getFromStore(u2) {
    return await this.client.core.storage.getItem(`${xa}/${u2}`);
  }
};
var cv = lr;

// node_modules/@walletconnect/ethereum-provider/dist/index.es.js
var P = "wc";
var S3 = "ethereum_provider";
var $2 = `${P}@2:${S3}:`;
var j = "https://rpc.walletconnect.com/v1/";
var u = ["eth_sendTransaction", "personal_sign"];
var E = ["eth_accounts", "eth_requestAccounts", "eth_sendRawTransaction", "eth_sign", "eth_signTransaction", "eth_signTypedData", "eth_signTypedData_v3", "eth_signTypedData_v4", "eth_sendTransaction", "personal_sign", "wallet_switchEthereumChain", "wallet_addEthereumChain", "wallet_getPermissions", "wallet_requestPermissions", "wallet_registerOnboarding", "wallet_watchAsset", "wallet_scanQRCode"];
var m = ["chainChanged", "accountsChanged"];
var _2 = ["chainChanged", "accountsChanged", "message", "disconnect", "connect"];
var q2 = Object.defineProperty;
var N2 = Object.defineProperties;
var D3 = Object.getOwnPropertyDescriptors;
var y3 = Object.getOwnPropertySymbols;
var U3 = Object.prototype.hasOwnProperty;
var Q2 = Object.prototype.propertyIsEnumerable;
var O2 = (a, t, s) => t in a ? q2(a, t, { enumerable: true, configurable: true, writable: true, value: s }) : a[t] = s;
var p2 = (a, t) => {
  for (var s in t || (t = {}))
    U3.call(t, s) && O2(a, s, t[s]);
  if (y3)
    for (var s of y3(t))
      Q2.call(t, s) && O2(a, s, t[s]);
  return a;
};
var M2 = (a, t) => N2(a, D3(t));
function g2(a) {
  return Number(a[0].split(":")[1]);
}
function f(a) {
  return `0x${a.toString(16)}`;
}
function L(a) {
  const { chains: t, optionalChains: s, methods: i, optionalMethods: n, events: e, optionalEvents: h2, rpcMap: c } = a;
  if (!D(t))
    throw new Error("Invalid chains");
  const o = { chains: t, methods: i || u, events: e || m, rpcMap: p2({}, t.length ? { [g2(t)]: c[g2(t)] } : {}) }, r = e == null ? void 0 : e.filter((l) => !m.includes(l)), d2 = i == null ? void 0 : i.filter((l) => !u.includes(l));
  if (!s && !h2 && !n && !(r != null && r.length) && !(d2 != null && d2.length))
    return { required: t.length ? o : void 0 };
  const C = (r == null ? void 0 : r.length) && (d2 == null ? void 0 : d2.length) || !s, I2 = { chains: [...new Set(C ? o.chains.concat(s || []) : s)], methods: [...new Set(o.methods.concat(n != null && n.length ? n : E))], events: [...new Set(o.events.concat(h2 != null && h2.length ? h2 : _2))], rpcMap: c };
  return { required: t.length ? o : void 0, optional: s.length ? I2 : void 0 };
}
var v2 = class {
  constructor() {
    this.events = new import_events4.EventEmitter(), this.namespace = "eip155", this.accounts = [], this.chainId = 1, this.STORAGE_KEY = $2, this.on = (t, s) => (this.events.on(t, s), this), this.once = (t, s) => (this.events.once(t, s), this), this.removeListener = (t, s) => (this.events.removeListener(t, s), this), this.off = (t, s) => (this.events.off(t, s), this), this.parseAccount = (t) => this.isCompatibleChainId(t) ? this.parseAccountId(t).address : t, this.signer = {}, this.rpc = {};
  }
  static async init(t) {
    const s = new v2();
    return await s.initialize(t), s;
  }
  async request(t) {
    return await this.signer.request(t, this.formatChainId(this.chainId));
  }
  sendAsync(t, s) {
    this.signer.sendAsync(t, s, this.formatChainId(this.chainId));
  }
  get connected() {
    return this.signer.client ? this.signer.client.core.relayer.connected : false;
  }
  get connecting() {
    return this.signer.client ? this.signer.client.core.relayer.connecting : false;
  }
  async enable() {
    return this.session || await this.connect(), await this.request({ method: "eth_requestAccounts" });
  }
  async connect(t) {
    if (!this.signer.client)
      throw new Error("Provider not initialized. Call init() first");
    this.loadConnectOpts(t);
    const { required: s, optional: i } = L(this.rpc);
    try {
      const n = await new Promise(async (h2, c) => {
        var o;
        this.rpc.showQrModal && ((o = this.modal) == null || o.subscribeModal((r) => {
          !r.open && !this.signer.session && (this.signer.abortPairingAttempt(), c(new Error("Connection request reset. Please try again.")));
        })), await this.signer.connect(M2(p2({ namespaces: p2({}, s && { [this.namespace]: s }) }, i && { optionalNamespaces: { [this.namespace]: i } }), { pairingTopic: t == null ? void 0 : t.pairingTopic })).then((r) => {
          h2(r);
        }).catch((r) => {
          c(new Error(r.message));
        });
      });
      if (!n)
        return;
      const e = Rn(n.namespaces, [this.namespace]);
      this.setChainIds(this.rpc.chains.length ? this.rpc.chains : e), this.setAccounts(e), this.events.emit("connect", { chainId: f(this.chainId) });
    } catch (n) {
      throw this.signer.logger.error(n), n;
    } finally {
      this.modal && this.modal.closeModal();
    }
  }
  async disconnect() {
    this.session && await this.signer.disconnect(), this.reset();
  }
  get isWalletConnect() {
    return true;
  }
  get session() {
    return this.signer.session;
  }
  registerEventListeners() {
    this.signer.on("session_event", (t) => {
      const { params: s } = t, { event: i } = s;
      i.name === "accountsChanged" ? (this.accounts = this.parseAccounts(i.data), this.events.emit("accountsChanged", this.accounts)) : i.name === "chainChanged" ? this.setChainId(this.formatChainId(i.data)) : this.events.emit(i.name, i.data), this.events.emit("session_event", t);
    }), this.signer.on("chainChanged", (t) => {
      const s = parseInt(t);
      this.chainId = s, this.events.emit("chainChanged", f(this.chainId)), this.persist();
    }), this.signer.on("session_update", (t) => {
      this.events.emit("session_update", t);
    }), this.signer.on("session_delete", (t) => {
      this.reset(), this.events.emit("session_delete", t), this.events.emit("disconnect", M2(p2({}, U("USER_DISCONNECTED")), { data: t.topic, name: "USER_DISCONNECTED" }));
    }), this.signer.on("display_uri", (t) => {
      var s, i;
      this.rpc.showQrModal && ((s = this.modal) == null || s.closeModal(), (i = this.modal) == null || i.openModal({ uri: t })), this.events.emit("display_uri", t);
    });
  }
  switchEthereumChain(t) {
    this.request({ method: "wallet_switchEthereumChain", params: [{ chainId: t.toString(16) }] });
  }
  isCompatibleChainId(t) {
    return typeof t == "string" ? t.startsWith(`${this.namespace}:`) : false;
  }
  formatChainId(t) {
    return `${this.namespace}:${t}`;
  }
  parseChainId(t) {
    return Number(t.split(":")[1]);
  }
  setChainIds(t) {
    const s = t.filter((i) => this.isCompatibleChainId(i)).map((i) => this.parseChainId(i));
    s.length && (this.chainId = s[0], this.events.emit("chainChanged", f(this.chainId)), this.persist());
  }
  setChainId(t) {
    if (this.isCompatibleChainId(t)) {
      const s = this.parseChainId(t);
      this.chainId = s, this.switchEthereumChain(s);
    }
  }
  parseAccountId(t) {
    const [s, i, n] = t.split(":");
    return { chainId: `${s}:${i}`, address: n };
  }
  setAccounts(t) {
    this.accounts = t.filter((s) => this.parseChainId(this.parseAccountId(s).chainId) === this.chainId).map((s) => this.parseAccountId(s).address), this.events.emit("accountsChanged", this.accounts);
  }
  getRpcConfig(t) {
    var s, i;
    const n = (s = t == null ? void 0 : t.chains) != null ? s : [], e = (i = t == null ? void 0 : t.optionalChains) != null ? i : [], h2 = n.concat(e);
    if (!h2.length)
      throw new Error("No chains specified in either `chains` or `optionalChains`");
    const c = n.length ? (t == null ? void 0 : t.methods) || u : [], o = n.length ? (t == null ? void 0 : t.events) || m : [], r = (t == null ? void 0 : t.optionalMethods) || [], d2 = (t == null ? void 0 : t.optionalEvents) || [], C = (t == null ? void 0 : t.rpcMap) || this.buildRpcMap(h2, t.projectId), I2 = (t == null ? void 0 : t.qrModalOptions) || void 0;
    return { chains: n == null ? void 0 : n.map((l) => this.formatChainId(l)), optionalChains: e.map((l) => this.formatChainId(l)), methods: c, events: o, optionalMethods: r, optionalEvents: d2, rpcMap: C, showQrModal: !!(t != null && t.showQrModal), qrModalOptions: I2, projectId: t.projectId, metadata: t.metadata };
  }
  buildRpcMap(t, s) {
    const i = {};
    return t.forEach((n) => {
      i[n] = this.getRpcUrl(n, s);
    }), i;
  }
  async initialize(t) {
    if (this.rpc = this.getRpcConfig(t), this.chainId = this.rpc.chains.length ? g2(this.rpc.chains) : g2(this.rpc.optionalChains), this.signer = await cv.init({ projectId: this.rpc.projectId, metadata: this.rpc.metadata, disableProviderPing: t.disableProviderPing, relayUrl: t.relayUrl, storageOptions: t.storageOptions }), this.registerEventListeners(), await this.loadPersistedSession(), this.rpc.showQrModal) {
      let s;
      try {
        s = (init_dist2(), __toCommonJS(dist_exports)).WalletConnectModal;
      } catch {
        throw new Error("To use QR modal, please install @walletconnect/modal package");
      }
      if (s)
        try {
          this.modal = new s(p2({ walletConnectVersion: 2, projectId: this.rpc.projectId, standaloneChains: this.rpc.chains }, this.rpc.qrModalOptions));
        } catch (i) {
          throw this.signer.logger.error(i), new Error("Could not generate WalletConnectModal Instance");
        }
    }
  }
  loadConnectOpts(t) {
    if (!t)
      return;
    const { chains: s, optionalChains: i, rpcMap: n } = t;
    s && D(s) && (this.rpc.chains = s.map((e) => this.formatChainId(e)), s.forEach((e) => {
      this.rpc.rpcMap[e] = (n == null ? void 0 : n[e]) || this.getRpcUrl(e);
    })), i && D(i) && (this.rpc.optionalChains = [], this.rpc.optionalChains = i == null ? void 0 : i.map((e) => this.formatChainId(e)), i.forEach((e) => {
      this.rpc.rpcMap[e] = (n == null ? void 0 : n[e]) || this.getRpcUrl(e);
    }));
  }
  getRpcUrl(t, s) {
    var i;
    return ((i = this.rpc.rpcMap) == null ? void 0 : i[t]) || `${j}?chainId=eip155:${t}&projectId=${s || this.rpc.projectId}`;
  }
  async loadPersistedSession() {
    if (!this.session)
      return;
    const t = await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`), s = this.session.namespaces[`${this.namespace}:${t}`] ? this.session.namespaces[`${this.namespace}:${t}`] : this.session.namespaces[this.namespace];
    this.setChainIds(t ? [this.formatChainId(t)] : s == null ? void 0 : s.accounts), this.setAccounts(s == null ? void 0 : s.accounts);
  }
  reset() {
    this.chainId = 1, this.accounts = [];
  }
  persist() {
    this.session && this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`, this.chainId);
  }
  parseAccounts(t) {
    return typeof t == "string" || t instanceof String ? [this.parseAccount(t)] : t.map((s) => this.parseAccount(s));
  }
};
var G2 = v2;
export {
  G2 as EthereumProvider,
  _2 as OPTIONAL_EVENTS,
  E as OPTIONAL_METHODS,
  m as REQUIRED_EVENTS,
  u as REQUIRED_METHODS,
  v2 as default
};
/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/
//# sourceMappingURL=index.es-OWK7TWMN.js.map
